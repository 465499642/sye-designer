{
    "_id": "e89c617b6b15d35",
    "name": "js",
    "description": "js components",
    "version": "0.9.0",
    "components": {
        "JS": {
            "app.js": {
                "_id": "app.js",
                "source": "var%20runtime%20=%20require('system-runtime');%0A%0A//%20import%20the%20system%0Avar%20systemId%20=%20runtime.require('db').system(%7B%7Bsystem%7D%7D);%0A//%20run%20the%20system%0Aruntime.require(systemId).main();"
            },
            "system-runtime.min.js": {
                "_id": "system-runtime.min.js",
                "source": "/*%0A%20*%20Runtime%20v1.3.5%0A%20*%20The%20System%20Runtime%20Environment%0A%20*%20https://system-runtime.github.io%0A%20*%20@ecarriou%0A%20*%20%20%0A%20*%20Copyright%20(c)%202016%20Erwan%20Carriou%0A%20*%20%0A%20*%20Permission%20is%20hereby%20granted,%20free%20of%20charge,%20to%20any%20person%20obtaining%20a%20copy%0A%20*%20of%20this%20software%20and%20associated%20documentation%20files%20(the%20%22Software%22),%20to%20deal%0A%20*%20in%20the%20Software%20without%20restriction,%20including%20without%20limitation%20the%20rights%0A%20*%20to%20use,%20copy,%20modify,%20merge,%20publish,%20distribute,%20sublicense,%20and/or%20sell%0A%20*%20copies%20of%20the%20Software,%20and%20to%20permit%20persons%20to%20whom%20the%20Software%20is%0A%20*%20furnished%20to%20do%20so,%20subject%20to%20the%20following%20conditions:%0A%20*%20%0A%20*%20The%20above%20copyright%20notice%20and%20this%20permission%20notice%20shall%20be%20included%20in%20all%0A%20*%20copies%20or%20substantial%20portions%20of%20the%20Software.%0A%20*%20%0A%20*%20THE%20SOFTWARE%20IS%20PROVIDED%20%22AS%20IS%22,%20WITHOUT%20WARRANTY%20OF%20ANY%20KIND,%20EXPRESS%20OR%0A%20*%20IMPLIED,%20INCLUDING%20BUT%20NOT%20LIMITED%20TO%20THE%20WARRANTIES%20OF%20MERCHANTABILITY,%0A%20*%20FITNESS%20FOR%20A%20PARTICULAR%20PURPOSE%20AND%20NONINFRINGEMENT.%20IN%20NO%20EVENT%20SHALL%20THE%0A%20*%20AUTHORS%20OR%20COPYRIGHT%20HOLDERS%20BE%20LIABLE%20FOR%20ANY%20CLAIM,%20DAMAGES%20OR%20OTHER%0A%20*%20LIABILITY,%20WHETHER%20IN%20AN%20ACTION%20OF%20CONTRACT,%20TORT%20OR%20OTHERWISE,%20ARISING%20FROM,%0A%20*%20OUT%20OF%20OR%20IN%20CONNECTION%20WITH%20THE%20SOFTWARE%20OR%20THE%20USE%20OR%20OTHER%20DEALINGS%20IN%20THE%0A%20*%20SOFTWARE.%20%0A%20*/%0A!function(a)%7Bif(%22object%22==typeof%20exports&&%22undefined%22!=typeof%20module)module.exports=a();else%20if(%22function%22==typeof%20define&&define.amd)define(%5B%5D,a);else%7Bvar%20b;b=%22undefined%22!=typeof%20window?window:%22undefined%22!=typeof%20global?global:%22undefined%22!=typeof%20self?self:this,b.runtime=a()%7D%7D(function()%7Breturn%20function%20a(b,c,d)%7Bfunction%20e(g,h)%7Bif(!c%5Bg%5D)%7Bif(!b%5Bg%5D)%7Bvar%20i=%22function%22==typeof%20require&&require;if(!h&&i)return%20i(g,!0);if(f)return%20f(g,!0);var%20j=new%20Error(%22Cannot%20find%20module%20'%22+g+%22'%22);throw%20j.code=%22MODULE_NOT_FOUND%22,j%7Dvar%20k=c%5Bg%5D=%7Bexports:%7B%7D%7D;b%5Bg%5D%5B0%5D.call(k.exports,function(a)%7Bvar%20c=b%5Bg%5D%5B1%5D%5Ba%5D;return%20e(c?c:a)%7D,k,k.exports,a,b,c,d)%7Dreturn%20c%5Bg%5D.exports%7Dfor(var%20f=%22function%22==typeof%20require&&require,g=0;g%3Cd.length;g++)e(d%5Bg%5D);return%20e%7D(%7B1:%5Bfunction(a,b,c)%7B%22use%20strict%22;var%20d=%7Bmodels:%7B%2219fe71f8af13886%22:%7B_id:%2219fe71f8af13886%22,_name:%22Worker%22,_schema:%22Worker%22,_inherit:%5B%22RuntimeComponent%22%5D,_core:!0,worker:%7Btype:%22object%22,readOnly:!1,mandatory:!1,%22default%22:%7B%7D%7D,send:%7Bparams:%5B%7Bname:%22message%22,type:%22object%22%7D%5D%7D%7D,%22138a81fa1f16435%22:%7B_id:%22138a81fa1f16435%22,_name:%22RuntimeAdmin%22,_schema:%22RuntimeAdmin%22,_inherit:%5B%22RuntimeComponent%22%5D,_core:!0,start:%7Bparams:%5B%7Bname:%22path%22,type:%22string%22,mandatory:!1,%22default%22:%22%22%7D%5D%7D,stop:%7B%7D%7D,%22135c71078810af2%22:%7B_id:%22135c71078810af2%22,_name:%22RuntimeChannel%22,_schema:%22RuntimeChannel%22,_inherit:%5B%22RuntimeComponent%22%5D,sync:%7B%7D,loadSystem:%7Bparams:%5B%7Bname:%22system%22,type:%22object%22%7D%5D%7D,createSchema:%7Bparams:%5B%7Bname:%22id%22,type:%22string%22%7D,%7Bname:%22schema%22,type:%22object%22%7D%5D%7D,updateSchema:%7Bparams:%5B%7Bname:%22id%22,type:%22string%22%7D,%7Bname:%22schema%22,type:%22object%22%7D%5D%7D,deleteSchema:%7Bparams:%5B%7Bname:%22id%22,type:%22string%22%7D%5D%7D,createModel:%7Bparams:%5B%7Bname:%22id%22,type:%22string%22%7D,%7Bname:%22model%22,type:%22object%22%7D%5D%7D,updateModel:%7Bparams:%5B%7Bname:%22id%22,type:%22string%22%7D,%7Bname:%22model%22,type:%22object%22%7D%5D%7D,deleteModel:%7Bparams:%5B%7Bname:%22id%22,type:%22string%22%7D%5D%7D,createType:%7Bparams:%5B%7Bname:%22id%22,type:%22string%22%7D,%7Bname:%22type%22,type:%22object%22%7D%5D%7D,updateType:%7Bparams:%5B%7Bname:%22id%22,type:%22string%22%7D,%7Bname:%22type%22,type:%22object%22%7D%5D%7D,deleteType:%7Bparams:%5B%7Bname:%22id%22,type:%22string%22%7D%5D%7D,createComponent:%7Bparams:%5B%7Bname:%22collection%22,type:%22string%22%7D,%7Bname:%22component%22,type:%22object%22%7D%5D%7D,updateComponent:%7Bparams:%5B%7Bname:%22id%22,type:%22string%22%7D,%7Bname:%22collection%22,type:%22string%22%7D,%7Bname:%22component%22,type:%22object%22%7D%5D%7D,deleteComponent:%7Bparams:%5B%7Bname:%22id%22,type:%22string%22%7D,%7Bname:%22collection%22,type:%22string%22%7D%5D%7D,createBehavior:%7Bparams:%5B%7Bname:%22behavior%22,type:%22object%22%7D%5D%7D,updateBehavior:%7Bparams:%5B%7Bname:%22id%22,type:%22string%22%7D,%7Bname:%22behavior%22,type:%22object%22%7D%5D%7D,deleteBehavior:%7Bparams:%5B%7Bname:%22id%22,type:%22string%22%7D%5D%7D,_core:!0,send:%7Bparams:%5B%7Bname:%22message%22,type:%22object%22%7D%5D%7D%7D,%2214c7c105b31a160%22:%7B_id:%2214c7c105b31a160%22,_name:%22Runtime%22,load:%7Bparams:%5B%7Bname:%22url%22,type:%22string%22%7D,%7Bname:%22async%22,type:%22boolean%22,mandatory:!1,%22default%22:!0%7D%5D%7D,ready:%7B%7D,_core:!0,version:%7Btype:%22string%22,readOnly:!0,mandatory:!0,%22default%22:%220.0.0%22%7D,system:%7Bparams:%5B%7Bname:%22name%22,type:%22string%22,mandatory:!1%7D%5D,result:%22object%22%7D%7D,%22156f0127ef19a9d%22:%7B_name:%22RuntimeBehavior%22,_core:!0,core:%7Btype:%22boolean%22,readOnly:!1,mandatory:!1,%22default%22:!1%7D,useCoreAPI:%7Btype:%22boolean%22,readOnly:!1,mandatory:!1,%22default%22:!1%7D,component:%7Btype:%22string%22,readOnly:!1,mandatory:!0,%22default%22:%22%22%7D,action:%7Btype:%22javascript%22,readOnly:!1,mandatory:!0,%22default%22:%22%22%7D,state:%7Btype:%22string%22,readOnly:!1,mandatory:!0,%22default%22:%22%22%7D,_id:%22156f0127ef19a9d%22%7D,%221687213785155e2%22:%7B_name:%22RuntimeClassInfo%22,_core:!0,metamodel:%7Btype:%22object%22,readOnly:!0,mandatory:!0,%22default%22:%7B%7D%7D,model:%7Btype:%22object%22,readOnly:!0,mandatory:!0,%22default%22:%7B%7D%7D,property:%7Bparams:%5B%7Bname:%22name%22,type:%22string%22%7D%5D,result:%22object%22%7D,properties:%7Bresult:%22array%22%7D,link:%7Bparams:%5B%7Bname:%22name%22,type:%22string%22%7D%5D,result:%22object%22%7D,links:%7Bresult:%22array%22%7D,method:%7Bparams:%5B%7Bname:%22name%22,type:%22string%22%7D%5D,result:%22object%22%7D,methods:%7Bresult:%22array%22%7D,collection:%7Bparams:%5B%7Bname:%22name%22,type:%22string%22%7D%5D,result:%22object%22%7D,collections:%7Bresult:%22array%22%7D,event:%7Bparams:%5B%7Bname:%22name%22,type:%22string%22%7D%5D,result:%22object%22%7D,events:%7Bresult:%22array%22%7D,_id:%221687213785155e2%22%7D,%221c262169bc10c42%22:%7B_name:%22RuntimeComponent%22,_core:!0,on:%7Bparams:%5B%7Bname:%22state%22,type:%22string%22%7D,%7Bname:%22handler%22,type:%22function%22%7D,%7Bname:%22useCoreAPI%22,type:%22boolean%22,mandatory:!1%7D%5D%7D,off:%7Bparams:%5B%7Bname:%22state%22,type:%22string%22,mandatory:!1%7D,%7Bname:%22behaviorId%22,type:%22string%22,mandatory:!1%7D%5D%7D,require:%7Bparams:%5B%7Bname:%22id%22,type:%22string%22%7D%5D%7D,destroy:%7Bparams:%5B%5D%7D,classInfo:%7Btype:%22@RuntimeClassInfo%22,readOnly:!1,mandatory:!1,%22default%22:%7B%7D%7D,init:%7Bparams:%5B%7Bname:%22conf%22,type:%22object%22%7D%5D%7D,error:%7Bparams:%5B%7Bname:%22data%22,type:%22errorParam%22%7D%5D%7D,_id:%221c262169bc10c42%22%7D,%2216d7317cc91b27a%22:%7B_name:%22RuntimeDatabase%22,_core:!0,system:%7Bparams:%5B%7Bname:%22system%22,type:%22object%22,mandatory:!1%7D%5D,result:%22string%22%7D,subsystem:%7Bparams:%5B%7Bname:%22params%22,type:%22object%22%7D%5D,result:%22string%22%7D,collections:%7Bresult:%22object%22%7D,insert:%7Bparams:%5B%7Bname:%22classId%22,type:%22string%22%7D,%7Bname:%22object%22,type:%22object%22%7D%5D%7D,update:%7Bparams:%5B%7Bname:%22schema%22,type:%22string%22%7D,%7Bname:%22componentId%22,type:%22string%22%7D,%7Bname:%22attributeName%22,type:%22string%22%7D,%7Bname:%22attributeValue%22,type:%22object%22%7D%5D%7D,remove:%7Bparams:%5B%7Bname:%22classId%22,type:%22string%22%7D,%7Bname:%22object%22,type:%22string%22%7D%5D%7D,_id:%2216d7317cc91b27a%22%7D,%2212ec01c79a1ed08%22:%7B_name:%22RuntimeLogger%22,_core:!0,level:%7Btype:%22log%22,readOnly:!1,mandatory:!1,%22default%22:%22warn%22%7D,info:%7Bparams:%5B%7Bname:%22message%22,type:%22string%22%7D%5D%7D,warn:%7Bparams:%5B%7Bname:%22message%22,type:%22string%22%7D%5D%7D,error:%7Bparams:%5B%7Bname:%22message%22,type:%22string%22%7D%5D%7D,_id:%2212ec01c79a1ed08%22%7D,%221405913d741318c%22:%7B_name:%22RuntimeMessage%22,_core:!0,event:%7Btype:%22string%22,readOnly:!1,mandatory:!0,%22default%22:%22%22%7D,from:%7Btype:%22string%22,readOnly:!1,mandatory:!0,%22default%22:%22%22%7D,data:%7Btype:%22array%22,readOnly:!1,mandatory:!0,%22default%22:%5B%5D%7D,_id:%221405913d741318c%22%7D,%221a31017e811ce4a%22:%7B_name:%22RuntimeMetamodel%22,_core:!0,schema:%7Bparams:%5B%7Bname:%22schema%22,type:%22object%22%7D%5D,result:%22any%22%7D,model:%7Bparams:%5B%7Bname:%22model%22,type:%22object%22%7D%5D,result:%22any%22%7D,type:%7Bparams:%5B%7Bname:%22type%22,type:%22object%22%7D%5D,result:%22any%22%7D,create:%7Bparams:%5B%5D%7D,_id:%221a31017e811ce4a%22%7D,%221029912c7f1d949%22:%7B_name:%22RuntimeState%22,_core:!0,name:%7Btype:%22string%22,readOnly:!1,mandatory:!0,%22default%22:%22%22%7D,parameters:%7Btype:%22object%22,readOnly:!1,mandatory:!1,%22default%22:%7B%7D%7D,_id:%221029912c7f1d949%22%7D,%2215f9b1b261145fb%22:%7B_name:%22RuntimeSystem%22,_core:!0,name:%7Btype:%22string%22,readOnly:!1,mandatory:!0,%22default%22:%22%22%7D,master:%7Btype:%22boolean%22,readOnly:!1,mandatory:!1,%22default%22:!1%7D,subsystem:%7Btype:%22boolean%22,readOnly:!1,mandatory:!1,%22default%22:!1%7D,version:%7Btype:%22string%22,readOnly:!1,mandatory:!1,%22default%22:%220.0.1%22%7D,description:%7Btype:%22string%22,readOnly:!1,mandatory:!1,%22default%22:%22%22%7D,schemas:%7Btype:%22object%22,readOnly:!1,mandatory:!1,%22default%22:%7B%7D%7D,models:%7Btype:%22object%22,readOnly:!1,mandatory:!1,%22default%22:%7B%7D%7D,behaviors:%7Btype:%22object%22,readOnly:!1,mandatory:!1,%22default%22:%7B%7D%7D,types:%7Btype:%22object%22,readOnly:!1,mandatory:!1,%22default%22:%7B%7D%7D,components:%7Btype:%22object%22,readOnly:!1,mandatory:!1,%22default%22:%7B%7D%7D,ready:%7B%7D,sync:%7B%7D,main:%7B%7D,_id:%2215f9b1b261145fb%22%7D%7D,schemas:%7B%22155ab18d911ad9f%22:%7B_id:%22155ab18d911ad9f%22,_name:%22Worker%22,_inherit:%5B%22RuntimeComponent%22%5D,_core:!0,worker:%22property%22,send:%22method%22%7D,%2210374180581a41f%22:%7B_id:%2210374180581a41f%22,_name:%22RuntimeAdmin%22,_inherit:%5B%22RuntimeComponent%22%5D,_core:!0,start:%22method%22,stop:%22method%22%7D,%22104ad1f48518376%22:%7B_id:%22104ad1f48518376%22,_name:%22RuntimeChannel%22,sync:%22event%22,loadSystem:%22event%22,createSchema:%22event%22,updateSchema:%22event%22,deleteSchema:%22event%22,createModel:%22event%22,updateModel:%22event%22,deleteModel:%22event%22,createType:%22event%22,updateType:%22event%22,deleteType:%22event%22,createComponent:%22event%22,updateComponent:%22event%22,deleteComponent:%22event%22,createBehavior:%22event%22,updateBehavior:%22event%22,deleteBehavior:%22event%22,_inherit:%5B%22RuntimeComponent%22%5D,_core:!0,send:%22event%22%7D,%2212e211d4cd120a6%22:%7B_id:%2212e211d4cd120a6%22,_name:%22Runtime%22,load:%22method%22,ready:%22event%22,_inherit:%5B%22RuntimeComponent%22%5D,_core:!0,version:%22property%22,system:%22method%22%7D,%221747616f6415502%22:%7B_name:%22RuntimeBehavior%22,_inherit:%5B%22RuntimeComponent%22%5D,_core:!0,core:%22property%22,component:%22property%22,action:%22property%22,state:%22property%22,useCoreAPI:%22property%22,_id:%221747616f6415502%22%7D,%22131811a2d11296c%22:%7B_name:%22RuntimeClassInfo%22,_inherit:%5B%22RuntimeComponent%22%5D,_core:!0,model:%22property%22,metamodel:%22property%22,method:%22method%22,methods:%22method%22,property:%22method%22,properties:%22method%22,link:%22method%22,links:%22method%22,collections:%22method%22,collection:%22method%22,event:%22method%22,events:%22method%22,_id:%22131811a2d11296c%22%7D,%22181331814f14d7d%22:%7B_name:%22RuntimeComponent%22,_inherit:%5B%5D,_core:!0,classInfo:%22property%22,on:%22method%22,off:%22method%22,require:%22method%22,destroy:%22method%22,init:%22method%22,error:%22event%22,_id:%22181331814f14d7d%22%7D,%2219d491a0af11077%22:%7B_name:%22RuntimeDatabase%22,_inherit:%5B%22RuntimeComponent%22%5D,_core:!0,system:%22method%22,subsystem:%22method%22,collections:%22method%22,insert:%22event%22,update:%22event%22,remove:%22event%22,_id:%2219d491a0af11077%22%7D,%221c957151e911f82%22:%7B_name:%22RuntimeLogger%22,_core:!0,level:%22property%22,info:%22method%22,warn:%22method%22,error:%22method%22,_id:%221c957151e911f82%22%7D,%2212c651ba111a584%22:%7B_name:%22RuntimeMessage%22,_inherit:%5B%5D,_core:!0,event:%22property%22,from:%22property%22,data:%22property%22,_id:%2212c651ba111a584%22%7D,%22169e811f3911da1%22:%7B_name:%22RuntimeMetamodel%22,_inherit:%5B%22RuntimeComponent%22%5D,_core:!0,schema:%22method%22,model:%22method%22,type:%22method%22,create:%22method%22,_id:%22169e811f3911da1%22%7D,%221c9c5198cc1a72a%22:%7B_name:%22RuntimeState%22,_inherit:%5B%5D,_core:!0,_class:!1,name:%22property%22,parameters:%22property%22,_id:%221c9c5198cc1a72a%22%7D,%2217a15161031a2e0%22:%7B_name:%22RuntimeSystem%22,_inherit:%5B%22RuntimeComponent%22%5D,_core:!0,name:%22property%22,master:%22property%22,subsystem:%22property%22,version:%22property%22,description:%22property%22,schemas:%22property%22,models:%22property%22,behaviors:%22property%22,types:%22property%22,components:%22property%22,sync:%22method%22,main:%22method%22,ready:%22event%22,_id:%2217a15161031a2e0%22%7D%7D,types:%7Bhtml:%7Bname:%22html%22,type:%22string%22,core:!0%7D,css:%7Bname:%22css%22,type:%22string%22,core:!0%7D,collection:%7Bname:%22collection%22,type:%22object%22,schema:%7Btype:%7Btype:%5B%22string%22%5D,mandatory:!0%7D,readOnly:%7Btype:%22boolean%22,mandatory:!0%7D,mandatory:%7Btype:%22boolean%22,mandatory:!0%7D,%22default%22:%7Btype:%22object%22,mandatory:!0%7D,description:%7Btype:%22string%22,mandatory:!1%7D,label:%7Btype:%22string%22,mandatory:!1%7D%7D,core:!0%7D,errorParam:%7Bname:%22errorParam%22,type:%22object%22,schema:%7Bmessage:%7Btype:%22string%22,mandatory:!0%7D,error:%7Btype:%22object%22,mandatory:!0%7D%7D,core:!0%7D,event:%7Bname:%22event%22,type:%22object%22,schema:%7Bparams:%7Btype:%5B%22parameter%22%5D,mandatory:!1%7D,description:%7Btype:%22string%22,mandatory:!1%7D%7D,core:!0%7D,javascript:%7Bname:%22javascript%22,type:%22string%22,core:!0%7D,json:%7Bname:%22json%22,type:%22string%22,core:!0%7D,link:%7Bname:%22link%22,type:%22object%22,schema:%7Btype:%7Btype:%22string%22,mandatory:!0%7D,readOnly:%7Btype:%22boolean%22,mandatory:!0%7D,mandatory:%7Btype:%22boolean%22,mandatory:!0%7D,%22default%22:%7Btype:%22@type%22,mandatory:!0%7D,description:%7Btype:%22string%22,mandatory:!1%7D,label:%7Btype:%22string%22,mandatory:!1%7D%7D,core:!0%7D,log:%7Bname:%22log%22,type:%22string%22,value:%5B%22info%22,%22warn%22,%22error%22%5D,core:!0%7D,message:%7Bname:%22message%22,type:%22object%22,schema:%7Bevent:%7Btype:%22string%22,mandatory:!0%7D,from:%7Btype:%22string%22,mandatory:!1%7D,data:%7Btype:%22object%22,mandatory:!0%7D%7D,core:!0%7D,method:%7Bname:%22method%22,type:%22object%22,schema:%7Bresult:%7Btype:%22string%22,mandatory:!1%7D,params:%7Btype:%5B%22parameter%22%5D,mandatory:!1%7D,description:%7Btype:%22string%22,mandatory:!1%7D%7D,core:!0%7D,parameter:%7Bname:%22parameter%22,type:%22object%22,schema:%7Bname:%7Btype:%22string%22,mandatory:!0%7D,type:%7Btype:%22string%22,mandatory:!0%7D,mandatory:%7Btype:%22boolean%22,mandatory:!1%7D,%22default%22:%7Btype:%22@type%22,mandatory:!1%7D%7D,core:!0%7D,property:%7Bname:%22property%22,type:%22object%22,schema:%7Btype:%7Btype:%22string%22,mandatory:!0%7D,readOnly:%7Btype:%22boolean%22,mandatory:!0%7D,mandatory:%7Btype:%22boolean%22,mandatory:!0%7D,%22default%22:%7Btype:%22@type%22,mandatory:!0%7D,description:%7Btype:%22string%22,mandatory:!1%7D,label:%7Btype:%22string%22,mandatory:!1%7D%7D,core:!0%7D%7D,behaviors:%7B%221c00c107e01c9b3%22:%7B_id:%221c00c107e01c9b3%22,component:%22RuntimeAdmin%22,state:%22start%22,action:%22function%20start(path)%20%7B%5Cn%20%20%20%20var%20Worker%20=%20null,%5Cn%20%20%20%20worker%20=%20null,%5Cn%20%20%20%20workerPath%20=%20'',%5Cn%20%20%20%20RuntimeChannel%20=%20null,%5Cn%20%20%20%20runtimeChannel%20=%20null;%5Cn%20%20%20%20%5Cn%20%20%20%20if%20(path)%20%7B%5Cn%20%20%20%20%20%20%20%20workerPath%20=%20path%20+%20'/scripts/worker.js';%5Cn%20%20%20%20%20%20%20%20workerPath%20=%20workerPath.replace(/%5C%5C/%5C%5C//g,'/');%5Cn%20%20%20%20%7D%20else%20%7B%5Cn%20%20%20%20%20%20%20%20workerPath%20=%20'/designer/scripts/worker.js';%5Cn%20%20%20%20%7D%5Cn%20%20%20%20%5Cn%20%20%20%20if%20(typeof%20SharedWorker%20!==%20'undefined')%20%7B%5Cn%20%20%20%20%20%20%20%20%5Cn%20%20%20%20%20%20%20%20if%20(!this.require('channel-admin'))%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20RuntimeChannel%20=%20this.require('RuntimeChannel');%5Cn%20%20%20%20%20%20%20%20%20%20%20%20runtimeChannel%20=%20new%20RuntimeChannel(%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'_id':%20'channel-admin',%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'_core':%20true%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D);%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%5Cn%20%20%20%20%20%20%20%20%20%20%20%20runtimeChannel.on('send',%20function%20send(message)%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.require('worker-admin').worker().port.postMessage(message);%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D);%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%5Cn%20%20%20%20%20%20%20%20%20%20%20%20//%20schema%20change%20events%5Cn%20%20%20%20%20%20%20%20%20%20%20%20runtimeChannel.on('createSchema',%20function%20createSchema(id,%20schema)%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.require('metamodel').schema(schema);%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.require('metamodel').create();%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D,%20true);%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%5Cn%20%20%20%20%20%20%20%20%20%20%20%20runtimeChannel.on('updateSchema',%20function%20updateSchema(id,%20schema)%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.require('metamodel').type(schema);%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.require('metamodel').create();%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D,%20true);%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%5Cn%20%20%20%20%20%20%20%20%20%20%20%20runtimeChannel.on('deleteSchema',%20function%20deleteSchema(id)%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20$db%5B'Runtime'%5D.remove(%7B'_id':%20id%7D);%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.require('metamodel').create();%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D,%20true);%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%5Cn%20%20%20%20%20%20%20%20%20%20%20%20//%20model%20change%20events%5Cn%20%20%20%20%20%20%20%20%20%20%20%20runtimeChannel.on('createModel',%20function%20createModel(id,%20model)%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.require('metamodel').schema(model);%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.require('metamodel').create();%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D,%20true);%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%5Cn%20%20%20%20%20%20%20%20%20%20%20%20runtimeChannel.on('updateModel',%20function%20updateModel(id,%20model)%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.require('metamodel').type(model);%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.require('metamodel').create();%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D,%20true);%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%5Cn%20%20%20%20%20%20%20%20%20%20%20%20runtimeChannel.on('deleteModel',%20function%20deleteModel(id)%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20$db%5B'Runtime'%5D.remove(%7B'_id':%20id%7D);%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.require('metamodel').create();%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20$component.removeFromMemory(id);%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D,%20true);%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%5Cn%20%20%20%20%20%20%20%20%20%20%20%20//%20type%20change%20events%5Cn%20%20%20%20%20%20%20%20%20%20%20%20runtimeChannel.on('createType',%20function%20createType(id,%20type)%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.require('metamodel').type(type);%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.require('metamodel').create();%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D,%20true);%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%5Cn%20%20%20%20%20%20%20%20%20%20%20%20runtimeChannel.on('updateType',%20function%20updateType(id,%20type)%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.require('metamodel').type(type);%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.require('metamodel').create();%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D,%20true);%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%5Cn%20%20%20%20%20%20%20%20%20%20%20%20runtimeChannel.on('deleteType',%20function%20deleteType(id)%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20$db%5B'RuntimeType'%5D.remove(%7B'_id':%20id%7D);%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.require('metamodel').create();%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D,%20true);%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%5Cn%20%20%20%20%20%20%20%20%20%20%20%20//%20component%20change%20events%5Cn%20%20%20%20%20%20%20%20%20%20%20%20runtimeChannel.on('createComponent',%20function%20createComponent(model,%20component)%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20$db%5Bmodel%5D.insert(component);%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D,%20true);%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%5Cn%20%20%20%20%20%20%20%20%20%20%20%20runtimeChannel.on('updateComponent',%20function%20updateComponent(id,%20collection,%20component)%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20$db%5Bcollection%5D.update(%7B'_id':%20id%7D,%20component);%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D,%20true);%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%5Cn%20%20%20%20%20%20%20%20%20%20%20%20runtimeChannel.on('deleteComponent',%20function%20deleteComponent(id,%20collection)%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20$db%5Bcollection%5D.remove(%7B'_id':%20id%7D);%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D,%20true);%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%5Cn%20%20%20%20%20%20%20%20%20%20%20%20//%20behavior%20change%20events%5Cn%20%20%20%20%20%20%20%20%20%20%20%20runtimeChannel.on('createBehavior',%20function%20createBehavior(component)%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20$db%5B'RuntimeBehavior'%5D.insert(component);%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D,%20true);%5Cn%20%20%20%20%20%20%20%20%20%20%20%20runtimeChannel.on('updateBehavior',%20function%20updateBehavior(id,%20behavior)%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.require(id).action(behavior.action);%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D);%5Cn%20%20%20%20%20%20%20%20%20%20%20%20runtimeChannel.on('deleteBehavior',%20function%20deleteBehavior(id)%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20$db%5B'RuntimeBehavior'%5D.remove(%7B'_id':%20id%7D);%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D,%20true);%5Cn%20%20%20%20%20%20%20%20%20%5Cn%20%20%20%20%20%20%20%20%20%20%20%20//%20System%20Designer%20event%5Cn%20%20%20%20%20%20%20%20%20%20%20%20runtimeChannel.on('sync',%20function%20sync()%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.loadSystem(JSON.parse(this.require('db').system()));%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D);%5Cn%20%20%20%20%5Cn%20%20%20%20%20%20%20%20%20%20%20%20Worker%20=%20this.require('Worker');%5Cn%20%20%20%20%20%20%20%20%20%20%20%20worker%20=%20new%20Worker(%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'_id':%20'worker-admin',%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'_core':%20true,%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'worker':%20new%20SharedWorker(workerPath),%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D);%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%5Cn%20%20%20%20%20%20%20%20%20%20%20%20worker.worker().port.onmessage%20=%20function%20(e)%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20$db.RuntimeMessage.insert(e.data);%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D;%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%5Cn%20%20%20%20%20%20%20%20%20%20%20%20console.info('runtime:%20admin%20is%20started');%5Cn%20%20%20%20%20%20%20%20%7D%20else%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20console.info('runtime:%20admin%20is%20already%20started');%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%20else%20%7B%5Cn%20%20%20%20%20%20%20%20console.info('runtime:%20the%20browser%20can%20not%20run%20admin%20features');%5Cn%20%20%20%20%7D%5Cn%7D%22,useCoreAPI:!0,core:!0%7D,%221d7151dd2d1558f%22:%7B_id:%221d7151dd2d1558f%22,component:%22RuntimeAdmin%22,state:%22stop%22,action:%22function%20stop()%20%7B%5Cn%20%20%20%20var%20worker%20=%20null,%5Cn%20%20%20%20channel%20=%20null;%5Cn%20%20%20%20%5Cn%20%20%20%20worker%20=%20this.require('worker-admin');%5Cn%20%20%20%20if%20(worker%20&&%20worker.worker())%20%7B%5Cn%20%20%20%20%20%20%20%20worker.worker().port.onmessage%20=%20function%20()%20%7B%7D;%5Cn%20%20%20%20%20%20%20%20worker.destroy();%5Cn%20%20%20%20%20%20%20%20%5Cn%20%20%20%20%20%20%20%20channel%20=%20this.require('channel-admin');%5Cn%20%20%20%20%20%20%20%20if%20(channel)%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20channel.destroy();%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%5Cn%20%20%20%20%20%20%20%20console.info('runtime:%20admin%20is%20stopped');%5Cn%20%20%20%20%7D%5Cn%7D%22,useCoreAPI:!0,core:!0%7D,%221fc101c23918773%22:%7Bcomponent:%22RuntimeComponent%22,state:%22off%22,action:'function%20off(state,%20behaviorId)%20%7B%5Cn%20%20%20%20var%20args%20=%20%5B%5D,%5Cn%20%20%20%20i%20=%200,%5Cn%20%20%20%20length%20=%200;%5Cn%20%20%20%20length%20=%20arguments.length;%5Cn%20%20%20%20%5Cn%20%20%20%20for%20(i%20=%200;%20i%20%3C%20length%20-%206;%20i++)%20%7B%5Cn%20%20%20%20%20%20%20%20args.push(arguments%5Bi%5D);%5Cn%20%20%20%20%7D%5Cn%20%20%20%20%5Cn%20%20%20%20if%20($workflow.checkParams(%7B%5Cn%20%20%20%20%20%20%20%20%22component%22:%20this,%20%5Cn%20%20%20%20%20%20%20%20%22methodName%22:%20%22off%22,%20%5Cn%20%20%20%20%20%20%20%20%22args%22:%20args%5Cn%20%20%20%20%20%20%20%20%7D))%20%7B%5Cn%20%20%20%20%20%20%20%20%5Cn%20%20%20%20%20%20%20%20if%20(state%20%7C%7C%20behaviorId)%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20if%20($metamodel.isValidState(state,%20this.constructor.name))%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20$behavior.remove(%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22behaviorId%22:%20behaviorId,%20%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22componentId%22:%20this.id(),%20%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22state%22:%20state%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D);%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%20%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20console.warn(%22runtime:%20invoke%20%5C%5C%5C'off%5C%5C%5C'%20method%20of%20component%20%5C'%22%20+%20this.id()%20+%20%22%5C'%20with%20an%20invalid%20state%20%5C'%22%20+%20state%20+%20%22%5C'%22);%20%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%7D%20else%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20$behavior.remove(%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22componentId%22:%20this.id()%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D);%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%7D',core:!0,useCoreAPI:!0%7D,%221aaee1e6311ff39%22:%7B_id:%221aaee1e6311ff39%22,component:%22runtime%22,state:%22load%22,action:%22function%20load(url,%20async)%20%7B%5Cn%20%20%20%20var%20xhr%20=%20null,%5Cn%20%20%20%20callbackLoad%20=%20null;%5Cn%20%20%20%20xhr%20=%20new%20XMLHttpRequest();%5Cn%20%20%20%20%5Cn%20%20%20%20callbackLoad%20=%20function%20callbackLoad(system)%20%7B%5Cn%20%20%20%20%20%20%20%20var%20sysId%20=%20$db.system(system),%5Cn%20%20%20%20%20%20%20%20sys%20=%20$component.get(sysId),%5Cn%20%20%20%20%20%20%20%20systems%20=%20document.querySelectorAll('link%5Brel=system%5D'),%5Cn%20%20%20%20%20%20%20%20nbSubsystem%20=%20$db.RuntimeSystem.find(%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20'subsystem':%20true%5Cn%20%20%20%20%20%20%20%20%7D);%20%5Cn%20%20%20%20%20%20%20%20if%20(sys)%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20sys.main();%5Cn%20%20%20%20%20%20%20%20%7D%20%5Cn%20%20%20%20%20%20%20%20if%20(systems.length%20+%201%20+%20nbSubsystem.length%20===%20$db.RuntimeSystem.count())%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20$component.get('runtime').ready();%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D;%5Cn%20%20%20%20%5Cn%20%20%20%20if%20(async)%20%7B%5Cn%20%20%20%20%20%20%20%20xhr.open('GET',%20url,%20true);%5Cn%20%20%20%20%20%20%20%20xhr.onreadystatechange%20=%20function%20()%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20if%20(xhr.readyState%20===%204)%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(xhr.status%20===%20200)%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20callbackLoad(JSON.parse(xhr.response));%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%7D;%5Cn%20%20%20%20%20%20%20%20xhr.send(null);%5Cn%20%20%20%20%7D%20else%20%7B%5Cn%20%20%20%20%20%20%20%20xhr.open('GET',%20url,%20false);%5Cn%20%20%20%20%20%20%20%20xhr.send(null);%5Cn%20%20%20%20%20%20%20%20if%20(xhr.status%20===%20200)%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20callbackLoad(JSON.parse(xhr.response));%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%7D%22,core:!0,useCoreAPI:!0%7D,%221f6001773a18791%22:%7B_id:%221f6001773a18791%22,component:%22e89c617b6b15d24%22,state:%22main%22,action:%22function%20main()%20%7B%5Cn%20%20%20%20var%20subsystems%20=%20%5B%5D,%5Cn%20%20%20%20systems%20=%20%5B%5D,%5Cn%20%20%20%20system%20=%20null,%5Cn%20%20%20%20scripts%20=%20%5B%5D,%5Cn%20%20%20%20script%20=%20null,%5Cn%20%20%20%20pathToDesigner%20=%20'',%5Cn%20%20%20%20logLevel%20=%20'warn',%5Cn%20%20%20%20i%20=%200,%5Cn%20%20%20%20length%20=%200;%5Cn%20%20%20%20%5Cn%20%20%20%20if%20($db.RuntimeSystem)%20%7B%5Cn%20%20%20%20%20%20%20%20subsystems%20=%20$db.RuntimeSystem.find(%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20'subsystem':%20true%5Cn%20%20%20%20%20%20%20%20%7D);%5Cn%20%20%20%20%20%20%20%20subsystems.forEach(function%20(subsystem)%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20var%20subsystemId%20=%20subsystem._id;%5Cn%20%20%20%20%20%20%20%20%20%20%20%20this.require(subsystemId).main();%5Cn%20%20%20%20%20%20%20%20%7D,%20this);%20%5Cn%20%20%20%20%7D%5Cn%20%20%20%20%5Cn%20%20%20%20if%20(typeof%20document%20!==%20'undefined')%20%7B%5Cn%20%20%20%20%20%20%20%20systems%20=%20document.querySelectorAll('link%5Brel=system%5D');%5Cn%20%20%20%20%20%20%20%20length%20=%20systems.length;%5Cn%20%20%20%20%20%20%20%20%5Cn%20%20%20%20%20%20%20%20//%20logger%5Cn%20%20%20%20%20%20%20%20scripts%20=%20document.querySelectorAll('script%5Blog%5D');%5Cn%20%20%20%20%20%20%20%20if%20(scripts.length)%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20logLevel%20=%20scripts%5B0%5D.getAttribute('log');%5Cn%20%20%20%20%20%20%20%20%20%20%20%20this.require('logger').level(logLevel);%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%5Cn%20%20%20%20%20%20%20%20//%20systems%5Cn%20%20%20%20%20%20%20%20for%20(i%20=%200;%20i%20%3C%20length;%20i++)%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20system%20=%20systems%5Bi%5D;%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%5Cn%20%20%20%20%20%20%20%20%20%20%20%20if%20(system.getAttribute('async')%20===%20'false')%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.require('runtime').load(system.href,%20false);%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.require('runtime').load(system.href,%20true);%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20if%20(length%20===%200)%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20this.require('runtime').ready();%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%5Cn%20%20%20%20%20%20%20%20//%20admin%5Cn%20%20%20%20%20%20%20%20scripts%20=%20document.querySelectorAll('script%5Bdesigner%5D');%5Cn%20%20%20%20%20%20%20%20if%20(scripts.length)%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20pathToDesigner%20=%20scripts%5B0%5D.getAttribute('designer');%5Cn%20%20%20%20%20%20%20%20%20%20%20%20this.require('admin').start(pathToDesigner);%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%7D%22,core:!0,useCoreAPI:!0%7D,%221af2d1b17412809%22:%7B_id:%221af2d1b17412809%22,component:%22Runtime%22,state:%22system%22,action:%22function%20system(name)%20%7B%5Cn%20%20%20%20var%20System%20=%20null,%5Cn%20%20%20%20system%20=%20%7B%7D,%5Cn%20%20%20%20systemId%20=%20'',%5Cn%20%20%20%20result%20=%20%5B%5D,%5Cn%20%20%20%20conf%20=%20%7B%7D;%5Cn%20%20%20%20%5Cn%20%20%20%20if%20(name)%20%7B%5Cn%20%20%20%20%20%20%20%20conf.master%20=%20true;%5Cn%20%20%20%20%20%20%20%20conf.name%20=%20name;%5Cn%20%20%20%20%20%20%20%20System%20=%20this.require('RuntimeSystem');%5Cn%20%20%20%20%20%20%20%20system%20=%20new%20System(conf);%5Cn%20%20%20%20%7D%20else%20%7B%5Cn%20%20%20%20%20%20%20%20result%20=%20$db.RuntimeSystem.find(%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20'master':%20true%5Cn%20%20%20%20%20%20%20%20%7D);%5Cn%20%20%20%20%20%20%20%20if%20(result.length)%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20systemId%20=%20result%5B0%5D._id;%5Cn%20%20%20%20%20%20%20%20%20%20%20%20system%20=%20$component.get(systemId);%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%20%20%20%20return%20system;%5Cn%7D%22,core:!0,useCoreAPI:!0%7D,%221dab0122a31b034%22:%7B_id:%221dab0122a31b034%22,component:%22RuntimeClassInfo%22,state:%22collection%22,action:%22function%20collection(name)%20%7B%5Cn%20%20%20%20var%20result%20=%20%7B%7D;%5Cn%20%20%20%20if%20(this.metamodel()%5Bname%5D%20===%20'collection')%20%7B%5Cn%20%20%20%20%20%20%20%20result%20=%20this.model()%5Bname%5D;%5Cn%20%20%20%20%7D%20%5Cn%20%20%20%20%5Cn%20%20%20%20return%20result;%20%5Cn%7D%22,core:!0%7D,%221f7df1ac4b1ce6b%22:%7B_id:%221f7df1ac4b1ce6b%22,component:%22RuntimeClassInfo%22,state:%22collections%22,action:%22function%20collections()%20%7B%5Cn%20%20%20%20var%20keys%20=%20Object.keys(this.metamodel()),%5Cn%20%20%20%20item%20=%20'',%5Cn%20%20%20%20result%20=%20%5B%5D,%5Cn%20%20%20%20i%20=%200,%5Cn%20%20%20%20length%20=%200;%5Cn%20%20%20%20%5Cn%20%20%20%20length%20=%20keys.length;%20%5Cn%20%20%20%20%5Cn%20%20%20%20for%20(i%20=%200;%20i%20%3C%20length;%20i++)%20%7B%20%5Cn%20%20%20%20%20%20%20%20item%20=%20keys%5Bi%5D;%20%5Cn%20%20%20%20%20%20%20%20if%20(this.metamodel()%5Bitem%5D%20===%20'collection')%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20result.push(item);%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%20%20%20%20%5Cn%20%20%20%20return%20result;%5Cn%7D%22,core:!0%7D,%22123601ac0a1b207%22:%7B_id:%22123601ac0a1b207%22,component:%22RuntimeClassInfo%22,state:%22event%22,action:%22function%20event(name)%20%7B%5Cn%20%20%20%20var%20result%20=%20%7B%7D;%5Cn%20%20%20%20%5Cn%20%20%20%20if%20(this.metamodel()%5Bname%5D%20===%20'event')%20%7B%5Cn%20%20%20%20%20%20%20%20result%20=%20this.model()%5Bname%5D;%5Cn%20%20%20%20%7D%20%5Cn%20%20%20%20%5Cn%20%20%20%20return%20result;%5Cn%7D%22,core:!0%7D,%2219856129ee1422d%22:%7B_id:%2219856129ee1422d%22,component:%22RuntimeClassInfo%22,state:%22events%22,action:%22function%20events()%20%7B%5Cn%20%20%20%20var%20keys%20=%20Object.keys(this.metamodel()),%5Cn%20%20%20%20item%20=%20'',%5Cn%20%20%20%20result%20=%20%5B%5D,%5Cn%20%20%20%20i%20=%200,%5Cn%20%20%20%20length%20=%200;%5Cn%20%20%20%20%5Cn%20%20%20%20length%20=%20keys.length;%5Cn%20%20%20%20%5Cn%20%20%20%20for%20(i%20=%200;%20i%20%3C%20length;%20i++)%20%7B%5Cn%20%20%20%20%20%20%20%20item%20=%20keys%5Bi%5D;%5Cn%20%20%20%20%20%20%20%20if%20(this.metamodel()%5Bitem%5D%20===%20'event')%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20result.push(item);%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%20%5Cn%20%20%20%20return%20result;%5Cn%7D%22,core:!0%7D,%221c8df15c06165d7%22:%7B_id:%221c8df15c06165d7%22,component:%22RuntimeClassInfo%22,state:%22link%22,action:%22function%20link(name)%20%7B%5Cn%20%20%20%20var%20result%20=%20%7B%7D;%5Cn%20%20%20%20%5Cn%20%20%20%20if%20(this.metamodel()%5Bname%5D%20===%20'link')%20%7B%5Cn%20%20%20%20%20%20%20%20result%20=%20this.model()%5Bname%5D;%5Cn%20%20%20%20%7D%5Cn%20%20%20%20return%20result;%5Cn%7D%22,core:!0%7D,%221a5b3140ee127da%22:%7B_id:%221a5b3140ee127da%22,component:%22RuntimeClassInfo%22,state:%22links%22,action:%22function%20links()%20%7B%20%5Cn%20%20%20%20var%20keys%20=%20Object.keys(this.metamodel()),%5Cn%20%20%20%20item%20=%20'',%5Cn%20%20%20%20result%20=%20%5B%5D,%5Cn%20%20%20%20i%20=%200,%5Cn%20%20%20%20length%20=%200;%5Cn%20%20%20%20length%20=%20keys.length;%5Cn%20%20%20%20%5Cn%20%20%20%20for%20(i%20=%200;%20i%20%3C%20length;%20i++)%20%7B%5Cn%20%20%20%20%20%20%20%20item%20=%20keys%5Bi%5D;%5Cn%20%20%20%20%20%20%20%20if%20(this.metamodel()%5Bitem%5D%20===%20'link')%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20result.push(item);%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%20return%20result;%5Cn%7D%22,core:!0%7D,%221cd891d1d4159a3%22:%7B_id:%221cd891d1d4159a3%22,component:%22RuntimeClassInfo%22,state:%22method%22,action:%22function%20method(name)%20%7B%5Cn%20%20%20%20var%20result%20=%20%7B%7D;%5Cn%20%20%20%20if%20(this.metamodel()%5Bname%5D%20===%20'method')%20%7B%5Cn%20%20%20%20%20%20%20%20result%20=%20this.model()%5Bname%5D;%5Cn%20%20%20%20%20%20%20%20%5Cn%20%20%20%20%7D%5Cn%20%20%20%20%5Cn%20%20%20%20return%20result;%5Cn%7D%22,core:!0%7D,%2214fc41f6e11b09f%22:%7B_id:%2214fc41f6e11b09f%22,component:%22RuntimeClassInfo%22,state:%22methods%22,action:%22function%20methods()%20%7B%5Cn%20%20%20%20var%20keys%20=%20Object.keys(this.metamodel()),%5Cn%20%20%20%20item%20=%20'',%5Cn%20%20%20%20result%20=%20%5B%5D,%5Cn%20%20%20%20i%20=%200,%5Cn%20%20%20%20length%20=%200;%5Cn%20%20%20%20length%20=%20keys.length;%5Cn%20%20%20%20for%20(i%20=%200;%20i%20%3C%20length;%20i++)%20%7B%5Cn%20%20%20%20%20%20%20%20item%20=%20keys%5Bi%5D;%5Cn%20%20%20%20%20%20%20%20if%20(this.metamodel()%5Bitem%5D%20===%20'method')%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20result.push(item);%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%20%5Cn%20%20%20%20%5Cn%20%20%20%20return%20result;%5Cn%7D%22,core:!0%7D,%221a23d194cd12ab8%22:%7B_id:%221a23d194cd12ab8%22,component:%22RuntimeClassInfo%22,state:%22properties%22,action:%22function%20properties()%20%7B%20%5Cn%20%20%20%20var%20keys%20=%20Object.keys(this.metamodel()),%5Cn%20%20%20%20item%20=%20'',%5Cn%20%20%20%20result%20=%20%5B%5D,%5Cn%20%20%20%20i%20=%200,%5Cn%20%20%20%20length%20=%200;%5Cn%20%20%20%20length%20=%20keys.length;%5Cn%20%20%20%20%5Cn%20%20%20%20for%20(i%20=%200;%20i%20%3C%20length;%20i++)%20%7B%5Cn%20%20%20%20%20%20%20%20item%20=%20keys%5Bi%5D;%5Cn%20%20%20%20%20%20%20%20if%20(this.metamodel()%5Bitem%5D%20===%20'property')%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20result.push(item);%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%20return%20result;%5Cn%7D%22,core:!0%7D,%221d400123c0116d3%22:%7B_id:%221d400123c0116d3%22,component:%22RuntimeClassInfo%22,state:%22property%22,action:%22function%20property(name)%20%7B%5Cn%20%20%20%20var%20result%20=%20%7B%7D;%5Cn%20%20%20%20%5Cn%20%20%20%20if%20(this.metamodel()%5Bname%5D%20===%20'property')%20%7B%5Cn%20%20%20%20%20%20%20%20result%20=%20this.model()%5Bname%5D;%5Cn%20%20%20%20%7D%5Cn%20%20%20%20return%20result;%5Cn%7D%22,core:!0%7D,%2218a801894718c9c%22:%7B_id:%2218a801894718c9c%22,component:%22RuntimeComponent%22,state:%22destroy%22,action:%22function%20destroy()%20%7B%5Cn%20%20%20%20$component.destroy(this.id());%5Cn%7D%22,core:!0,useCoreAPI:!0%7D,%22138cc156571f302%22:%7B_id:%22138cc156571f302%22,component:%22RuntimeComponent%22,state:%22off%22,action:'function%20off(state,%20behaviorId)%20%7B%5Cn%20%20%20%20var%20args%20=%20%5B%5D,%5Cn%20%20%20%20i%20=%200,%5Cn%20%20%20%20length%20=%200;%5Cn%20%20%20%20length%20=%20arguments.length;%5Cn%20%20%20%20%5Cn%20%20%20%20for%20(i%20=%200;%20i%20%3C%20length%20-%207;%20i++)%20%7B%5Cn%20%20%20%20%20%20%20%20args.push(arguments%5Bi%5D);%5Cn%20%20%20%20%7D%5Cn%20%20%20%20%5Cn%20%20%20%20if%20($workflow.checkParams(%7B%5Cn%20%20%20%20%20%20%20%20%22component%22:%20this,%20%5Cn%20%20%20%20%20%20%20%20%22methodName%22:%20%22off%22,%20%5Cn%20%20%20%20%20%20%20%20%22args%22:%20args%5Cn%20%20%20%20%20%20%20%20%7D))%20%7B%5Cn%20%20%20%20%20%20%20%20%5Cn%20%20%20%20%20%20%20%20if%20(state%20%7C%7C%20behaviorId)%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20if%20($metamodel.isValidState(state,%20this.constructor.name))%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20$behavior.remove(%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22behaviorId%22:%20behaviorId,%20%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22componentId%22:%20this.id(),%20%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22state%22:%20state%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D);%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%20%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20console.warn(%22runtime:%20invoke%20%5C%5C%5C'off%5C%5C%5C'%20method%20of%20component%20%5C'%22%20+%20this.id()%20+%20%22%5C'%20with%20an%20invalid%20state%20%5C'%22%20+%20state%20+%20%22%5C'%22);%20%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%7D%20else%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20$behavior.remove(%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22componentId%22:%20this.id()%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D);%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%7D',core:!0,useCoreAPI:!0%7D,%2210e9c131e31858f%22:%7B_id:%2210e9c131e31858f%22,component:%22RuntimeComponent%22,state:%22require%22,action:%22function%20require(id)%20%7B%5Cn%20%20%20%20return%20$component.get(id);%5Cn%7D%22,core:!0,useCoreAPI:!0%7D,%2218b2b1b33817859%22:%7B_id:%2218b2b1b33817859%22,component:%22RuntimeDatabase%22,state:%22collections%22,action:%22function%20collections()%20%7B%5Cn%20%20%20%20var%20result%20=%20%7B%7D,%5Cn%20%20%20%20collectionName%20=%20'';%5Cn%20%20%20%20%5Cn%20%20%20%20for%20(collectionName%20in%20$db.store)%20%7B%5Cn%20%20%20%20%20%20%20%20if%20($db.store.hasOwnProperty(collectionName)%20&&%20collectionName.indexOf('Runtime')%20!==%200)%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20result%5BcollectionName%5D%20=%20$db%5BcollectionName%5D;%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%20%20%20%20return%20result;%5Cn%7D%22,core:!0,useCoreAPI:!0%7D,%2213d8c1db441e026%22:%7B_id:%2213d8c1db441e026%22,component:%22RuntimeDatabase%22,state:%22subsystem%22,action:%22function%20subsystem(params)%20%7B%5Cn%20%20%20%20return%20$db.subsystem(params);%5Cn%7D%22,core:!0,useCoreAPI:!0%7D,%221f0a6108fe19359%22:%7B_id:%221f0a6108fe19359%22,component:%22RuntimeDatabase%22,state:%22system%22,action:%22function%20system(system)%20%7B%5Cn%20%20%20%20return%20$db.system(system);%5Cn%7D%22,core:!0,useCoreAPI:!0%7D,%221a8b71b12b110e4%22:%7B_id:%221a8b71b12b110e4%22,component:%22RuntimeLogger%22,state:%22error%22,action:%22function%20error(message)%20%7B%5Cn%20%20%20%20console.error('runtime:%20'%20+%20message);%5Cn%7D%22,core:!0%7D,%221cab61e2d910702%22:%7B_id:%221cab61e2d910702%22,component:%22RuntimeLogger%22,state:%22info%22,action:%22function%20info(message)%20%7B%5Cn%20%20%20%20if%20(this.level()%20===%20'info')%20%7B%5Cn%20%20%20%20%20%20%20%20console.info('runtime:%20'%20+%20message);%5Cn%20%20%20%20%7D%5Cn%7D%22,core:!0%7D,%221cd45113931d3a3%22:%7B_id:%221cd45113931d3a3%22,component:%22RuntimeLogger%22,state:%22level%22,action:%22function%20level(val)%20%7B%5Cn%20%20%20%20$log.level(val);%5Cn%7D%22,core:!0,useCoreAPI:!0%7D,%221876c1f2a116c6f%22:%7B_id:%221876c1f2a116c6f%22,component:%22RuntimeLogger%22,state:%22warn%22,action:%22function%20warn(message)%20%7B%5Cn%20%20%20%20if%20(this.level()%20===%20'info'%20%7C%7C%20this.level()%20===%20'warn')%20%7B%5Cn%20%20%20%20%20%20%20%20console.warn('runtime:%20'%20+%20message);%5Cn%20%20%20%20%7D%20%5Cn%7D%22,core:!0%7D,%22134721d2d11ca3b%22:%7B_id:%22134721d2d11ca3b%22,component:%22RuntimeMetamodel%22,state:%22create%22,action:%22function%20create()%20%7B%5Cn%20%20%20%20%20%20%20%20$log.modelCreationBegin();%20%5Cn%20%20%20%20%20%20%20%20$metamodel.create();%20%20%20%20%20%5Cn%20%20%20%20%20%20%20%20$log.modelCreationEnd();%5Cn%7D%22,core:!0,useCoreAPI:!0%7D,%22141591a1e1126a8%22:%7B_id:%22141591a1e1126a8%22,component:%22RuntimeMetamodel%22,state:%22model%22,action:%22function%20model(model)%20%7B%5Cn%20%20%20%20return%20$metamodel.model(model);%5Cn%7D%22,core:!0,useCoreAPI:!0%7D,%221b8b91002010092%22:%7B_id:%221b8b91002010092%22,component:%22RuntimeMetamodel%22,state:%22schema%22,action:%22function%20schema(schema)%20%7B%5Cn%20%20%20%20return%20$metamodel.schema(schema);%5Cn%7D%22,core:!0,useCoreAPI:!0%7D,%2212ac513ece15c48%22:%7B_id:%2212ac513ece15c48%22,component:%22RuntimeMetamodel%22,state:%22type%22,action:%22function%20type(type)%20%7B%5Cn%20%20%20%20return%20$metamodel.type(type);%5Cn%7D%22,core:!0,useCoreAPI:!0%7D,%22168371eb05176d1%22:%7B_id:%22168371eb05176d1%22,component:%22RuntimeSystem%22,state:%22sync%22,action:%22function%20sync()%20%7B%5Cn%20%20%20%20var%20system%20=%20JSON.parse($db.system());%5Cn%20%20%20%20%5Cn%20%20%20%20this.schemas(system.schemas);%5Cn%20%20%20%20this.types(system.types);%5Cn%20%20%20%20this.behaviors(system.behaviors);%5Cn%20%20%20%20this.components(system.components);%5Cn%7D%22,core:!0,useCoreAPI:!0%7D%7D,components:%7BRuntimeAdmin:%7Badmin:%7B_id:%22admin%22,_core:!0%7D%7D,Runtime:%7Bruntime:%7B_id:%22runtime%22,version:%221.3.5%22%7D%7D,RuntimeDatabase:%7Bdb:%7B_id:%22db%22%7D%7D,RuntimeLogger:%7Blogger:%7B_id:%22logger%22%7D%7D,RuntimeMetamodel:%7Bmetamodel:%7B_id:%22metamodel%22%7D%7D,RuntimeSystem:%7B%2218ed81de331252c%22:%7B_id:%2218ed81de331252c%22,name:%22system-admin%22,version:%220.2.0%22,description:%22Runtime%20Component%20administration%20%22,subsystem:!0,master:!1%7D,%22133421d0c313d2d%22:%7B_id:%22133421d0c313d2d%22,name:%22web%22,version:%220.1.0%22,description:%22Add%20behaviors%20for%20web%22,subsystem:!0,master:!1%7D,%221f6ff194df1c37a%22:%7B_id:%221f6ff194df1c37a%22,name:%22webType%22,version:%220.1.0%22,description:%22Add%20types%20for%20web%22,subsystem:!0,master:!1%7D%7D%7D,name:%22runtime%22,version:%221.3.5%22,description:%22Runtime%22,_id:%22e89c617b6b15d24%22,master:!1,subsystem:!1%7D;c.system=d%7D,%7B%7D%5D,2:%5Bfunction(a,b,c)%7B%22use%20strict%22;function%20d(a,b,c,d)%7Bvar%20e=%22%22,f=-1,g=%22%22,h=%5B%5D,i=%5B%5D,j=%22%22,k=%22%22,l=null;return%20f=b.indexOf(%22%7B%22),k=b.substring(0,f),e=k.split(%22(%22)%5B0%5D.replace(%22function%22,%22%22).trim(),g=k.split(%22(%22)%5B1%5D.replace(%22)%22,%22%22).trim(),h=g.split(%22,%22),h.forEach(function(a)%7Bi.push(a.trim())%7D),j=b.substring(f+1),j=j.substring(0,j.lastIndexOf(%22%7D%22)).trim(),e=e%7C%7Ca,%22%22===h%5B0%5D&&(h=%5B%5D),d&&(h.push(%22$component%22),h.push(%22$db%22),h.push(%22$metamodel%22),h.push(%22$workflow%22),h.push(%22$behavior%22),h.push(%22$state%22),h.push(%22$log%22)),l=%22%22!==h%5B0%5D?new%20Function(%22body%22,%22return%20function%20%22+e+%22%20(%22+h.join(%22,%22)+%22)%20%7B%20return%20new%20Function('%22+h.join(%22','%22)+%22',%20body).apply(this,%20arguments)%20%7D;%22)(j):new%20Function(%22body%22,%22return%20function%20%22+e+%22%20()%20%7B%20return%20new%20Function(body).apply(this,%20arguments)%20%7D;%22)(j)%7Dfunction%20e(a,b,c,e,f)%7Bvar%20g=l.generateId(),h=c.toString();return%22undefined%22==typeof%20f&&(f=!1),%22undefined%22==typeof%20e&&(e=!1),c=d(b,h,f,e),m%5Bg%5D=c,k.RuntimeBehavior.insert(%7B_id:g,component:a,state:b,action:h,useCoreAPI:e,core:f%7D),g%7Dfunction%20f(a)%7Bvar%20b=%5B%5D;a=a%7C%7C%7B%7D,a.behaviorId=a.behaviorId%7C%7C%22%22,a.componentId=a.componentId%7C%7C%22%22,a.state=a.state%7C%7C%22%22,a.componentId&&(a.behaviorId?(k.RuntimeBehavior.remove(%7B_id:a.behaviorId,component:a.componentId,state:a.state%7D),delete%20m%5Ba.behaviorId%5D):(b=a.state?k.RuntimeBehavior.remove(%7Bcomponent:a.componentId,state:a.state%7D):k.RuntimeBehavior.remove(%7Bcomponent:a.componentId%7D),b.forEach(function(a)%7Bdelete%20m%5Ba%5D%7D)))%7Dfunction%20g(a)%7Bdelete%20m%5Ba%5D%7Dfunction%20h(a,b)%7Bvar%20c=%5B%5D,e=%5B%5D,f=null;return%20e=k.RuntimeBehavior.find(%7Bcomponent:a,state:b%7D),e.forEach(function(a)%7Bf=m%5Ba._id%5D,%22undefined%22==typeof%20f&&(f=d(a.state,a.action,a.core,a.useCoreAPI),m%5Ba._id%5D=f),c.push(%7BuseCoreAPI:a.useCoreAPI,action:f%7D)%7D),c%7Dfunction%20i()%7Bm=%7B%7D%7Dfunction%20j(a)%7B%0Areturn%20m%5Ba%5D%7Dvar%20k=a(%22./db.js%22),l=a(%22./helper.js%22),m=%7B%7D;c.add=e,c.get=j,c.remove=f,c.getActions=h,c.clear=i,c.removeFromMemory=g%7D,%7B%22./db.js%22:4,%22./helper.js%22:5%7D%5D,3:%5Bfunction(a,b,c)%7B%22use%20strict%22;function%20d(a)%7Bvar%20b=%5B%5D,c=%5B%5D,d=%22%22,e=%22%22,f=%22%22,g=!1;return%20a=a%7C%7C%7B%7D,d=a.type%7C%7C%22%22,e=a.id%7C%7C%22%22,f=a.propertyName%7C%7C%22%22,c=a.arr%7C%7C%5B%5D,%22undefined%22!=typeof%20a.readOnly&&(g=a.readOnly),c.forEach(function(a)%7B-1!==d.indexOf(%22@%22)?b.push(C.getRuntime().require(a)):b.push(a)%7D),b.push=function(a)%7Bvar%20b=!1;return%20g?D.readOnlyProperty(e,f):(b=-1!==d.indexOf(%22@%22),b?a&&A.inheritFrom(a.constructor.name,d.replace(%22@%22,%22%22))?(c.push(a.id()),y.state(%7Bcomponent:e,state:f,data:%5Bc.length,a.id(),%22add%22%5D%7D)):D.invalidPropertyName(e,f,a.id(),d):a&&A.isValidType(a,d)?(c.push(a),y.state(%7Bcomponent:e,state:f,data:%5Bc.length,a,%22add%22%5D%7D)):D.invalidPropertyName(e,f,a,d)),c.length%7D,b.pop=function()%7Bvar%20a,b=null,h=!1;return%20g?D.readOnlyProperty(e,f):0!==c.length&&(b=c.pop(),y.state(%7Bcomponent:e,state:f,data:%5Bc.length,b,%22remove%22%5D%7D),h=-1!==d.indexOf(%22@%22),a=h?L%5Bb%5D:b),a%7D,b%7Dfunction%20e(a,b)%7Bvar%20c=%5B%5D,d=%5B%5D,e=0,f=0;if(c=A.getModel(a)%5Bb%5D.params)for(e=c.length,f=0;e%3Ef;f++)d.push(c%5Bf%5D.name);return%20d%7Dfunction%20f(a)%7Bvar%20b=null,c=null,d=%5B%5D,e=0,f=0,g=%5B%5D;for(b=A.getModel(a),c=A.getSchema(b._schema),d=Object.keys(c),e=d.length,f=0;e%3Ef;f++)c%5Bd%5Bf%5D%5D!==H&&c%5Bd%5Bf%5D%5D!==G&&c%5Bd%5Bf%5D%5D!==I%7C%7Cg.push(%7Bname:d%5Bf%5D,type:b%5Bd%5Bf%5D%5D.type,readOnly:b%5Bd%5Bf%5D%5D.readOnly%7D);return%20g%7Dfunction%20g(a)%7Bvar%20b=null,c=null,d=%5B%5D,e=0,f=0,g=%5B%5D;for(b=A.getModel(a),c=A.getSchema(b._schema),d=Object.keys(c),e=d.length,f=0;e%3Ef;f++)c%5Bd%5Bf%5D%5D===J&&g.push(d%5Bf%5D);return%20g%7Dfunction%20h(a)%7Bvar%20b=null,c=null,d=%5B%5D,e=0,f=0,g=%5B%5D;for(b=A.getModel(a),c=A.getSchema(b._schema),d=Object.keys(c),e=d.length,f=0;e%3Ef;f++)c%5Bd%5Bf%5D%5D===K&&g.push(d%5Bf%5D);return%20g%7Dfunction%20i(a)%7Bvar%20b=function(b)%7Bb=b%7C%7C%7B%7D;var%20c=%7B%7D;%22Object%22!==b.constructor.name&&(D.invalidConctructorParameters(b,a),b=%7B%7D),A.isValidObject(b,A.getModel(a),!0,!0)%7C%7CD.invalidParameters(a),A.prepareObject(b,A.getModel(a)),%22undefined%22==typeof%20b._id&&(b._id=C.generateId()),L%5Bb._id%5D=this,c=function()%7Breturn%20b._id%7D,this.id=new%20Function(%22body%22,%22return%20function%20id%20()%20%7B%20return%20body.call(this)%20%7D;%22)(c),A.inheritFrom(a,%22RuntimeComponent%22)&&(b.classInfo=a+%22Info%22),z.store%5Ba%5D%5Bb._id%5D=b,C.isRuntime()&&C.getRuntime().require(%22db%22)&&C.getRuntime().require(%22db%22).insert(a,b),Object.freeze(this),this.init&&this.init(b)%7D;return%20new%20Function(%22body%22,%22return%20function%20%22+a+%22%20(config)%20%7B%20body.call(this,config)%20%7D;%22)(b)%7Dfunction%20j(a,b)%7Bvar%20c=function()%7Breturn%20b%7D;a.id=new%20Function(%22body%22,%22return%20function%20id%20(prop,%20val)%20%7B%20return%20body.call(this,%20prop,%20val)%20%7D;%22)(c)%7Dfunction%20k(a,b,c)%7Bvar%20e=f(a);e.forEach(function(a)%7Bvar%20e=%7B%7D,f=%22%22,g=%22%22,h=%22%22;f=a.name,g=a.type,h=a.readOnly,Array.isArray(g)?(e=function(a,b)%7Bvar%20e=%5B%5D,i=null,j=null,k=null,l=null;if(%22undefined%22==typeof%20b)%7Bif(%22undefined%22==typeof%20a)return%20j=new%20d(%7Bid:this.id(),propertyName:f,readOnly:h,classId:c,type:g%5B0%5D,arr:z.store%5Bc%5D%5Bthis.id()%5D%5Bf%5D%7D);if(k=z.store%5Bc%5D%5Bthis.id()%5D%5Bf%5D%5Ba%5D)return%20l=-1!==g%5B0%5D.indexOf(%22@%22)?C.getRuntime().require(k):k%7Delse%20h?D.readOnlyProperty(this.id(),f):(A.isValidType(b,g%5B0%5D)%7C%7CA.inheritFrom(b.constructor.name,g%5B0%5D.replace(%22@%22,%22%22))&&-1!==g%5B0%5D.indexOf(%22@%22))&&(e=z%5Bc%5D.find(%7B_id:this.id()%7D),e.length?(l=-1!==g%5B0%5D.indexOf(%22@%22)?b.id():b,i=e%5B0%5D,i%5Bf%5D%5Ba%5D=l,C.isRuntime()&&C.getRuntime().require(%22db%22).update(c,this.id(),f,l),y.state(%7Bcomponent:this.id(),state:f,data:%5Ba,l,%22add%22%5D%7D)):D.invalidPropertyName(this.id(),f,b,g))%7D,b.prototype%5Bf%5D=new%20Function(%22body%22,%22return%20function%20%22+f+%22%20(position,value)%20%7B%20return%20body.call(this,%20position,%20value)%20%7D;%22)(e)):(e=function(a)%7Bvar%20b=%5B%5D,d=null,e=null;if(%22undefined%22==typeof%20a)%7Bif(d=z.store%5Bc%5D%5Bthis.id()%5D)return%20e=d%5Bf%5D,-1!==g.indexOf(%22@%22)&&(e=t(e)),e;D.destroyedComponentCall(f,this.id())%7Delse%20h?D.readOnlyProperty(this.id(),f):A.isValidType(a,g)?(b=z%5Bc%5D.find(%7B_id:this.id()%7D),b.length&&(d=b%5B0%5D,-1!==g.indexOf(%22@%22)?d%5Bf%5D=a.id():d%5Bf%5D=a,C.isRuntime()&&C.getRuntime().require(%22db%22)&&C.getRuntime().require(%22db%22).update(c,this.id(),f,a),%22RuntimeBehavior%22===c&&B.removeFromMemory(this.id()),y.state(%7Bcomponent:this.id(),state:f,data:%5Ba%5D%7D))):D.invalidPropertyName(this.id(),f,a,g)%7D,b.prototype%5Bf%5D=new%20Function(%22body%22,%22return%20function%20%22+f+%22%20(value)%20%7B%20return%20body.call(this,value)%20%7D;%22)(e))%7D)%7Dfunction%20l(a,b,c)%7Bvar%20d=g(a);d.forEach(function(a)%7Bvar%20d=e(c,a),f=d.join(%22,%22),g=function()%7Bvar%20b=null;return%20b=y.state(%7Bcomponent:this.id(),state:a,data:arguments%7D)%7D;f?b.prototype%5Ba%5D=new%20Function(%22body%22,%22return%20function%20%22+a+%22%20(%22+f+%22)%20%7B%20return%20body.call(this,%22+f+%22)%20%7D;%22)(g):b.prototype%5Ba%5D=new%20Function(%22body%22,%22return%20function%20%22+a+%22%20()%20%7B%20return%20body.call(this)%20%7D;%22)(g)%7D)%7Dfunction%20m(a,b,c)%7Bvar%20d=h(a);d.forEach(function(a)%7Bvar%20d=e(c,a),f=d.join(%22,%22),g=function()%7Bvar%20b=%5B%5D,d=-1,e=%5B%5D,f=0,g=-1,h=%7B%7D;if(%22RuntimeChannel%22===c)%7Bif(b=z.RuntimeSystem.find(%7Bmaster:!0%7D),b.length)%7Bfor(d=b%5B0%5D._id,h.from=d,g=arguments.length,f=0;g%3Ef;f++)e.push(arguments%5Bf%5D);h.data=e,h.event=a,z.RuntimeMessage.insert(h),y.state(%7Bcomponent:this.id(),state:%22send%22,data:%5B%7Bevent:h.event,from:h.from,data:h.data%7D%5D%7D)%7D%7Delse%20y.state(%7Bcomponent:this.id(),state:a,data:arguments%7D)%7D;f?b.prototype%5Ba%5D=new%20Function(%22body%22,%22return%20function%20%22+a+%22%20(%22+f+%22)%20%7B%20return%20body.call(this,%22+f+%22)%20%7D;%22)(g):b.prototype%5Ba%5D=new%20Function(%22body%22,%22return%20function%20%22+a+%22%20()%20%7B%20return%20body.call(this)%20%7D;%22)(g)%7D)%7Dfunction%20n(a,b)%7Bvar%20c=function(a,c,d)%7Bvar%20e=%22%22,f=%22%22;return%20y.checkParams(%7Bcomponent:this,methodName:%22on%22,args:arguments%7D)&&(A.isValidState(a,b)?A.isEvent(a,b)%7C%7CA.isProperty(a,b)%7C%7CA.isLink(a,b)%7C%7CA.isCollection(a,b)%7C%7C!(z.RuntimeBehavior.find(%7Bcomponent:this.id(),state:a%7D).length%3E=1)?E.validParamNumbers(b,a,c)?(e=B.add(this.id(),a,c,d),f=F.get(this.id()),f&&a===f.name&&y.action(e,f.parameters.data)):D.invalidParamNumberMethodOn(this.id(),a):D.behaviorNotUnique(b,a):D.invalidStateOn(b,a)),e%7D;a.prototype.on=new%20Function(%22body%22,%22return%20function%20on%20(state,handler,useCoreAPI)%20%7B%20return%20body.call(this,state,handler,useCoreAPI)%20%7D;%22)(c)%7Dfunction%20o(a,b)%7Bvar%20c=function(a,c,d)%7Bvar%20e=%22%22,f=%22%22;return%20y.checkParams(%7Bcomponent:this,methodName:%22on%22,args:arguments%7D)&&(A.isValidState(a,b)?A.isEvent(a,b)%7C%7CA.isProperty(a,b)%7C%7CA.isLink(a,b)%7C%7CA.isCollection(a,b)%7C%7C!(z.RuntimeBehavior.find(%7Bcomponent:this.id(),state:a%7D).length%3E=1)?E.validParamNumbers(b,a,c)?(e=B.add(this.id(),a,c,d),f=F.get(this.id()),f&&a===f.name&&y.action(e,f.parameters.data)):D.invalidParamNumberMethodOn(this.id(),a):D.behaviorNotUnique(b,a):D.invalidStateOn(b,a)),e%7D;a.on=new%20Function(%22body%22,%22return%20function%20on%20(state,handler,useCoreAPI)%20%7B%20return%20body.call(this,%20state,%20handler,%20useCoreAPI)%20%7D;%22)(c)%7Dfunction%20p(a,b)%7Bvar%20c=function(a,c)%7By.checkParams(%7Bcomponent:this,methodName:%22off%22,args:arguments%7D)&&(A.isValidState(a,b)?B.remove(%7BbehaviorId:c,componentId:b,state:a%7D):D.InvalidStateOff(b,a))%7D;a.off=new%20Function(%22body%22,%22return%20function%20off%20(state,%20behaviorId)%20%7B%20return%20body.call(this,%20state,%20behaviorId)%20%7D;%22)(c)%7Dfunction%20q(a)%7Bvar%20b=function()%7Bvar%20a=this.id(),b=%5B%5D,c=0,d=0;for(z%5Ba%5D&&(b=z%5Ba%5D.remove()),delete%20L%5Ba%5D,B.remove(%7BcomponentId:a%7D),d=b.length,c=0;d%3Ec;c++)B.remove(%7BcomponentId:b%5Bc%5D%7D);y.state(%7Bcomponent:a,state:%22destroy%22%7D)%7D;a.destroy=new%20Function(%22body%22,%22return%20function%20destroy%20()%20%7B%20return%20body.call(this)%20%7D;%22)(b)%7Dfunction%20r(a)%7Bvar%20b=function()%7Breturn%20t(this.id()+%22Info%22)%7D;a.classInfo=new%20Function(%22body%22,%22return%20function%20classInfo%20()%20%7B%20return%20body.call(this)%20%7D;%22)(b)%7Dfunction%20s(a)%7Ba=a%7C%7C%7B%7D;var%20b=%7B%7D,c=%22%22;return%20c=%22undefined%22==typeof%20a.model?C.generateId():a.model,b=i(c),L%5Bc%5D=b,j(b,c),k(a.model,b,c),l(a.model,b,c),m(a.model,b,c),A.inheritFrom(c,%22RuntimeComponent%22)&&(n(b,c),o(b,c),p(b,c),q(b),r(b)),Object.freeze(b),b%7Dfunction%20t(a)%7Breturn%20L%5Ba%5D%7Dfunction%20u(a)%7Breturn%20s(a)%7Dfunction%20v(a)%7Bvar%20b=L%5Ba%5D,c=%22%22;b&&(delete%20L%5Ba%5D,c=b.constructor.name,z%5Bc%5D.remove(%7B_id:a%7D),B.remove(%7BcomponentId:a%7D),%22RuntimeBehavior%22===c&&B.removeFromMemory(a))%7Dfunction%20w(a)%7Bdelete%20L%5Ba%5D%7Dfunction%20x()%7BL=%7B%7D%7Dvar%20y=a(%22./workflow.js%22),z=a(%22./db.js%22),A=a(%22./metamodel.js%22),B=a(%22./behavior.js%22),C=a(%22./helper.js%22),D=a(%22./log.js%22),E=a(%22./workflow.js%22),F=a(%22./state.js%22),G=%22property%22,H=%22link%22,I=%22collection%22,J=%22method%22,K=%22event%22,L=%7B%7D;d.prototype=new%20Array,c.create=u,c.get=t,c.removeFromMemory=w,c.clear=x,c.destroy=v%7D,%7B%22./behavior.js%22:2,%22./db.js%22:4,%22./helper.js%22:5,%22./log.js%22:6,%22./metamodel.js%22:7,%22./state.js%22:9,%22./workflow.js%22:10%7D%5D,4:%5Bfunction(a,b,c)%7B%22use%20strict%22;function%20d()%7Bvar%20a=%7B%7D,b=%22%22,d=%22%22,e=%22%22,f=null,g=null,h=null,i=null,j=null,k=%22%22,l=%22%22,m=0,n=0,o=%22%22;if(a.schemas=%7B%7D,c.RuntimeSchema.count())for(k%20in%20r.RuntimeSchema)h=JSON.parse(JSON.stringify(r.RuntimeSchema%5Bk%5D)),h._core%7C%7C(a.schemas%5Bk%5D=h);if(a.models=%7B%7D,c.RuntimeModel.count())for(l%20in%20r.RuntimeModel)i=JSON.parse(JSON.stringify(r.RuntimeModel%5Bl%5D)),i._core%7C%7C(a.models%5Bl%5D=i);if(a.types=%7B%7D,c.RuntimeType.count())for(e%20in%20r.RuntimeType)f=JSON.parse(JSON.stringify(r.RuntimeType%5Be%5D)),delete%20f._id,f.core%7C%7C(a.types%5Bf.name%5D=f);a.behaviors=%7B%7D;for(d%20in%20r.RuntimeBehavior)g=JSON.parse(JSON.stringify(r.RuntimeBehavior%5Bd%5D)),delete%20g.classInfo,g.core%7C%7C(a.behaviors%5Bd%5D=g);for(a.components=%7B%7D,m=s.length,n=0;m%3En;n++)if(b=s%5Bn%5D,c%5Bb%5D.count())%7Bj=JSON.parse(JSON.stringify(r%5Bb%5D));for(o%20in%20j)delete%20j%5Bo%5D.classInfo,j%5Bo%5D._core&&delete%20j%5Bo%5D;Object.keys(j).length&&(a.components%5Bb%5D=j)%7Dreturn%20a%7Dfunction%20e(a,b)%7Bvar%20c=!0,d=%22%22;for(d%20in%20a)%7Bif(%22undefined%22==typeof%20b%5Bd%5D)%7Bc=!1;break%7Dif(a%5Bd%5Dinstanceof%20RegExp)%7Bif(null===b%5Bd%5D.match(a%5Bd%5D))%7Bc=!1;break%7D%7Delse%20if(b%5Bd%5D!==a%5Bd%5D)%7Bc=!1;break%7D%7Dreturn%20c%7Dfunction%20f(a)%7Bc%5Ba%5D=new%20v(a)%7Dfunction%20g(a)%7Bvar%20b=%22%22,e=%22%22,f=%22%22,g=%22%22,h=%22%22,i=%22%22,j=%22%22,k=%5B%5D,m=null,o=null,p=null,q=null,r=%7B%7D;if(a)%7Bfor(g%20in%20a.types)l.type(a.types%5Bg%5D);for(h%20in%20a.schemas)l.schema(a.schemas%5Bh%5D);for(i%20in%20a.models)l.model(a.models%5Bi%5D);l.create();for(j%20in%20a.behaviors)c.RuntimeBehavior.insert(a.behaviors%5Bj%5D);for(e%20in%20a.components)for(f%20in%20a.components%5Be%5D)c%5Be%5D.insert(a.components%5Be%5D%5Bf%5D);k=c.RuntimeSystem.find(%7Bmaster:!0%7D),k.length&&(k%5B0%5D._id===a._id?a.master=!0:a.master=!1),c.RuntimeSystem.insert(a),b=a._id%7Delse%20if(k=c.RuntimeSystem.find(%7Bmaster:!0%7D),k.length)%7Bp=k%5B0%5D,m=p._id,r._id=m,r.name=p.name,r.description=p.description,r.version=p.version,o=d();for(e%20in%20o)o.hasOwnProperty(e)&&(r%5Be%5D=o%5Be%5D);for(j%20in%20r.behaviors)q=r.behaviors%5Bj%5D,%22main%22===q.state&&(q.component=m);b=JSON.stringify(r)%7Delse%20b=%22%7B%7D%22,n.masterSystemNotFound();return%20b%7Dfunction%20h(a)%7Bvar%20b=%7B%7D,d=%5B%5D,e=%22%22,f=0,g=0,h=null,i=null,j=null,k=null,l=null,m=%22%22;if(d=c.RuntimeSystem.find(%7Bmaster:!0%7D),d.length&&(e=d%5B0%5D.name),b.name=a.name%7C%7C%22sub_%22+e,b.version=a.version%7C%7C%220.0.1%22,b.description=a.description%7C%7C%22%22,b.subsystem=!0,b.schemas=%7B%7D,a.schemas)for(d=c.RuntimeSchema.find(a.schema),g=d.length,f=0;g%3Ef;f++)h=d%5Bf%5D,h._core%7C%7C(b.schemas%5Bh._id%5D=h);if(b.models=%7B%7D,a.models)for(d=c.RuntimeModel.find(a.models),g=d.length,f=0;g%3Ef;f++)j=d%5Bf%5D,j._core%7C%7C(b.models%5Bj._id%5D=j);if(b.types=%7B%7D,a.types)for(d=c.RuntimeType.find(a.types),g=d.length,f=0;g%3Ef;f++)i=d%5Bf%5D,i._core%7C%7C(b.types%5Bi._id%5D=i);if(b.behaviors=%7B%7D,a.behaviors)for(k=c.RuntimeBehavior.find(a.behaviors),g=d.length,f=0;g%3Ef;f++)k=d%5Bf%5D,k.core%7C%7C(b.behaviors%5Bk._id%5D=k);if(b.components=%7B%7D,a.components)for(m%20in%20a.components)if(c%5Bm%5D)for(b.components%5Bm%5D=%7B%7D,d=c%5Bm%5D.find(a.components%5Bm%5D),g=d.length,f=0;g%3Ef;f++)l=d%5Bf%5D,b.components%5Bm%5D%5Bl._id%5D=l;return%20JSON.stringify(b)%7Dfunction%20i()%7Bvar%20a=0,b=0,d=%22%22;for(a=s.length,b=0;a%3Eb;b++)d=s%5Bb%5D,c%5Bd%5D.remove();for(a=t.length,b=0;a%3Eb;b++)d=t%5Bb%5D,c%5Bd%5D.remove()%7Dfunction%20j()%7Bvar%20a=%22%22,b=null;b=c.RuntimeSystem.find(%7B_id:%22e89c617b6b15d24%22%7D)%5B0%5D,c.clear(),k.clear(),l.clear(),p.clear(),o.clear(),l.init(),a=c.system(b),k.get(a).main()%7Dvar%20k=a(%22./component.js%22),l=a(%22./metamodel.js%22),m=a(%22./helper.js%22),n=a(%22./log.js%22),o=a(%22./behavior.js%22),p=a(%22./state.js%22),q=a(%22./workflow.js%22),r=%7B%7D,s=%5B%5D,t=%5B%22Runtime%22,%22RuntimeSchema%22,%22RuntimeModel%22,%22RuntimeGeneratedModel%22,%22RuntimeBehavior%22,%22RuntimeState%22,%22RuntimeType%22,%22RuntimeMetamodel%22,%22RuntimeDatabase%22,%22RuntimeSystem%22,%22RuntimeClassInfo%22,%22RuntimeMessage%22,%22RuntimeChannel%22,%22RuntimeLogger%22%5D,u=%5B%22RuntimeSchema%22,%22RuntimeLogger%22,%22RuntimeModel%22,%22RuntimeGeneratedModel%22,%22RuntimeState%22,%22RuntimeType%22%5D,v=function(a)%7Bl.getSchema(a)%7C%7C-1!==t.indexOf(a)?(r%5Ba%5D=%7B%7D,this.name=a,-1===t.indexOf(a)&&s.push(a)):n.invalidCollectionName(a)%7D;v.prototype.find=function(a)%7Bvar%20b=%5B%5D,c=%22%22,d=%7B%7D;if(a=a%7C%7Cnull,a&&Object.keys(a).length)if(Array.isArray(a))a.forEach(function(a)%7Bfor(c%20in%20r%5Bthis.name%5D)d=r%5Bthis.name%5D%5Bc%5D,e(a,d)&&b.push(d)%7D.bind(this));else%20for(c%20in%20r%5Bthis.name%5D)d=r%5Bthis.name%5D%5Bc%5D,e(a,d)&&b.push(d);else%20for(c%20in%20r%5Bthis.name%5D)d=r%5Bthis.name%5D%5Bc%5D,b.push(d);return%20b%7D,v.prototype.insert=function(a)%7Bvar%20b=%5B%5D,d=null,e=%5B%5D;return%20Array.isArray(a)?b=a:b.push(a),b.forEach(function(a)%7Bvar%20b=null,f=%5B%5D,g=null,h=%5B%5D;switch(!0)%7Bcase%22RuntimeSchema%22===this.name:case%22RuntimeLogger%22===this.name:case%22RuntimeModel%22===this.name:case%22RuntimeType%22===this.name:case%22RuntimeGeneratedModel%22===this.name:case%20l.isValidObject(a,l.getModel(this.name)):if(%22undefined%22==typeof%20a._id&&(a._id=m.generateId()),r%5Bthis.name%5D%5Ba._id%5D=a,d=k.get(this.name),d?(b=new%20d(a),e.push(b.id())):m.isRuntime()&&m.getRuntime().require(%22db%22)&&m.getRuntime().require(%22db%22).insert(this.name,a),%22RuntimeMessage%22===this.name&&m.isRuntime()&&(h=c.RuntimeSystem.find(%7Bmaster:!0%7D),!h.length%7C%7Ch.length&&h%5B0%5D._id!==a.from))%7Bf=c.RuntimeChannel.find(%7B%7D);for(var%20i=f.length,j=0;i%3Ej;j++)g=m.getRuntime().require(f%5Bj%5D._id),q.state(%7Bcomponent:f%5Bj%5D._id,state:a.event,data:a.data%7D)%7Dbreak;default:n.invalidDocumentOnDbInsert(a,this.name)%7D%7D.bind(this)),e%7D,v.prototype.update=function(a,b,c)%7Bvar%20d=this.find(a),e=0,f=0,g=d.length,h=%22%22,i=l.getModel(this.name),j=%22%22;if(c=c%7C%7C%7B%7D,%22undefined%22==typeof%20c.upsert&&(c.upsert=c.upsert%7C%7C!1),b)for(0===g&&c.upsert&&(a._id&&(b._id=a._id),this.insert(b),e+=1),f=0;g%3Ef;f++)%7B%22undefined%22!=typeof%20b._id&&b._id!==d%5Bf%5D._id&&n.updateUuid(d%5Bf%5D._id,b._id,%22undefined%22!=typeof%20k.get(b._id));for(h%20in%20b)%22undefined%22!=typeof%20d%5Bf%5D%5Bh%5D&&(%22RuntimeSchema%22!==this.name&&%22RuntimeModel%22!==this.name&&%22RuntimeGeneratedModel%22!==this.name?(j=%22%22,0!==h.indexOf(%22_%22)?j=i%5Bh%5D.type:l.getMetaDef()%5Bh%5D&&(j=l.getMetaDef()%5Bh%5D.type),j?l.isValidType(b%5Bh%5D,j)?(d%5Bf%5D%5Bh%5D=b%5Bh%5D,e+=1,m.isRuntime()&&m.getRuntime().require(%22db%22)&&m.getRuntime().require(%22db%22).update(this.name,d%5Bf%5D._id,h,b%5Bh%5D),q.state(%7Bcomponent:d%5Bf%5D._id,state:h,data:%5Bb%5Bh%5D%5D%7D),q.state(%7Bcomponent:this.name,state:h,data:%5Bb%5Bh%5D%5D%7D)):n.invalidPropertyTypeOnDbUpdate(this.name,d%5Bf%5D._id,h,b%5Bh%5D,i%5Bh%5D):n.unknownPropertyOnDbUpdate(h,d%5Bf%5D._id)):(d%5Bf%5D%5Bh%5D=b%5Bh%5D,e+=1,m.isRuntime()&&m.getRuntime().require(%22db%22)&&m.getRuntime().require(%22db%22).update(this.name,d%5Bf%5D._id,h,b%5Bh%5D)))%7Dreturn%20e%7D,v.prototype.remove=function(a)%7Bvar%20b=%5B%5D,c=%22%22,d=null,f=%7B%7D;if(a=a%7C%7Cnull,a&&Object.keys(a).length)if(Array.isArray(a))a.forEach(function(a)%7Bfor(c%20in%20r%5Bthis.name%5D)f=r%5Bthis.name%5D%5Bc%5D,e(a,f)&&(delete%20r%5Bthis.name%5D%5Bc%5D,d=k.get(c),d&&d.destroy(),m.isRuntime()&&m.getRuntime().require(%22db%22)&&m.getRuntime().require(%22db%22).remove(this.name,c),b.push(c))%7D.bind(this));else%20for(c%20in%20r%5Bthis.name%5D)f=r%5Bthis.name%5D%5Bc%5D,e(a,f)&&(delete%20r%5Bthis.name%5D%5Bc%5D,d=k.get(c),d&&d.destroy(),m.isRuntime()&&m.getRuntime().require(%22db%22)&&m.getRuntime().require(%22db%22).remove(this.name,c),b.push(c));else%20for(c%20in%20r%5Bthis.name%5D)delete%20r%5Bthis.name%5D%5Bc%5D,-1==u.indexOf(this.name)&&(d=k.get(c),d&&d.destroy()),m.isRuntime()&&m.getRuntime().require(%22db%22)&&m.getRuntime().require(%22db%22).remove(this.name,c),b.push(c);return%20b%7D,v.prototype.count=function()%7Bvar%20a=0,b=%22%22;for(b%20in%20r%5Bthis.name%5D)a++;return%20a%7D,c.collection=f,c.store=r,c.system=g,c.subsystem=h,c.clear=i,c.init=j%7D,%7B%22./behavior.js%22:2,%22./component.js%22:3,%22./helper.js%22:5,%22./log.js%22:6,%22./metamodel.js%22:7,%22./state.js%22:9,%22./workflow.js%22:10%7D%5D,5:%5Bfunction(a,b,c)%7B%22use%20strict%22;function%20d()%7Bvar%20a=!1;return%20h.Runtime&&h.Runtime.find().length&&(a=!0),a%7Dfunction%20e()%7Bvar%20a=%22%22;return%20j%7C%7C(a=h.Runtime.find()%5B0%5D._id,j=i.get(a)),j%7Dfunction%20f()%7Bfunction%20a()%7Breturn%20Math.floor(65536*(1+Math.random())).toString(16)%7Dreturn%20a()+a()+a()%7Dfunction%20g()%7Bvoid%200===Function.prototype.name&&void%200!==Object.defineProperty&&Object.defineProperty(Function.prototype,%22name%22,%7Bget:function()%7Bvar%20a=/function%5Cs(%5B%5E(%5D%7B1,%7D)%5C(/,b=a.exec(this.toString());return%20b&&b.length%3E1?b%5B1%5D.trim():%22%22%7D,set:function(a)%7B%7D%7D)%7Dvar%20h=a(%22./db.js%22),i=a(%22./component.js%22),j=null;c.getRuntime=e,c.isRuntime=d,c.generateId=f,c.polyfill=g%7D,%7B%22./component.js%22:3,%22./db.js%22:4%7D%5D,6:%5Bfunction(a,b,c)%7B%22use%20strict%22;function%20d()%7Bvar%20a=%22%22,b=%5B%5D,c=null;return%20ha.getModel(%22RuntimeLogger%22)?(b=ia.RuntimeLogger.find(),b.length?(a=b%5B0%5D%5Bka%5D,ja.get(a)?(ma=ja.get(a),c=ma):c=na):c=na):c=na,c%7Dfunction%20e(a)%7Bla=a%7Dfunction%20f(a,b)%7Bvar%20c=%22%22;c=b%5Bka%5D?%22unknown%20property%20'%22+a+%22'%20for%20the%20definition%20of%20%22+b%5Bka%5D:%22unknown%20property%20'%22+a+%22'%20for%20a%20model%22,d().warn(c)%7Dfunction%20g(a,b,c)%7Bd().warn(%22invalid%20type%20for%20property%20'%22+a+%22':%20expected%20type%20'%22+b+%22'%20instead%20of%20type%20'%22+typeof%20c+%22'%22)%7Dfunction%20h(a,b)%7Bd().warn(%22'%22+a+%22'%20is%20an%20invalid%20value%20for%20the%20type%20enum%20'%22+b+%22'%22)%7Dfunction%20i(a,b,c)%7Bd().warn(%22invalid%20class%20name%20for%20component%20'%22+a+%22':%20expected%20'%22+b+%22'%20instead%20of%20'%22+c+%22'%22)%7Dfunction%20j(a)%7Bd().warn(%22missing%20property%20'%22+a+%22'%22)%7Dfunction%20k(a,b)%7Bd().warn(%22class%20'%22+a+%22'%20is%20missing%20for%20the%20implementation%20of%20the%20class%20'%22+b+%22'%22)%7Dfunction%20l(a,b)%7Bga.stop(%7Berror:!1,message:%22the%20property%20'%22+a+%22'%20of%20the%20model%20'%22+b+%22'%20is%20invalid%22%7D)%7Dfunction%20m(a,b)%7Bd().warn(%22missing%20property%20'%22+a+%22'%20for%20the%20definition%20of%20'%22+b+%22'%22)%7Dfunction%20n(a,b)%7Bga.stop(%7Berror:!1,message:%22the%20model%20'%22+b+%22'%20has%20an%20unknown%20property%20'%22+a+%22'%22%7D)%7Dfunction%20o(a)%7Bd().warn(%22the%20type%20'%22+a+%22'%20is%20not%20valid%22)%7Dfunction%20p(a,b,c,e)%7B%22string%22==typeof%20e?d().warn(%22invalid%20type%20for%20property%20'%22+b+%22'%20on%20component%20'%22+a+%22':%20expected%20'%22+e+%22'%20instead%20of%20'%22+typeof%20c+%22'%20on%20component%20'%22+a+%22'%22):d().warn(%22invalid%20type%20for%20property%20type%20'%22+b+%22'%20on%20component%20'%22+a+%22':%20expected%20'string'%20instead%20of%20'%22+typeof%20e+%22'%20on%20component%20'%22+a+%22'%22)%7Dfunction%20q(a,b)%7Bd().warn(%22can%20not%20set%20read-only%20property%20'%22+b+%22'%20on%20component%20'%22+a+%22'%22)%7Dfunction%20r(a,b)%7Bd().warn(%22invalid%20document%20'%22+JSON.stringify(a)+%22'%20on%20an%20insert%20operation%20on%20collection%20'%22+b+%22'%22)%7Dfunction%20s(a,b,c,e,f)%7B-1!==f.indexOf(%22#%22)?d().warn(%22invalid%20type%20for%20property%20'%22+c+%22'%20on%20an%20update%20operation%20on%20collection%20'%22+a+%22':%20expected%20'%22+f+%22'%20instead%20of%20'%22+e+%22'%20on%20component%20'%22+b+%22'%22):d().warn(%22invalid%20type%20for%20property%20'%22+c+%22'%20on%20an%20update%20operation%20on%20collection%20'%22+a+%22':%20expected%20'%22+f+%22'%20instead%20of%20'%22+typeof%20e+%22'%20on%20component%20'%22+b+%22'%22)%7Dfunction%20t(a,b)%7Bd().warn(%22unknown%20property%20'%22+a+%22'%20on%20an%20update%20operation%20on%20component%20'%22+b+%22'%22)%7Dfunction%20u(a,b)%7Bd().warn(%22try%20to%20call%20an%20unknown%20method%20'%22+b+%22'%20for%20the%20class%20'%22+a+%22'%22)%7Dfunction%20v(a)%7Bd().warn(%22invalid%20name%20for%20creating%20the%20collection%20'%22+a+%22':%20there%20is%20no%20schema%20'%22+a+%22'%20in%20the%20metamodel%22)%7Dfunction%20w(a,b,c,e)%7Be?d().warn(%22invalid%20type%20for%20the%20result%20of%20method%20'%22+b+%22'%20on%20component%20'%22+a+%22':%20expected%20type%20'%22+c+%22'%20instead%20of%20type%20'%22+e+%22'%22):d().warn(%22invalid%20type%20for%20the%20result%20of%20method%20'%22+b+%22'%20on%20component%20'%22+a+%22':%20expected%20type%20'%22+c+%22'%22)%7Dfunction%20x(a,b)%7Bd().warn(%22unkown%20class%20component%20'%22+a+%22'%20for%20component%20'%22+b+%22'%22)%7Dfunction%20y()%7Bd().warn(%22runtime%20has%20been%20restarted%22)%7Dfunction%20z(a,b)%7Bd().warn(%22invalid%20number%20of%20parameters%20when%20calling%20the%20method%20'%22+b+%22'%20on%20component%20'%22+a+%22'%22)%7Dfunction%20A(a,b,c)%7Bd().warn(%22invalid%20type%20for%20the%20parameter%20'%22+c+%22'%20when%20calling%20the%20method%20'%22+b+%22'%20on%20component%20'%22+a+%22'%22)%7Dfunction%20B(a,b)%7Bd().warn(%22try%20to%20add%20more%20than%20one%20behavior%20for%20the%20state%20'%22+b+%22'%20on%20component%20class%20'%22+a+%22'%22)%7Dfunction%20C(a,b)%7Bd().warn(%22try%20to%20add%20a%20behavior%20with%20an%20unkwown%20state%20'%22+b+%22'%20on%20component%20class%20'%22+a+%22'%22)%7Dfunction%20D(a,b)%7Bd().warn(%22try%20to%20remove%20a%20behavior%20from%20an%20unkwown%20state%20'%22+b+%22'%20on%20component%20class%20'%22+a+%22'%22)%7Dfunction%20E()%7Bd().warn(%22can%20not%20export%20the%20database%20because%20no%20system%20was%20defined%22)%7Dfunction%20F(a,b)%7Bd().warn(%22invalid%20type%20for%20value%20'%22+JSON.stringify(a)+%22':%20expected%20'%22+b+%22'%22)%7Dfunction%20G(a)%7Bd().warn(%22unknown%20type%20for%20value%20'%22+JSON.stringify(a)+%22'%22)%7Dfunction%20H(a,b)%7Bd().warn(%22can%20not%20yet%20validate%20if%20the%20component%20'%22+a+%22'%20is%20an%20instance%20of%20'%22+b+%22'%22)%7Dfunction%20I(a,b,c)%7Bd().warn(%22invalid%20type%20for%20the%20message%20'%22+JSON.stringify(a)+%22':%20expected%20type%20'%22+c+%22'%20for%20event%20'%22+b+%22'%22)%7Dfunction%20J(a,b)%7Bd().warn(%22invalid%20number%20of%20parameters%20when%20adding%20an%20action%20on%20method%20'%22+b+%22'%20on%20component%20'%22+a+%22'%22)%7Dfunction%20K(a,b,c)%7Bc?d().warn(%22try%20to%20update%20a%20component%20of%20id%20'%22+a+%22'%20with%20the%20new%20id%20'%22+b+%22'%20that%20is%20already%20used%22):d().warn(%22try%20to%20update%20a%20component%20of%20id%20'%22+a+%22'%20with%20the%20new%20id%20'%22+b+%22'%22)%7Dfunction%20L(a)%7Bd().warn(%22try%20to%20change%20the%20state%20of%20the%20destroyed%20component%20'%22+a+%22'%22)%7Dfunction%20M(a)%7Bd().warn(%22the%20schema%20'%22+a+%22'%20is%20not%20valid%22)%7Dfunction%20N(a)%7Bd().warn(%22the%20model%20'%22+a+%22'%20is%20not%20valid%22)%7Dfunction%20O(a)%7Bd().warn(%22the%20parameters%20for%20creating%20a%20component%20of%20class%20'%22+a+%22'%20are%20not%20compliant%20with%20the%20model%22)%7Dfunction%20P(a,b)%7Bd().warn(%22trying%20to%20get%20the%20property%20'%22+a+%22'%20on%20the%20destroyed%20component%20'%22+b+%22'%22)%7Dfunction%20Q(a,b)%7Bd().warn(%22the%20constructor%20parameter%20'%22+JSON.stringify(a)+%22'%20for%20creating%20a%20component%20of%20class%20'%22+b+%22'%20is%20not%20an%20object%22)%7Dfunction%20R(a)%7Bd().warn(%22try%20get%20the%20information%20of%20an%20unknown%20model%20'%22+a+%22'%22)%7Dfunction%20S(a)%7Bd().warn(%22the%20schema%20'%22+a+%22'%20is%20missing%22)%7Dfunction%20T(a)%7Ba?ga.stop(%7Berror:!1,message:%22a%20cyclic%20inheritance%20dependency%20with%20%E2%80%99%22+a+%22%E2%80%99%20schema%20has%20been%20found,%20please%20check%20the%20'_inherit'%20properties%20of%20your%20schemas%22%7D):ga.stop(%7Berror:!1,message:%22a%20cyclic%20inheritance%20dependency%20has%20been%20found,%20please%20check%20the%20'_inherit'%20properties%20of%20your%20schemas%22%7D)%7Dfunction%20U(a,b,c)%7Bd().warn(%22invalid%20type%20for%20enumerated%20type%20'%22+b+%22':%20expected%20type%20'%22+c+%22'%20instead%20of%20type%20'%22+typeof%20a+%22'%22)%7Dfunction%20V(a)%7Bd().info(%22load%20schema%20'%22+a+%22'%22)%7Dfunction%20W(a)%7Bd().info(%22load%20model%20'%22+a+%22'%22)%7Dfunction%20X(a)%7Bd().info(%22load%20type%20'%22+a+%22'%22)%7Dfunction%20Y(a)%7Bd().info(%22compile%20schema%20'%22+a+%22'...%22)%7Dfunction%20Z(a)%7Bd().info(%22generate%20model%20'%22+a+%22'...%22)%7Dfunction%20$(a)%7Bd().info(%22analyze%20model%20'%22+a+%22'...%22)%7Dfunction%20_(a)%7Bd().info(%22create%20collection%20'%22+a+%22'%22)%7Dfunction%20aa(a)%7Bd().info(%22create%20class%20'%22+a+%22'%22)%7Dfunction%20ba()%7Bd().info(%22starting%20model%20creation...%22)%7Dfunction%20ca()%7Bd().info(%22model%20creation%20ended%22)%7Dfunction%20da(a,b,c)%7Bd().error(%22error%20when%20trying%20to%20call%20the%20method%20'%22+a+%22'%20on%20component%20'%22+b+%22':%20%22+c)%7Dfunction%20ea(a,b)%7Bd().warn(%22invalid%20property%20'%22+b+%22'%20for%20schema%20'%22+a+%22':%20only%20'property',%20'link',%20'collection',%20'method'%20and%20'event'%20are%20allowed.%22)%7Dfunction%20fa(a)%7Bd().warn(%22invalid%20format%20for%20a%20definition%20of%20a%20property':%20'%22+a+%22'%20is%20not%20an%20object%22)%7Dvar%20ga=(a(%22./helper.js%22),a(%22./workflow.js%22)),ha=a(%22./metamodel.js%22),ia=a(%22./db.js%22),ja=a(%22./component.js%22),ka=%22_id%22,la=%22warn%22,ma=null,na=%7Binfo:function(a)%7B%22info%22===la&&console.info(%22runtime:%20%22+a)%7D,warn:function(a)%7B%22info%22!==la&&%22warn%22!==la%7C%7Cconsole.warn(%22runtime:%20%22+a)%7D,error:function(a)%7Bconsole.error(%22runtime:%20%22+a)%7D%7D;c.level=e,c.unknownProperty=f,c.invalidPropertyType=g,c.invalidEnumValue=h,c.invalidClassName=i,c.missingProperty=j,c.missingImplementation=k,c.invalidTypeImp=l,c.missingPropertyImp=m,c.unknownPropertyImp=n,c.invalidTypeDefinition=o,c.invalidPropertyName=p,c.readOnlyProperty=q,c.invalidDocumentOnDbInsert=r,c.invalidPropertyTypeOnDbUpdate=s,c.unknownMethod=u,c.invalidCollectionName=v,c.invalidResultType=w,c.unknownComponent=x,c.workflowRestarted=y,c.invalidParamNumber=z,c.invalidParamType=A,c.behaviorNotUnique=B,c.invalidStateOn=C,c.invalidStateOff=D,c.masterSystemNotFound=E,c.invalidType=F,c.unknownType=G,c.canNotYetValidate=H,c.invalidChannelEvent=I,c.invalidParamNumberMethodOn=J,c.updateUuid=K,c.unknownPropertyOnDbUpdate=t,c.invalidUseOfComponent=L,c.invalidSchema=M,c.invalidModel=N,c.invalidParameters=O,c.destroyedComponentCall=P,c.invalidConctructorParameters=Q,c.unknownModel=R,c.missingSchema=S,c.cyclicDependency=T,c.invalidEnumType=U,c.loadSchema=V,c.loadModel=W,c.loadType=X,c.compileSchema=Y,c.generateModel=Z,c.checkModel=$,c.createCollection=_,c.createClass=aa,c.modelCreationBegin=ba,c.modelCreationEnd=ca,c.actionInvokeError=da,c.invalidSchemaProperty=ea,c.invalidPropertyFormat=fa%7D,%7B%22./component.js%22:3,%22./db.js%22:4,%22./helper.js%22:5,%22./metamodel.js%22:7,%22./workflow.js%22:10%7D%5D,7:%5Bfunction(a,b,c)%7B%22use%20strict%22;function%20d()%7Bvar%20a=%22%22,b=%22%22,c=%22%22,d=%7B%7D,e=%22%22,f=null,g=null,h=null,i=%7B%7D,j=%7B%7D,k=%5B%5D,l=0,m=0;for(c%20in%20ma.compiledSchemas)%7Bd=ma.compiledSchemas%5Bc%5D,i=%7B_name:d._name,_schema:d._name%7D,%22undefined%22!=typeof%20d._core&&(i._core=d._core),Array.isArray(d._inherit)&&(i._inherit=d._inherit),%22undefined%22!=typeof%20d._class&&(i._class=d._class),%22undefined%22!=typeof%20d._description&&(i._description=d._description);for(a%20in%20d)switch(!0)%7Bcase%22property%22===d%5Ba%5D:i%5Ba%5D=%7Btype:%22any%22,readOnly:!1,mandatory:!1,%22default%22:void%200,description:a,label:a%7D;break;case%22link%22===d%5Ba%5D:i%5Ba%5D=%7Btype:%22@RuntimeComponent%22,readOnly:!1,mandatory:!1,%22default%22:%7B%7D,description:a,label:a%7D;break;case%22method%22===d%5Ba%5D:i%5Ba%5D=%7Bparams:%5B%7Bname:%22param%22,type:%22any%22,mandatory:!1%7D%5D,result:%22any%22,description:a%7D;break;case%22event%22===d%5Ba%5D:i%5Ba%5D=%7Bparams:%5B%7Bname:%22param%22,type:%22any%22,mandatory:!1%7D%5D,description:a%7D;break;case%22collection%22===d%5Ba%5D:i%5Ba%5D=%7Btype:%5B%22@RuntimeComponent%22%5D,readOnly:!1,mandatory:!1,%22default%22:%5B%5D,description:a,label:a%7D;break;default:0!==a.indexOf(%22_%22)&&X.invalidSchemaProperty(d._name,a)%7Dma.generatedModels%5Bi._name%5D=i%7Dfor(e%20in%20ma.generatedModels)i=ma.generatedModels%5Be%5D,b=i%5B_%5D,g=ma.models%5Bb%5D,g&&(j=z(g,i),delete%20j._id,ma.generatedModels%5Bb%5D=j);for(e%20in%20ma.generatedModels)%7Bi=ma.generatedModels%5Be%5D,k=U(e),k.reverse();JSON.parse(JSON.stringify(i));for(l=k.length,m=0;l%3Em;m++)b=k%5Bm%5D,f=ma.generatedModels%5Bb%5D,f&&(j=z(f,i),delete%20j._id,ma.generatedModels%5Be%5D=j);g=ma.models%5Be%5D,g&&(j=z(g,ma.generatedModels%5Be%5D),delete%20j._id,ma.generatedModels%5Be%5D=j)%7Dfor(e%20in%20ma.generatedModels)h=ma.generatedModels%5Be%5D,W.RuntimeGeneratedModel.insert(h),h._core%7C%7CX.generateModel(e)%7Dfunction%20e()%7Bvar%20a=%5B%5D,b=%5B%5D,c=null,d=%7B%7D,e=%5B%5D,f=null,g=%22%22,h=%22%22,i=0,j=0;for(ma.inheritance=%7B%7D,ma.inheritanceTree=%7B%7D,ma.schemas=%7B%7D,ma.compiledSchemas=%7B%7D,ma.models=%7B%7D,ma.generatedModels=%7B%7D,ma.states=%7B%7D,ma.type=%7B%7D,a=W.RuntimeSchema.find(%7B%7D),j=a.length,i=0;j%3Ei;i++)c=a%5Bi%5D,g=c%5B_%5D,h=c%5Bba%5D,ma.schemas%5Bg%5D=c,h&&(ma.inheritance%5Bg%5D=h),c._core%7C%7CX.loadSchema(g);for(e=W.RuntimeModel.find(%7B%7D),j=e.length,i=0;j%3Ei;i++)d=e%5Bi%5D,g=d%5B_%5D,ma.models%5Bg%5D=d,d._core%7C%7CX.loadModel(g);for(b=W.RuntimeType.find(%7B%7D),j=b.length,i=0;j%3Ei;i++)f=b%5Bi%5D,ma.type%5Bf.name%5D=f,f.core%7C%7CX.loadType(f.name)%7Dfunction%20f()%7Bfunction%20a(a)%7Bvar%20b=0,c=0,d=!0;for(c=a.length,b=0;c%3Eb;b++)a%5Bb%5D.length&&(d=!1);return%20d%7Dfunction%20b(a,b)%7Bvar%20c=0,d=0,e=%5B%5D;for(d=b.length,c=0;d%3Ec;c++)0===b%5Bc%5D.indexOf(a)&&(e=b%5Bc%5D,e.reverse(),e.pop(),e.reverse(),b%5Bc%5D=e)%7Dfunction%20c(a,b)%7Bvar%20c=!0,d=0,e=0;for(e=b.length,d=0;e%3Ed;d++)b%5Bd%5D.indexOf(a)%3E0&&(c=!1);return%20c%7Dfunction%20d(a)%7Bvar%20d=0,e=0,f=%5B%5D;for(e=a.length,d=0;e%3Ed;d++)if(c(a%5Bd%5D%5B0%5D,a))%7Bf.push(a%5Bd%5D%5B0%5D),b(a%5Bd%5D%5B0%5D,a);break%7Dreturn%20f%7Dfunction%20e(b)%7Bvar%20c=%5B%5D,e=%5B%5D;for(e=d(b);void%200!==e%5B0%5D;)c=c.concat(e),e=d(b);return%20a(b)%7C%7CX.cyclicDependency(),c%7Dfunction%20f(a)%7Bfunction%20b(a,b)%7Bvar%20c=!1;return%20Array.isArray(ma.inheritance%5Bb%5D)&&-1!==ma.inheritance%5Bb%5D.indexOf(a)&&(X.cyclicDependency(a),c=!0),c%7Dvar%20c=%5B%5D,d=%5B%5D,g=0,h=0;for(Array.isArray(ma.inheritance%5Ba%5D)?d=ma.inheritance%5Ba%5D.slice():X.missingSchema(a),h=d.length,g=0;h%3Eg;g++)if(b(a,d%5Bg%5D))%7Bd=%5B%5D;break%7Dreturn%20c=d.length?%5Ba%5D.concat(e(d.map(f).concat(%5Bd%5D))):%5Ba%5D%7Dvar%20g=%22%22,h=%5B%5D,i=%5B%5D;for(g%20in%20ma.inheritance)h=f(g),i=h.reverse(),i.pop(),i.length&&(ma.inheritanceTree%5Bg%5D=i)%7Dfunction%20g(a)%7Bvar%20b=%7B%7D,c=ma.schemas%5Ba%5D,d=ma.inheritanceTree%5Ba%5D,e=0,f=0,g=null,h=%22%22;for(d&&(e=d.length,d.reverse()),f=0;e%3Ef;f++)%7Bg=ma.schemas%5Bd%5Bf%5D%5D;for(h%20in%20g)0!==h.indexOf(%22_%22)&&(b%5Bh%5D=g%5Bh%5D)%7Dfor(h%20in%20c)b%5Bh%5D=c%5Bh%5D;return%20b%7Dfunction%20h()%7Bvar%20a=%22%22;for(a%20in%20ma.schemas)ma.schemas%5Ba%5D._core%7C%7CX.compileSchema(a),ma.compiledSchemas%5Ba%5D=g(a)%7Dfunction%20i()%7Bvar%20a=%22%22,b=null,c=%22%22;for(a%20in%20ma.generatedModels)b=ma.generatedModels%5Ba%5D,b&&%22undefined%22!=typeof%20b%5Bca%5D&&(c=ma.compiledSchemas%5Bb%5Bca%5D%5D,c?(b._core%7C%7CX.checkModel(b._name),k(b,c)):X.missingImplementation(b%5Bca%5D,b%5B_%5D))%7Dfunction%20j()%7Bvar%20a=%22%22,b=null,c=%22%22,d=%5B%5D,e=%22%22;for(a%20in%20ma.compiledSchemas)%7Bif(d=%5B%5D,b=ma.compiledSchemas%5Ba%5D,b&&%22undefined%22==typeof%20b%5Bca%5D)for(e%20in%20b)c=b%5Be%5D,0!==e.indexOf(%22_%22)&&-1!==ka.indexOf(c)&&d.push(e);ma.states%5Ba%5D=d%7D%7Dfunction%20k(a,b)%7Bvar%20c=%22%22,d=null;for(c%20in%20b)c!==$&&c!==_&&c!==aa&&c!==ba&&c!==ca&&c!==da&&c!==ea&&(%22undefined%22!=typeof%20a%5Bc%5D?(d=a%5Bc%5D,l(d,b%5Bc%5D)%7C%7CX.invalidTypeImp(c,a%5B_%5D)):X.missingPropertyImp(c,a%5B_%5D));for(c%20in%20a)c!==$&&c!==_&&c!==aa&&c!==ba&&c!==ca&&c!==da&&c!==ea&&%22undefined%22==typeof%20b%5Bc%5D&&X.unknownPropertyImp(c,a%5B_%5D)%7Dfunction%20l(a,b)%7Bvar%20c=!0;return%20c=x(b,%22string%22)&&-1!==la.indexOf(b)?x(a,b):m(a,b)%7Dfunction%20m(a,b)%7Bvar%20c=!0,d=ma.type%5Bb%5D,e=0,f=0;if(x(d,%22undefined%22))c=!1;else%20if(x(a,%22undefined%22))c=!1;else%20if(%22array%22===d.type)for(e=a.length,f=0;e%3Ef&&(c=x(d.schema,%22undefined%22)?M(a%5Bf%5D,d.type):O(a%5Bf%5D,d.schema),c!==!1);f++);else%20c=x(d.schema,%22undefined%22)?M(a,d.type):O(a,d.schema);return%20c%7Dfunction%20n()%7BW.collection(%22RuntimeLogger%22),W.collection(%22RuntimeSchema%22),W.collection(%22RuntimeModel%22),W.collection(%22RuntimeGeneratedModel%22),W.collection(%22RuntimeClassInfo%22),W.collection(%22RuntimeBehavior%22),W.collection(%22RuntimeState%22),W.collection(%22RuntimeType%22),W.collection(%22RuntimeMessage%22),W.collection(%22RuntimeChannel%22)%7Dfunction%20o()%7Bvar%20a=%22%22,b=%7B%7D;for(a%20in%20ma.generatedModels)b=ma.generatedModels%5Ba%5D,%22undefined%22!=typeof%20b%5Bca%5D&&%22undefined%22==typeof%20W%5Bb%5B_%5D%5D&&b%5Bda%5D!==!1&&(W.collection(b%5B_%5D),b._core%7C%7CX.createCollection(b%5B_%5D))%7Dfunction%20p()%7Bvar%20a=%22%22,b=%7B%7D;for(a%20in%20ma.generatedModels)b=ma.generatedModels%5Ba%5D,%22undefined%22!=typeof%20b%5Bca%5D&&b%5Bda%5D!==!1&&(Y.create(%7Bmodel:a%7D),b._core%7C%7CX.createClass(a))%7Dfunction%20q()%7Bvar%20a=%22%22,b=%7B%7D,c=%22%22;for(a%20in%20ma.generatedModels)b=ma.generatedModels%5Ba%5D,c=b%5B_%5D+%22Info%22,%22undefined%22!=typeof%20b%5Bca%5D&&b%5Bda%5D!==!1&&V(b%5B_%5D,%22RuntimeComponent%22)&&(Y.get(c)?W.RuntimeClassInfo.update(%7B_id:c%7D,%7B_id:c,metamodel:ma.compiledSchemas%5Bb%5Bca%5D%5D,model:b%7D):W.RuntimeClassInfo.insert(%7B_id:c,metamodel:ma.compiledSchemas%5Bb%5Bca%5D%5D,model:b%7D))%7Dfunction%20r(a)%7Breturn%20a.replace(%22@%22,%22%22)%7Dfunction%20s(a)%7Bvar%20b=x(a,%22string%22)&&-1===la.indexOf(a)&&!t(a);return%20b%7Dfunction%20t(a)%7Breturn-1!==a.indexOf(%22@%22)%7Dfunction%20u(a)%7Bvar%20b=%22%22;return%20b=Array.isArray(a)?%22array%22:typeof%20a,%22any%22===a&&(b=%22any%22),b%7Dfunction%20v(a)%7Breturn%20a.constructor.name%7Dfunction%20w(a,b)%7Breturn-1!==b.indexOf(a)%7Dfunction%20x(a,b)%7Bvar%20c=!0;switch(b)%7Bcase%22array%22:c=Array.isArray(a);break;case%22any%22:c=!0;break;default:c=b===typeof%20a%7Dreturn%20c%7Dfunction%20y(a,b,c)%7Bvar%20d=!1,e=ma.generatedModels%5Bb%5D,f=%22%22;return%20e&&e%5Bca%5D&&(e=ma.compiledSchemas%5Be%5Bca%5D%5D),e&&(f=e%5Ba%5D,f===c&&(d=!0)),d%7Dfunction%20z(a,b,c)%7Bvar%20d=%22%22,e=b;for(d%20in%20a)a.hasOwnProperty(d)&&0!==d.indexOf(%22_%22)&&(e%5Bd%5D=a%5Bd%5D);return%20e%7Dfunction%20A(a)%7Bvar%20b=null,c=%5B%5D,d=null,e=%22%22,f=%7B%7D,g=%5B%5D;return%20d=JSON.parse(JSON.stringify(a)),e=d%5B_%5D,%22undefined%22==typeof%20d%5B$%5D&&(d%5B$%5D=Z.generateId()),%22undefined%22==typeof%20d%5Bba%5D&&(d%5Bba%5D=%5B%22RuntimeComponent%22%5D),P(d,ma.metadef.schema,!1)?(g=W.RuntimeSchema.find(%7B_name:e%7D),g.length?(f=z(d,g%5B0%5D),delete%20f._id,W.RuntimeSchema.update(%7B_name:e%7D,f),b=g%5B0%5D._id):(c=W.RuntimeSchema.insert(d),b=c%5B0%5D)):X.invalidSchema(d%5B_%5D),b%7Dfunction%20B(a)%7Bvar%20b=null,c=null,d=%5B%5D,e=%22%22,f=%7B%7D,g=%5B%5D;return%20b=JSON.parse(JSON.stringify(a)),e=b%5B_%5D,%22undefined%22==typeof%20b%5B$%5D&&(b%5B$%5D=Z.generateId()),P(b,ma.metadef.model,!1)?(g=W.RuntimeModel.find(%7B_name:e%7D),g.length?(f=z(b,g%5B0%5D),delete%20f._id,W.RuntimeModel.update(%7B_name:e%7D,f),c=g%5B0%5D._id):(d=W.RuntimeModel.insert(b),c=d%5B0%5D)):X.invalidModel(b%5B_%5D),c%7Dfunction%20C(a)%7Bvar%20b=null,c=%5B%5D,d=a.name;return%20P(a,ma.metadef.type)?(c=W.RuntimeType.insert(a),b=c%5B0%5D):X.invalidTypeDefinition(d),b%7Dfunction%20D()%7BE(),ma.metadef=%7Bschema:%7B_id:%7Btype:%22string%22,mandatory:!0%7D,_name:%7Btype:%22string%22,mandatory:!0%7D,_inherit:%7Btype:%5B%22string%22%5D,mandatory:!1,%22default%22:%5B%22RuntimeComponent%22%5D%7D,_schema:%7Btype:%22string%22,mandatory:!1%7D,_class:%7Btype:%22boolean%22,mandatory:!1%7D,_core:%7Btype:%22boolean%22,mandatory:!1%7D,_description:%7Btype:%22string%22,mandatory:!1%7D%7D,model:%7B_id:%7Btype:%22string%22,mandatory:!0%7D,_name:%7Btype:%22string%22,mandatory:!0%7D,_inherit:%7Btype:%5B%22string%22%5D,mandatory:!1%7D,_schema:%7Btype:%22string%22,mandatory:!1%7D,_class:%7Btype:%22boolean%22,mandatory:!1%7D,_core:%7Btype:%22boolean%22,mandatory:!1%7D,_description:%7Btype:%22string%22,mandatory:!1%7D%7D,type:%7Bname:%7Btype:%22string%22,mandatory:!0%7D,type:%7Btype:%22string%22,mandatory:!0%7D,schema:%7Btype:%22object%22,mandatory:!1%7D,value:%7Btype:%5B%22string%22%5D,mandatory:!1%7D,core:%7Btype:%22boolean%22,mandatory:!1%7D,_description:%7Btype:%22string%22,mandatory:!1%7D%7D%7D,n()%7Dfunction%20E()%7Bma=%7Bmetadef:%7B%7D,inheritance:%7B%7D,inheritanceTree:%7B%7D,schemas:%7B%7D,compiledSchemas:%7B%7D,models:%7B%7D,generatedModels:%7B%7D,states:%7B%7D,type:%7B%7D%7D%7Dfunction%20F()%7Be(),f(),h(),d(),i(),j(),o(),p(),q()%7Dfunction%20G(a,b)%7Breturn%20y(a,b,ga)%7Dfunction%20H(a,b)%7Breturn%20y(a,b,ha)%7Dfunction%20I(a,b)%7Breturn%20y(a,b,ia)%7Dfunction%20J(a,b)%7B%0Areturn%20y(a,b,ja)%7Dfunction%20K(a,b)%7Breturn%20y(a,b,fa)%7Dfunction%20L(a,b)%7Bvar%20c=!1,d=ma.generatedModels%5Bb%5D,e=%7B%7D;return%20d&&d%5Bca%5D&&(d=ma.generatedModels%5Bd%5Bca%5D%5D),e=ma.states%5Bd%5B_%5D%5D,Array.isArray(e)&&(c=-1!==e.indexOf(a)),c%7Dfunction%20M(a,b)%7Bfunction%20c(a,b)%7Bvar%20c=ma.type%5Bb%5D,d=!0;return%20Array.isArray(c.value)&&-1===c.value.indexOf(a)&&(d=!1),d===!1&&X.invalidEnumValue(a,b),d%7Dfunction%20d(a,b)%7Bvar%20c=!0,d=r(b),e=a;return%20x(a,%22string%22)&&(e=Y.get(a)),v(e)!==d&&%22%7B%7D%22!==JSON.stringify(e)&&(c=!1,X.invalidType(a,b.replace(%22@%22,%22%22))),c%7Dfunction%20e(a,b)%7Bvar%20c=!0,e=%22%22,f=0,g=0;switch(e=u(b))%7Bcase%22string%22:c=x(a,b);break;case%22array%22:for(g=a.length,f=0;g%3Ef;f++)switch(!0)%7Bcase%20s(b%5B0%5D):c=m(a%5Bf%5D,b%5B0%5D);break;case%20t(b%5B0%5D):c=d(a%5Bf%5D,b%5B0%5D);break;default:c=x(a%5Bf%5D,b%5B0%5D)%7D%7Dreturn%20c%7Dvar%20f=!0;if(x(b,%22string%22))switch(!0)%7Bcase%20s(b):f=m(a,b),f%7C%7CX.invalidEnumType(a,b,ma.type%5Bb%5D.type),f&&(f=c(a,b));break;case%20t(b):f=d(a,b);break;default:f=e(a,b)%7Delse%20f=!1;return%20f%7Dfunction%20N(a,b)%7Bfunction%20c(a,b)%7Bvar%20c=!1,d=%22%22;return%20d=a.constructor.name,%22Function%22===d&&(d=a.name),c=d===b%7Dvar%20d=!0;return%20t(b.type)?(d=c(Y.get(a),r(b.type))&&-1!==b.value.indexOf(a),d%7C%7CX.invalidEnumValue(a,b.type)):(d=x(a,b.type)&&-1!==b.value.indexOf(a),d%7C%7CX.invalidEnumValue(a,b.type)),d%7Dfunction%20O(a,b)%7Bfunction%20c()%7Bvar%20b=!0,c=%5B%5D;return%20j=r(i),j=a%5Bj%5D,s(j)?ma.type%5Bj%5D?ma.type%5Bj%5D.schema?b=O(f,ma.type%5Bj%5D.schema):(b=x(f,ma.type%5Bj%5D.type),c=ma.type%5Bj%5D.value,c&&(b=w(f,c))):b=!1:b=%22array%22===j?Array.isArray(f):t(j)?x(f,%22object%22)%7C%7Cx(f,%22string%22):x(f,j),b%7C%7CX.invalidPropertyType(e,j,f),b%7Dfunction%20d()%7Bvar%20a=!0;switch(k=u(i))%7Bcase%22string%22:if(s(k))a=O(f,i);else%20if(!x(f,i))%7BX.invalidPropertyType(e,i,f),a=!1;break%7Dbreak;case%22array%22:for(l=f.length,m=0;l%3Em;m++)if(s(i%5B0%5D))a=O(f%5Bm%5D,ma.type%5Bi%5B0%5D%5D.schema);else%20if(!x(f%5Bm%5D,i%5B0%5D))%7BX.invalidPropertyType(f%5Bm%5D,i%5B0%5D,f%5Bm%5D),a=!1;break%7D%7Dreturn%20a%7Dvar%20e=%22%22,f=null,g=!0,h=!0,i=%22%22,j=%22%22,k=%22%22,l=0,m=0;if(x(a,%22object%22))%7Bfor(e%20in%20a)%7Bif(f=a%5Be%5D,x(b%5Be%5D,%22undefined%22))return%20X.unknownProperty(e,b),!1;switch(i=b%5Be%5D.type,!0)%7Bcase%20t(i):g=c();break;default:g=d()%7Dif(!g)break%7Dfor(e%20in%20b)if(f=b%5Be%5D,h=f.mandatory,h===!0&&x(a%5Be%5D,%22undefined%22)&&void%200!==a%5Be%5D)%7BX.missingProperty(e),g=!1;break%7D%7Delse%20g=!1,X.invalidPropertyFormat(a);return%20g%7Dfunction%20P(a,b,c,d)%7Bfunction%20e(a,b)%7Bvar%20c=!0,d=%22%22;if(d=ma.type%5Bb%5D)switch(!0)%7Bcase!x(d.schema,%22undefined%22):c=P(a,d.schema);break;case!x(d.value,%22undefined%22):c=N(a,d);break;default:c=M(a,d.type)%7Delse%20c=!1;return%20c%7Dfunction%20f(b,c)%7Bvar%20e=!0,f=null,g=!1;if(m=r(c),b&&b.id?(f=b,g=!0):f=Y.get(b),x(f,%22undefined%22))switch(!0)%7Bcase%20x(b,%22object%22)&&null!==b&&Object.keys(b).length%3E0:case%20x(b,%22string%22):X.canNotYetValidate(b,m)%7Delse%20V(f.constructor.name,m)?g&&d&&(a%5Bh%5D=f.id()):(e=!1,X.invalidType(b,m));return%20e%7Dfunction%20g(a,b)%7Bvar%20c=!0,e=%22%22;switch(n=u(b))%7Bcase%22any%22:break;case%22string%22:if(s(n))c=P(a,b);else%20if(%22array%22===b)%7Bif(%22array%22!==u(a))%7BX.invalidPropertyType(h,b,a),c=!1;break%7D%7Delse%20if(u(a)!==b)%7BX.invalidPropertyType(h,b,a),c=!1;break%7Dbreak;case%22array%22:if(Array.isArray(a))%7Bfor(o=a.length,e=b%5B0%5D,p=0;o%3Ep;p++)if(s(e))c=P(a%5Bp%5D,ma.type%5Be%5D.schema);else%20if(t(e))if(%22string%22===u(a%5Bp%5D))%7Bif(v(Y.get(a%5Bp%5D))!==r(e))%7BX.invalidClassName(JSON.stringify(a%5Bp%5D),r(e),v(a%5Bp%5D)),c=!1;break%7D%7Delse%7Bif(!V(v(a%5Bp%5D),r(e)))%7BX.invalidClassName(JSON.stringify(a%5Bp%5D),r(e),v(a%5Bp%5D)),c=!1;break%7Dd&&(a%5Bp%5D=a%5Bp%5D.id())%7Delse%20if(u(a%5Bp%5D)!==e)%7BX.invalidPropertyType(a%5Bp%5D,e,a%5Bp%5D),c=!1;break%7D%7Delse%20c=!1,X.invalidType(a,%22array%22);break;default:c=!1,X.unknownType(a)%7Dreturn%20c%7Dvar%20h=%22%22,i=null,j=!0,k=!0,l=%22%22,m=%22%22,n=%22%22,o=0,p=0;x(c,%22undefined%22)&&(c=!0),x(d,%22undefined%22)&&(c=!1);for(h%20in%20a)if(i=a%5Bh%5D,x(b%5Bh%5D,%22undefined%22)&&%22_core%22!==h)%7Bif(c)return%20X.unknownProperty(h,b),!1%7Delse%20switch(l=%22_core%22!==h?b%5Bh%5D.type:%22boolean%22,%22_id%22===h&&(l=%22string%22),!0)%7Bcase%20s(l):j=e(i,l);break;case%20t(l):j=f(i,l);break;default:j=g(i,l)%7Dfor(h%20in%20b)i=b%5Bh%5D,k=i.mandatory,x(a%5Bh%5D,%22undefined%22)&&k===!0&&(X.missingProperty(h),j=!1);return%20j%7Dfunction%20Q(a,b)%7Bvar%20c=%22%22,d=null,e=!0,f=%22%22;for(c%20in%20b)d=b%5Bc%5D,e=d.mandatory,f=d%5B%22default%22%5D,x(a%5Bc%5D,%22undefined%22)&&(e!==!1%7C%7Cx(f,%22undefined%22)%7C%7C(a%5Bc%5D=f))%7Dfunction%20R(a)%7Bvar%20b=null;return%20ma.compiledSchemas%5Ba%5D&&(b=ma.compiledSchemas%5Ba%5D),b%7Dfunction%20S(a)%7Bvar%20b=null;return%20ma.generatedModels%5Ba%5D&&(b=ma.generatedModels%5Ba%5D),b%7Dfunction%20T()%7Bvar%20a=ma.metadef.schema;return%20a%7Dfunction%20U(a)%7Bvar%20b=%5B%5D;return%20b=ma.inheritanceTree%5Ba%5D?ma.inheritanceTree%5Ba%5D.slice():%5B%5D%7Dfunction%20V(a,b)%7Bfunction%20c(a,b)%7Bvar%20d=!1,e=%5B%5D,f=0,g=0;if(e=U(a),0!==e.length)if(-1!==e.indexOf(b))d=!0;else%20for(f=0;g%3Ef&&!(d=c(e%5Bf%5D,b));f++);return%20d%7Dvar%20d=!1,e=%5B%5D,f=0,g=0;if(a!==b)%7Bif(e=U(a),g=e.length,0!==e.length)if(-1!==e.indexOf(b))d=!0;else%20for(f=0;g%3Ef&&!(d=c(e%5Bf%5D,b));f++);%7Delse%20d=!0;return%20d%7Dvar%20W=a(%22./db.js%22),X=a(%22./log.js%22),Y=a(%22./component.js%22),Z=(a(%22./workflow.js%22),a(%22./helper.js%22)),$=%22_id%22,_=%22_name%22,aa=%22_description%22,ba=%22_inherit%22,ca=%22_schema%22,da=%22_class%22,ea=%22_core%22,fa=%22method%22,ga=%22event%22,ha=%22property%22,ia=%22link%22,ja=%22collection%22,ka=%5B%22property%22,%22collection%22,%22link%22,%22method%22,%22event%22%5D,la=%5B%22boolean%22,%22string%22,%22number%22,%22object%22,%22function%22,%22array%22,%22any%22%5D,ma=%7Bmetadef:%7B%7D,inheritance:%7B%7D,inheritanceTree:%7B%7D,schemas:%7B%7D,compiledSchemas:%7B%7D,models:%7B%7D,generatedModels:%7B%7D,states:%7B%7D,type:%7B%7D%7D;c.init=D,c.clear=E,c.schema=A,c.model=B,c.type=C,c.create=F,c.getSchema=R,c.getModel=S,c.getMetaDef=T,c.getParents=U,c.inheritFrom=V,c.isValidObject=P,c.prepareObject=Q,c.isValidType=M,c.isValidEnum=N,c.isValidState=L,c.isEvent=G,c.isProperty=H,c.isLink=I,c.isCollection=J,c.isMethod=K%7D,%7B%22./component.js%22:3,%22./db.js%22:4,%22./helper.js%22:5,%22./log.js%22:6,%22./workflow.js%22:10%7D%5D,8:%5Bfunction(a,b,c)%7B%22use%20strict%22;var%20d=a(%22./db.js%22),e=a(%22./component.js%22),f=a(%22./metamodel.js%22),g=a(%22../build/system/system.js%22),h=a(%22./helper.js%22),i=%22%22,j=%22%22;h.polyfill(),f.init(),i=d.system(g.system),j=e.get(i),j.main(),b.exports=e.get(%22runtime%22)%7D,%7B%22../build/system/system.js%22:1,%22./component.js%22:3,%22./db.js%22:4,%22./helper.js%22:5,%22./metamodel.js%22:7%7D%5D,9:%5Bfunction(a,b,c)%7B%22use%20strict%22;function%20d(a,b,c)%7Bh%5Ba%5D=%7Bname:b,parameters:%7Bdata:c%7D%7D,g.store.RuntimeState%5Ba%5D=%7Bname:b,parameters:%7Bdata:c%7D%7D%7Dfunction%20e(a)%7Breturn%20h%5Ba%5D%7Dfunction%20f()%7Bh=%7B%7D%7Dvar%20g=a(%22./db.js%22),h=%7B%7D;c.set=d,c.get=e,c.clear=f%7D,%7B%22./db.js%22:4%7D%5D,10:%5Bfunction(a,b,c)%7B%22use%20strict%22;function%20d(a)%7Bthis.message=a,this.name=%22RuntimeError%22%7Dfunction%20e(a,b)%7Bvar%20c=null,d=%5B%5D,e=%5B%5D,f=0,g=0;if(s.getModel(a)?c=s.getModel(a)%5Bb%5D:x.unknownModel(a),c)%7Bif(d=c.params)for(f=d.length,g=0;f%3Eg;g++)e.push(d%5Bg%5D.name)%7Delse%20x.unknownMethod(a,b);return%20e%7Dfunction%20f(a,b)%7Bvar%20c=null,d=%5B%5D,e=%5B%5D,f=0,g=0,h=0,i=0;if(s.getModel(a)?c=s.getModel(a)%5Bb%5D:x.unknownModel(a),c)%7Bif(d=c.params)for(f=d.length,g=0;f%3Eg;g++)%22undefined%22!=typeof%20d%5Bg%5D.mandatory&&d%5Bg%5D.mandatory!==!0%7C%7C(h+=1),i+=1;e.push(h),e.push(i)%7Delse%20x.unknownMethod(a,b);return%20e%7Dfunction%20g(a,b,c)%7Bvar%20d=null,e=%5B%5D,f=%5B%5D,g=0,h=0;if(d=s.getModel(a)%5Bb%5D)%7Bif(e=d.params)for(g=e.length,h=0;g%3Eh;h++)e%5Bh%5D.mandatory===!1&&%22undefined%22==typeof%20c%5Bh%5D?f.push(e%5Bh%5D%5B%22default%22%5D):f.push(c%5Bh%5D)%7Delse%20x.unknownMethod(a,b);return%20f%7Dfunction%20h(a,b)%7Bvar%20c=null,d=null;return%20s.getModel(a)?c=s.getModel(a)%5Bb%5D.result:x.unknownModel(a),c&&(d=c),d%7Dfunction%20i(a,b)%7Bvar%20c=null,d=%5B%5D,e=%5B%5D,f=0,g=0;if(s.getModel(a)?c=s.getModel(a)%5Bb%5D:x.unknownModel(a),c)%7Bif(d=c.params)for(f=d.length,g=0;f%3Eg;g++)e.push(d%5Bg%5D.type)%7Delse%20x.unknownMethod(a,b);return%20e%7Dfunction%20j(a)%7Ba=a%7C%7C%7B%7D;var%20b=a.component%7C%7Cnull,c=a.methodName%7C%7C%22%22,d=a.methodResult%7C%7Cvoid%200,e=%22%22,f=null,g=!0;if(e=%22Function%22===b.constructor.name?b.name:b.constructor.name,f=h(e,c),null!==f)switch(!0)%7Bcase%22any%22===f:break;case%22array%22===f:Array.isArray(d)%7C%7C(g=!1,x.invalidResultType(b.id(),c,f,null));break;default:typeof%20d!==f&&(g=!1,x.invalidResultType(b.id(),c,f,typeof%20d))%7Dreturn%20g%7Dfunction%20k(a,b,c)%7Bvar%20d=u.getActions(a.id(),b),e=%5B%5D,f=0,g=0,h=null;if(!d.length%7C%7Cc)if(%22Function%22!==a.constructor.name)d=d.concat(k(t.get(a.constructor.name),b,c));else%20for(e=s.getParents(a.name),f=e.length,g=0;f%3Eg&&(h=t.get(e%5Bg%5D),h?d=d.concat(k(h,b,c)):x.unknownComponent(e%5Bg%5D,a.name),!d.length);g++);return%20d.length&&d.reverse(),d%7Dfunction%20l(a,b,e,f,h)%7Bvar%20i=null,j=%5B%5D,k=%22%22,l=0,m=0;k=%22Function%22===a.constructor.name?a.name:a.constructor.name,s.isProperty(b,k)%7C%7Cs.isLink(b,k)%7C%7Cs.isCollection(b,k)%7C%7C(f=g(k,b,f));try%7Bfor(m=f.length,l=0;m%3El;l++)j.push(f%5Bl%5D);e.useCoreAPI&&(j.push(t),j.push(y),j.push(s),j.push(c),j.push(u),j.push(v),j.push(x)),h?setTimeout(e.action.bind.apply(e.action,%5Ba%5D.concat(j)),0):i=e.action.apply(a,j)%7Dcatch(n)%7Bif(n%20instanceof%20d)throw%20n;a&&a.error&&a.error(%7Bmessage:%22error%20when%20trying%20to%20call%20the%20method%20'%22+b+%22'%20on%20component%20'%22+a.id()+%22'%22,error:n%7D),w.getRuntime()&&w.getRuntime().error(%7Bmessage:%22error%20when%20trying%20to%20call%20the%20method%20'%22+b+%22'%20on%20component%20'%22+a.id()+%22'%22,error:n%7D),x.actionInvokeError(b,a.id(),n.message)%7Dreturn%20i%7Dfunction%20m(a,b,c)%7Bvar%20d=%22%22,e=-1,g=%22%22,h=%22%22,i=%5B%5D,j=0,k=%5B%5D,l=!1,m=!1,n=!1,o=!1;switch(d=c.toString(),e=d.indexOf(%22%7B%22),g=d.substring(0,e),h=g.split(%22(%22)%5B1%5D.replace(%22)%22,%22%22).trim(),i=h.split(%22,%22),%22%22===i%5B0%5D&&(i=%5B%5D),j=i.length,l=s.isProperty(b,a),m=s.isLink(b,a),n=s.isCollection(b,a),!0)%7Bcase%20n:k=%5B3,3%5D;break;case%20l:k=%5B1,1%5D;break;case%20m:k=%5B1,1%5D;break;default:k=f(a,b)%7Dreturn%20k%5B0%5D%3C=j&&j%3C=k%5B1%5D&&(o=!0),o%7Dfunction%20n(a)%7Ba=a%7C%7C%7B%7D;var%20b=a.component%7C%7Cnull,c=a.methodName%7C%7C%22%22,d=a.args%7C%7C%22%22,g=%5B%5D,h=%5B%5D,j=%5B%5D,k=%22%22,l=d.length,m=0,n=null,o=!0,p=!1,q=!1,r=!1;switch(k=%22Function%22===b.constructor.name?b.name:b.constructor.name,p=s.isProperty(c,k),q=s.isLink(c,k),r=s.isCollection(c,k),g=e(k,c),!0)%7Bcase%20r:h=%5B%22number%22,s.getModel(k)%5Bc%5D.type%5B0%5D,%22string%22%5D,j=%5B3,3%5D;break;case%20p:h=%5Bs.getModel(k)%5Bc%5D.type%5D,j=%5B1,1%5D;break;case%20q:h=%5Bs.getModel(k)%5Bc%5D.type%5D,j=%5B1,1%5D;break;default:h=i(k,c),j=f(k,c)%7Dfor(%22undefined%22==typeof%20l&&(l=1),-1===j.indexOf(l)&&(o=!1,x.invalidParamNumber(b.id(),c)),m=0;l%3Em;m++)if(n=d%5Bm%5D,%22undefined%22==typeof%20n)%7Bif(!(m%3Cj%5B0%5D))continue;o=!1,x.invalidParamNumber(b.id(),c)%7Delse%20s.isValidType(n,h%5Bm%5D)%7C%7C(o=!1,x.invalidParamType(b.id(),c,g%5Bm%5D));return%20o%7Dfunction%20o(a,b)%7Bvar%20c=!1,d=!1,e=!1,f=!1,g=%5B%5D,h=null,i=null,j=%22%22,k=null;g=y.RuntimeBehavior.find(%7B_id:a%7D),k=u.get(a),1===g.length&&(h=g%5B0%5D,i=t.get(h.component),i&&(j=%22Function%22===i.constructor.name?i.name:i.constructor.name,c=s.isEvent(h.state,j),d=s.isProperty(h.state,j),e=s.isLink(h.state,j),f=s.isCollection(h.state,j),(c%7C%7Cd%7C%7Cf%7C%7Ce)&&l(i,h.state,%7BuseCoreAPI:h.useCoreAPI,action:k%7D,b,!0)))%7Dfunction%20p(a)%7Ba=a%7C%7C%7B%7D,a.component=a.component%7C%7C%22%22,a.state=a.state%7C%7C%22%22,a.data=a.data%7C%7C%5B%5D;var%20b=null,c=%22%22,d=%5B%5D,e=null,f=null,g=0,h=0,i=!1,m=!1,o=!1,p=!1,q=!1;if(c=v.get(a.component),%22destroy%22===c&&x.invalidUseOfComponent(a.component),b=t.get(a.component),b&&(i=%22Function%22===b.constructor.name?b.name:b.constructor.name,q=s.isEvent(a.state,i),m=s.isProperty(a.state,i),o=s.isLink(a.state,i),p=s.isCollection(a.state,i),d=k(b,a.state,q)),d.length)%7Bif(n(%7Bcomponent:b,methodName:a.state,args:a.data%7D))if(q%7C%7Cm%7C%7Co%7C%7Cp)%7Bfor(h=d.length,g=0;h%3Eg;g++)e=d%5Bg%5D,l(b,a.state,e,a.data,!0);v.set(b.id(),a.state,a.data)%7Delse%20e=d%5B0%5D,f=l(b,a.state,e,a.data,!1),j(%7Bcomponent:b,methodName:a.state,methodResult:f%7D);return%20f%7Db&&(q%7C%7Cm%7C%7Co%7C%7Cp)&&v.set(b.id(),a.state,a.data)%7Dfunction%20q(a)%7Bif(a=a%7C%7C%7B%7D,%22undefined%22==typeof%20a.error&&(a.error=!1),a.message=a.message%7C%7C%22%22,c.state=function()%7B%7D,a.error)throw%20new%20d(a.message?%22runtime%20has%20been%20stopped%20because%20%22+a.message:%22runtime%20has%20been%20stopped%20because%20of%20an%20unknown%20error%22);a.message?console.error(%22runtime:%20runtime%20has%20been%20stopped%20because%20%22+a.message):console.error(%22runtime:%20runtime%20has%20been%20stopped%22)%7Dfunction%20r()%7Bc.state=p,x.workflowRestarted()%7Dvar%20s=a(%22./metamodel.js%22),t=a(%22./component.js%22),u=a(%22./behavior.js%22),v=a(%22./state.js%22),w=a(%22./helper.js%22),x=a(%22./log.js%22),y=a(%22./db.js%22);d.prototype=new%20Error,d.prototype.constructor=d,c.state=p,c.stop=q,c.restart=r,c.checkParams=n,c.validParamNumbers=m,c.action=o%7D,%7B%22./behavior.js%22:2,%22./component.js%22:3,%22./db.js%22:4,%22./helper.js%22:5,%22./log.js%22:6,%22./metamodel.js%22:7,%22./state.js%22:9%7D%5D%7D,%7B%7D,%5B8%5D)(8)%7D);"
            }
        }
    }
}
