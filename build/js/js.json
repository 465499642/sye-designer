{
    "_id": "e89c617b6b15d33",
    "name": "js",
    "description": "js components",
    "version": "0.5.1",
    "components": {
        "JS": {
            "syrupjs.js": {
                "_id": "syrupjs.js",
                "source": "/*%20%20*%20SyrupJS%20%20*%20The%20System%20Runtime%20Platform%20%20*%20https://syrupjs.github.io%20%20*%20@ecarriou%20%20*%20%20%20%20*%20Copyright%20(c)%202016%20Erwan%20Carriou%20%20*%20%20%20*%20Permission%20is%20hereby%20granted,%20free%20of%20charge,%20to%20any%20person%20obtaining%20a%20copy%20%20*%20of%20this%20software%20and%20associated%20documentation%20files%20(the%20%22Software%22),%20to%20deal%20%20*%20in%20the%20Software%20without%20restriction,%20including%20without%20limitation%20the%20rights%20%20*%20to%20use,%20copy,%20modify,%20merge,%20publish,%20distribute,%20sublicense,%20and/or%20sell%20%20*%20copies%20of%20the%20Software,%20and%20to%20permit%20persons%20to%20whom%20the%20Software%20is%20%20*%20furnished%20to%20do%20so,%20subject%20to%20the%20following%20conditions:%20%20*%20%20%20*%20The%20above%20copyright%20notice%20and%20this%20permission%20notice%20shall%20be%20included%20in%20all%20%20*%20copies%20or%20substantial%20portions%20of%20the%20Software.%20%20*%20%20%20*%20THE%20SOFTWARE%20IS%20PROVIDED%20%22AS%20IS%22,%20WITHOUT%20WARRANTY%20OF%20ANY%20KIND,%20EXPRESS%20OR%20%20*%20IMPLIED,%20INCLUDING%20BUT%20NOT%20LIMITED%20TO%20THE%20WARRANTIES%20OF%20MERCHANTABILITY,%20%20*%20FITNESS%20FOR%20A%20PARTICULAR%20PURPOSE%20AND%20NONINFRINGEMENT.%20IN%20NO%20EVENT%20SHALL%20THE%20%20*%20AUTHORS%20OR%20COPYRIGHT%20HOLDERS%20BE%20LIABLE%20FOR%20ANY%20CLAIM,%20DAMAGES%20OR%20OTHER%20%20*%20LIABILITY,%20WHETHER%20IN%20AN%20ACTION%20OF%20CONTRACT,%20TORT%20OR%20OTHERWISE,%20ARISING%20FROM,%20%20*%20OUT%20OF%20OR%20IN%20CONNECTION%20WITH%20THE%20SOFTWARE%20OR%20THE%20USE%20OR%20OTHER%20DEALINGS%20IN%20THE%20%20*%20SOFTWARE.%20%20%20*/%20!function(a)%7Bif(%22object%22==typeof%20exports&&%22undefined%22!=typeof%20module)module.exports=a();else%20if(%22function%22==typeof%20define&&define.amd)define(%5B%5D,a);else%7Bvar%20b;b=%22undefined%22!=typeof%20window?window:%22undefined%22!=typeof%20global?global:%22undefined%22!=typeof%20self?self:this,b.syrup=a()%7D%7D(function()%7Breturn%20function%20a(b,c,d)%7Bfunction%20e(g,h)%7Bif(!c%5Bg%5D)%7Bif(!b%5Bg%5D)%7Bvar%20i=%22function%22==typeof%20require&&require;if(!h&&i)return%20i(g,!0);if(f)return%20f(g,!0);var%20j=new%20Error(%22Cannot%20find%20module%20'%22+g+%22'%22);throw%20j.code=%22MODULE_NOT_FOUND%22,j%7Dvar%20k=c%5Bg%5D=%7Bexports:%7B%7D%7D;b%5Bg%5D%5B0%5D.call(k.exports,function(a)%7Bvar%20c=b%5Bg%5D%5B1%5D%5Ba%5D;return%20e(c?c:a)%7D,k,k.exports,a,b,c,d)%7Dreturn%20c%5Bg%5D.exports%7Dfor(var%20f=%22function%22==typeof%20require&&require,g=0;g%3Cd.length;g++)e(d%5Bg%5D);return%20e%7D(%7B1:%5Bfunction(a,b,c)%7B%22use%20strict%22;var%20d=%7Bname:%22syrup%22,version:%220.9.5%22,description:%22The%20System%20Runtime%20Platform%22,_id:%22e89c617b6b15d24%22,schemas:%7BSyrupSchema:%7Bload:%22method%22,ready:%22event%22,_id:%22SyrupSchema%22,_name:%22SyrupSchema%22,_inherit:%5B%22SyrupComponentSchema%22%5D,_core:!0,version:%22property%22,system:%22method%22,warning:%22event%22%7D,Syrup:%7Bload:%7Bparams:%5B%7Bname:%22url%22,type:%22string%22%7D,%7Bname:%22async%22,type:%22boolean%22,mandatory:!1,%22default%22:!0%7D%5D%7D,ready:%7B%7D,_id:%22Syrup%22,_name:%22Syrup%22,_schema:%22SyrupSchema%22,_inherit:%5B%22SyrupComponent%22%5D,_core:!0,version:%7Btype:%22string%22,readOnly:!0,mandatory:!0,%22default%22:%220.0.0%22%7D,warning:%7Bparams:%5B%7Bname:%22message%22,type:%22string%22%7D%5D%7D,system:%7Bparams:%5B%7Bname:%22name%22,type:%22string%22,mandatory:!1%7D%5D,result:%22object%22%7D%7D,SyrupBehavior:%7B_id:%22SyrupBehavior%22,_name:%22SyrupBehavior%22,_schema:%22SyrupBehaviorSchema%22,_inherit:%5B%22SyrupComponent%22%5D,_core:!0,core:%7Btype:%22boolean%22,readOnly:!1,mandatory:!1,%22default%22:!1%7D,useCoreAPI:%7Btype:%22boolean%22,readOnly:!1,mandatory:!1,%22default%22:!1%7D,component:%7Btype:%22string%22,readOnly:!1,mandatory:!0,%22default%22:%22%22%7D,action:%7Btype:%22javascript%22,readOnly:!1,mandatory:!0,%22default%22:%22%22%7D,state:%7Btype:%22string%22,readOnly:!1,mandatory:!0,%22default%22:%22%22%7D%7D,SyrupBehaviorSchema:%7B_id:%22SyrupBehaviorSchema%22,_name:%22SyrupBehaviorSchema%22,_inherit:%5B%22SyrupComponentSchema%22%5D,_core:!0,core:%22property%22,component:%22property%22,action:%22property%22,state:%22property%22,useCoreAPI:%22property%22%7D,SyrupChannel:%7B_id:%22SyrupChannel%22,_name:%22SyrupChannel%22,_schema:%22SyrupChannelSchema%22,_inherit:%5B%22SyrupComponent%22,%22SyrupChannelEvent%22%5D,_core:!0,send:%7Bparams:%5B%7Bname:%22message%22,type:%22object%22%7D%5D%7D%7D,SyrupChannelEvent:%7B_id:%22SyrupChannelEvent%22,_name:%22SyrupChannelEvent%22,_schema:%22SyrupChannelEventSchema%22,_core:!0%7D,SyrupChannelEventSchema:%7B_id:%22SyrupChannelEventSchema%22,_name:%22SyrupChannelEventSchema%22,_core:!0%7D,SyrupChannelSchema:%7B_id:%22SyrupChannelSchema%22,_name:%22SyrupChannelSchema%22,_inherit:%5B%22SyrupComponentSchema%22,%22SyrupChannelEventSchema%22%5D,_core:!0,send:%22event%22%7D,SyrupClassInfo:%7B_id:%22SyrupClassInfo%22,_name:%22SyrupClassInfo%22,_schema:%22SyrupClassInfoSchema%22,_inherit:%5B%22SyrupComponent%22%5D,_core:!0,metamodel:%7Btype:%22object%22,readOnly:!0,mandatory:!0,%22default%22:%7B%7D%7D,model:%7Btype:%22object%22,readOnly:!0,mandatory:!0,%22default%22:%7B%7D%7D,property:%7Bparams:%5B%7Bname:%22name%22,type:%22string%22%7D%5D,result:%22object%22%7D,properties:%7Bresult:%22array%22%7D,method:%7Bparams:%5B%7Bname:%22name%22,type:%22string%22%7D%5D,result:%22object%22%7D,methods:%7Bresult:%22array%22%7D,collection:%7Bparams:%5B%7Bname:%22name%22,type:%22string%22%7D%5D,result:%22object%22%7D,collections:%7Bresult:%22array%22%7D,event:%7Bparams:%5B%7Bname:%22name%22,type:%22string%22%7D%5D,result:%22object%22%7D,events:%7Bresult:%22array%22%7D%7D,SyrupClassInfoSchema:%7B_id:%22SyrupClassInfoSchema%22,_name:%22SyrupClassInfoSchema%22,_inherit:%5B%22SyrupComponentSchema%22%5D,_core:!0,model:%22property%22,metamodel:%22property%22,method:%22method%22,methods:%22method%22,property:%22method%22,properties:%22method%22,collections:%22method%22,collection:%22method%22,event:%22method%22,events:%22method%22%7D,SyrupComponent:%7B_id:%22SyrupComponent%22,_name:%22SyrupComponent%22,_schema:%22SyrupComponentSchema%22,_core:!0,on:%7Bparams:%5B%7Bname:%22state%22,type:%22string%22%7D,%7Bname:%22handler%22,type:%22function%22%7D,%7Bname:%22useCoreAPI%22,type:%22boolean%22,mandatory:!1%7D%5D%7D,off:%7Bparams:%5B%7Bname:%22state%22,type:%22string%22%7D,%7Bname:%22behaviorId%22,type:%22string%22,mandatory:!1%7D%5D%7D,require:%7Bparams:%5B%7Bname:%22id%22,type:%22string%22%7D%5D%7D,destroy:%7Bparams:%5B%5D%7D,classInfo:%7Btype:%22@SyrupClassInfo%22,readOnly:!1,mandatory:!1,%22default%22:%7B%7D%7D,init:%7Bparams:%5B%7Bname:%22conf%22,type:%22object%22%7D%5D%7D,error:%7Bparams:%5B%7Bname:%22data%22,type:%22errorParam%22%7D%5D%7D%7D,SyrupComponentSchema:%7B_id:%22SyrupComponentSchema%22,_name:%22SyrupComponentSchema%22,_core:!0,classInfo:%22property%22,on:%22method%22,off:%22method%22,require:%22method%22,destroy:%22method%22,init:%22method%22,error:%22event%22%7D,SyrupDatabase:%7B_id:%22SyrupDatabase%22,_name:%22SyrupDatabase%22,_schema:%22SyrupDatabaseSchema%22,_inherit:%5B%22SyrupComponent%22%5D,_core:!0,system:%7Bparams:%5B%7Bname:%22system%22,type:%22object%22,mandatory:!1%7D%5D,result:%22string%22%7D,subsystem:%7Bparams:%5B%7Bname:%22params%22,type:%22object%22%7D%5D,result:%22string%22%7D,collections:%7Bresult:%22object%22%7D,insert:%7Bparams:%5B%7Bname:%22classId%22,type:%22string%22%7D,%7Bname:%22object%22,type:%22object%22%7D%5D%7D,update:%7Bparams:%5B%7Bname:%22schema%22,type:%22string%22%7D,%7Bname:%22componentId%22,type:%22string%22%7D,%7Bname:%22attributeName%22,type:%22string%22%7D,%7Bname:%22attributeValue%22,type:%22object%22%7D%5D%7D,remove:%7Bparams:%5B%7Bname:%22classId%22,type:%22string%22%7D,%7Bname:%22object%22,type:%22string%22%7D%5D%7D%7D,SyrupDatabaseSchema:%7B_id:%22SyrupDatabaseSchema%22,_name:%22SyrupDatabaseSchema%22,_inherit:%5B%22SyrupComponentSchema%22%5D,_core:!0,system:%22method%22,subsystem:%22method%22,collections:%22method%22,insert:%22event%22,update:%22event%22,remove:%22event%22%7D,SyrupMessage:%7B_id:%22SyrupMessage%22,_name:%22SyrupMessage%22,_schema:%22SyrupMessageSchema%22,_core:!0,event:%7Btype:%22string%22,readOnly:!1,mandatory:!0,%22default%22:%22%22%7D,from:%7Btype:%22string%22,readOnly:!1,mandatory:!0,%22default%22:%22%22%7D,data:%7Btype:%22array%22,readOnly:!1,mandatory:!0,%22default%22:%5B%5D%7D%7D,SyrupMessageSchema:%7B_id:%22SyrupMessageSchema%22,_name:%22SyrupMessageSchema%22,_core:!0,event:%22property%22,from:%22property%22,data:%22property%22%7D,SyrupMetamodel:%7B_id:%22SyrupMetamodel%22,_name:%22SyrupMetamodel%22,_schema:%22SyrupMetamodelSchema%22,_inherit:%5B%22SyrupComponent%22%5D,_core:!0,schema:%7Bparams:%5B%7Bname:%22schema%22,type:%22object%22%7D%5D%7D,type:%7Bparams:%5B%7Bname:%22type%22,type:%22object%22%7D%5D%7D,create:%7Bparams:%5B%5D%7D%7D,SyrupMetamodelSchema:%7B_id:%22SyrupMetamodelSchema%22,_name:%22SyrupMetamodelSchema%22,_inherit:%5B%22SyrupComponentSchema%22%5D,_core:!0,schema:%22method%22,type:%22method%22,create:%22method%22%7D,SyrupState:%7B_id:%22SyrupState%22,_name:%22SyrupState%22,_schema:%22SyrupStateSchema%22,_class:!1,_core:!0,name:%7Btype:%22string%22,readOnly:!1,mandatory:!0,%22default%22:%22%22%7D,parameters:%7Btype:%22object%22,readOnly:!1,mandatory:!1,%22default%22:%7B%7D%7D%7D,SyrupStateSchema:%7B_id:%22SyrupStateSchema%22,_name:%22SyrupStateSchema%22,_core:!0,name:%22property%22,parameters:%22property%22%7D,SyrupSystem:%7B_id:%22SyrupSystem%22,_name:%22SyrupSystem%22,_schema:%22SyrupSystemSchema%22,_inherit:%5B%22SyrupComponent%22%5D,_core:!0,name:%7Btype:%22string%22,readOnly:!1,mandatory:!0,%22default%22:%22%22%7D,master:%7Btype:%22boolean%22,readOnly:!1,mandatory:!1,%22default%22:!1%7D,subsystem:%7Btype:%22boolean%22,readOnly:!1,mandatory:!1,%22default%22:!1%7D,version:%7Btype:%22string%22,readOnly:!1,mandatory:!1,%22default%22:%220.0.1%22%7D,description:%7Btype:%22string%22,readOnly:!1,mandatory:!1,%22default%22:%22%22%7D,schemas:%7Btype:%22object%22,readOnly:!1,mandatory:!1,%22default%22:%7B%7D%7D,behaviors:%7Btype:%22object%22,readOnly:!1,mandatory:!1,%22default%22:%7B%7D%7D,types:%7Btype:%22object%22,readOnly:!1,mandatory:!1,%22default%22:%7B%7D%7D,components:%7Btype:%22object%22,readOnly:!1,mandatory:!1,%22default%22:%7B%7D%7D,ready:%7B%7D,sync:%7B%7D,main:%7B%7D%7D,SyrupSystemSchema:%7B_id:%22SyrupSystemSchema%22,_name:%22SyrupSystemSchema%22,_inherit:%5B%22SyrupComponentSchema%22%5D,_core:!0,name:%22property%22,master:%22property%22,subsystem:%22property%22,version:%22property%22,description:%22property%22,schemas:%22property%22,behaviors:%22property%22,types:%22property%22,components:%22property%22,sync:%22method%22,main:%22method%22,ready:%22event%22%7D%7D,types:%7Bhtml:%7Bname:%22html%22,type:%22string%22,core:!0%7D,css:%7Bname:%22css%22,type:%22string%22,core:!0%7D,collection:%7Bname:%22collection%22,type:%22object%22,schema:%7Btype:%7Btype:%5B%22string%22%5D,mandatory:!0%7D,readOnly:%7Btype:%22boolean%22,mandatory:!0%7D,mandatory:%7Btype:%22boolean%22,mandatory:!0%7D,%22default%22:%7Btype:%22object%22,mandatory:!0%7D%7D,core:!0%7D,errorParam:%7Bname:%22errorParam%22,type:%22object%22,schema:%7Bmessage:%7Btype:%22string%22,mandatory:!0%7D,error:%7Btype:%22object%22,mandatory:!0%7D%7D,core:!0%7D,event:%7Bname:%22event%22,type:%22object%22,schema:%7Bparams:%7Btype:%5B%22parameter%22%5D,mandatory:!1%7D%7D,core:!0%7D,javascript:%7Bname:%22javascript%22,type:%22string%22,core:!0%7D,message:%7Bname:%22message%22,type:%22object%22,schema:%7Bevent:%7Btype:%22string%22,mandatory:!0%7D,from:%7Btype:%22string%22,mandatory:!1%7D,data:%7Btype:%22object%22,mandatory:!0%7D%7D,core:!0%7D,method:%7Bname:%22method%22,type:%22object%22,schema:%7Bresult:%7Btype:%22string%22,mandatory:!1%7D,params:%7Btype:%5B%22parameter%22%5D,mandatory:!1%7D%7D,core:!0%7D,parameter:%7Bname:%22parameter%22,type:%22object%22,schema:%7Bname:%7Btype:%22string%22,mandatory:!0%7D,type:%7Btype:%22string%22,mandatory:!0%7D,mandatory:%7Btype:%22boolean%22,mandatory:!1%7D,%22default%22:%7Btype:%22@type%22,mandatory:!1%7D%7D,core:!0%7D,property:%7Bname:%22property%22,type:%22object%22,schema:%7Btype:%7Btype:%22string%22,mandatory:!0%7D,readOnly:%7Btype:%22boolean%22,mandatory:!0%7D,mandatory:%7Btype:%22boolean%22,mandatory:!0%7D,%22default%22:%7Btype:%22@type%22,mandatory:!0%7D%7D,core:!0%7D%7D,behaviors:%7B%221aaee1e6311ff39%22:%7B_id:%221aaee1e6311ff39%22,component:%22syrup%22,state:%22load%22,action:%22function%20load(url,%20async)%20%7B%5Cn%20%20%20%20var%20xhr%20=%20null,%5Cn%20%20%20%20callbackLoad%20=%20null;%5Cn%20%20%20%20xhr%20=%20new%20XMLHttpRequest();%5Cn%20%20%20%20%5Cn%20%20%20%20callbackLoad%20=%20function%20callbackLoad(system)%20%7B%5Cn%20%20%20%20%20%20%20%20var%20sysId%20=%20$db.system(system),%5Cn%20%20%20%20%20%20%20%20sys%20=%20$component.get(sysId),%5Cn%20%20%20%20%20%20%20%20systems%20=%20document.querySelectorAll('link%5Brel=system%5D'),%5Cn%20%20%20%20%20%20%20%20nbSubsystem%20=%20$db.SyrupSystem.find(%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20'subsystem':%20true%5Cn%20%20%20%20%20%20%20%20%7D);%20%5Cn%20%20%20%20%20%20%20%20if%20(sys)%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20sys.main();%5Cn%20%20%20%20%20%20%20%20%7D%20%5Cn%20%20%20%20%20%20%20%20if%20(systems.length%20+%201%20+%20nbSubsystem.length%20===%20$db.SyrupSystem.count())%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20$component.get('syrup').ready();%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D;%5Cn%20%20%20%20%5Cn%20%20%20%20if%20(async)%20%7B%5Cn%20%20%20%20%20%20%20%20xhr.open('GET',%20url,%20true);%5Cn%20%20%20%20%20%20%20%20xhr.onreadystatechange%20=%20function%20()%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20if%20(xhr.readyState%20===%204)%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(xhr.status%20===%20200)%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20callbackLoad(JSON.parse(xhr.response));%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%7D;%5Cn%20%20%20%20%20%20%20%20xhr.send(null);%5Cn%20%20%20%20%7D%20else%20%7B%5Cn%20%20%20%20%20%20%20%20xhr.open('GET',%20url,%20false);%5Cn%20%20%20%20%20%20%20%20xhr.send(null);%5Cn%20%20%20%20%20%20%20%20if%20(xhr.status%20===%20200)%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20callbackLoad(JSON.parse(xhr.response));%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%7D%22,core:!0,useCoreAPI:!0%7D,%221f6001773a18791%22:%7B_id:%221f6001773a18791%22,component:%22e89c617b6b15d24%22,state:%22main%22,action:%22function%20main()%20%7B%5Cn%20%20%20%20var%20subsystems%20=%20%5B%5D,%5Cn%20%20%20%20systems%20=%20%5B%5D,%5Cn%20%20%20%20system%20=%20null,%5Cn%20%20%20%20i%20=%200,%5Cn%20%20%20%20length%20=%200;%5Cn%20%20%20%20%5Cn%20%20%20%20subsystems%20=%20$db.SyrupSystem.find(%7B%5Cn%20%20%20%20%20%20%20%20'subsystem':%20true%5Cn%20%20%20%20%7D);%5Cn%20%20%20%20subsystems.forEach(function%20(subsystem)%20%7B%5Cn%20%20%20%20%20%20%20%20var%20subsystemId%20=%20subsystem._id;%5Cn%20%20%20%20%20%20%20%20this.require(subsystemId).main();%5Cn%20%20%20%20%7D,%20this);%20%5Cn%20%20%20%20%5Cn%20%20%20%20if%20(typeof%20document%20!==%20'undefined')%20%7B%5Cn%20%20%20%20%20%20%20%20systems%20=%20document.querySelectorAll('link%5Brel=system%5D');%5Cn%20%20%20%20%20%20%20%20length%20=%20systems.length;%5Cn%20%20%20%20%20%20%20%20%5Cn%20%20%20%20%20%20%20%20for%20(i%20=%200;%20i%20%3C%20length;%20i++)%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20system%20=%20systems%5Bi%5D;%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%5Cn%20%20%20%20%20%20%20%20%20%20%20%20if%20(system.getAttribute('async')%20===%20'false')%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.require('syrup').load(system.href,%20false);%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.require('syrup').load(system.href,%20true);%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20if%20(length%20===%200)%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20this.require('syrup').ready();%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%7D%22,core:!0,useCoreAPI:!0%7D,%221152e1ca841228b%22:%7B_id:%221152e1ca841228b%22,component:%22Syrup%22,state:%22error%22,action:%22function%20error(data)%20%7B%5Cn%20%20%20%20console.error('syrup:%20'%20+%20data.message,%20data.error);%5Cn%7D%22,core:!0%7D,%221117116e0f1693e%22:%7B_id:%221117116e0f1693e%22,component:%22Syrup%22,state:%22system%22,action:%22function%20system(name)%20%7B%5Cn%20%20%20%20var%20System%20=%20null,%5Cn%20%20%20%20system%20=%20%7B%7D,%5Cn%20%20%20%20systemId%20=%20'',%5Cn%20%20%20%20result%20=%20%5B%5D,%5Cn%20%20%20%20conf%20=%20%7B%7D;%5Cn%20%20%20%20%5Cn%20%20%20%20if%20(name)%20%7B%5Cn%20%20%20%20%20%20%20%20conf.master%20=%20true;%5Cn%20%20%20%20%20%20%20%20conf.name%20=%20name;%5Cn%20%20%20%20%20%20%20%20System%20=%20this.require('SyrupSystem');%5Cn%20%20%20%20%20%20%20%20system%20=%20new%20System(conf);%5Cn%20%20%20%20%7D%20else%20%7B%5Cn%20%20%20%20%20%20%20%20result%20=%20$db.SyrupSystem.find(%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20'master':%20true%5Cn%20%20%20%20%20%20%20%20%7D);%5Cn%20%20%20%20%20%20%20%20if%20(result.length)%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20systemId%20=%20result%5B0%5D._id;%5Cn%20%20%20%20%20%20%20%20%20%20%20%20system%20=%20$component.get(systemId);%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%20%20%20%20return%20system;%5Cn%7D%22,core:!0,useCoreAPI:!0%7D,%2214aeb18fee100e0%22:%7B_id:%2214aeb18fee100e0%22,component:%22Syrup%22,state:%22warning%22,action:%22function%20warning(message)%20%7B%5Cn%20%20%20%20console.warn('syrup:%20'%20+%20message);%5Cn%7D%22,core:!0%7D,%221c7d91357b1d3d5%22:%7B_id:%221c7d91357b1d3d5%22,component:%22SyrupClassInfo%22,state:%22collection%22,action:%22function%20collection(name)%20%7B%5Cn%20%20%20%20var%20result%20=%20%7B%7D;%5Cn%20%20%20%20if%20(this.metamodel()%5Bname%5D%20===%20'collection')%20%7B%5Cn%20%20%20%20%20%20%20%20result%20=%20this.model()%5Bname%5D;%5Cn%20%20%20%20%7D%20%5Cn%20%20%20%20%5Cn%20%20%20%20return%20result;%20%5Cn%7D%22,core:!0%7D,%221523c1f80f1c711%22:%7B_id:%221523c1f80f1c711%22,component:%22SyrupClassInfo%22,state:%22collections%22,action:%22function%20collections()%20%7B%5Cn%20%20%20%20var%20keys%20=%20Object.keys(this.metamodel()),%5Cn%20%20%20%20item%20=%20'',%5Cn%20%20%20%20result%20=%20%5B%5D,%5Cn%20%20%20%20i%20=%200,%5Cn%20%20%20%20length%20=%200;%5Cn%20%20%20%20%5Cn%20%20%20%20length%20=%20keys.length;%20%5Cn%20%20%20%20%5Cn%20%20%20%20for%20(i%20=%200;%20i%20%3C%20length;%20i++)%20%7B%20%5Cn%20%20%20%20%20%20%20%20item%20=%20keys%5Bi%5D;%20%5Cn%20%20%20%20%20%20%20%20if%20(this.metamodel()%5Bitem%5D%20===%20'collection')%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20result.push(item);%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%20%20%20%20%5Cn%20%20%20%20return%20result;%5Cn%7D%22,core:!0%7D,%221738c124ec18532%22:%7B_id:%221738c124ec18532%22,component:%22SyrupClassInfo%22,state:%22event%22,action:%22function%20event(name)%20%7B%5Cn%20%20%20%20var%20result%20=%20%7B%7D;%5Cn%20%20%20%20%5Cn%20%20%20%20if%20(this.metamodel()%5Bname%5D%20===%20'event')%20%7B%5Cn%20%20%20%20%20%20%20%20result%20=%20this.model()%5Bname%5D;%5Cn%20%20%20%20%7D%20%5Cn%20%20%20%20%5Cn%20%20%20%20return%20result;%5Cn%7D%22,core:!0%7D,%221f1a41d11c1c482%22:%7B_id:%221f1a41d11c1c482%22,component:%22SyrupClassInfo%22,state:%22events%22,action:%22function%20events()%20%7B%5Cn%20%20%20%20var%20keys%20=%20Object.keys(this.metamodel()),%5Cn%20%20%20%20item%20=%20'',%5Cn%20%20%20%20result%20=%20%5B%5D,%5Cn%20%20%20%20i%20=%200,%5Cn%20%20%20%20length%20=%200;%5Cn%20%20%20%20%5Cn%20%20%20%20length%20=%20keys.length;%5Cn%20%20%20%20%5Cn%20%20%20%20for%20(i%20=%200;%20i%20%3C%20length;%20i++)%20%7B%5Cn%20%20%20%20%20%20%20%20item%20=%20keys%5Bi%5D;%5Cn%20%20%20%20%20%20%20%20if%20(this.metamodel()%5Bitem%5D%20===%20'event')%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20result.push(item);%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%20%5Cn%20%20%20%20return%20result;%5Cn%7D%22,core:!0%7D,%22135631389a17cdc%22:%7B_id:%22135631389a17cdc%22,component:%22SyrupClassInfo%22,state:%22method%22,action:%22function%20method(name)%20%7B%5Cn%20%20%20%20var%20result%20=%20%7B%7D;%5Cn%20%20%20%20if%20(this.metamodel()%5Bname%5D%20===%20'method')%20%7B%5Cn%20%20%20%20%20%20%20%20result%20=%20this.model()%5Bname%5D;%5Cn%20%20%20%20%20%20%20%20%5Cn%20%20%20%20%7D%5Cn%20%20%20%20%5Cn%20%20%20%20return%20result;%5Cn%7D%22,core:!0%7D,%221de1a1ad8512a40%22:%7B_id:%221de1a1ad8512a40%22,component:%22SyrupClassInfo%22,state:%22methods%22,action:%22function%20methods()%20%7B%5Cn%20%20%20%20var%20keys%20=%20Object.keys(this.metamodel()),%5Cn%20%20%20%20item%20=%20'',%5Cn%20%20%20%20result%20=%20%5B%5D,%5Cn%20%20%20%20i%20=%200,%5Cn%20%20%20%20length%20=%200;%5Cn%20%20%20%20length%20=%20keys.length;%5Cn%20%20%20%20for%20(i%20=%200;%20i%20%3C%20length;%20i++)%20%7B%5Cn%20%20%20%20%20%20%20%20item%20=%20keys%5Bi%5D;%5Cn%20%20%20%20%20%20%20%20if%20(this.metamodel()%5Bitem%5D%20===%20'method')%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20result.push(item);%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%20%5Cn%20%20%20%20%5Cn%20%20%20%20return%20result;%5Cn%7D%22,core:!0%7D,%221d73d135d519abd%22:%7B_id:%221d73d135d519abd%22,component:%22SyrupClassInfo%22,state:%22properties%22,action:%22function%20properties()%20%7B%20%5Cn%20%20%20%20var%20keys%20=%20Object.keys(this.metamodel()),%5Cn%20%20%20%20item%20=%20'',%5Cn%20%20%20%20result%20=%20%5B%5D,%5Cn%20%20%20%20i%20=%200,%5Cn%20%20%20%20length%20=%200;%5Cn%20%20%20%20length%20=%20keys.length;%5Cn%20%20%20%20%5Cn%20%20%20%20for%20(i%20=%200;%20i%20%3C%20length;%20i++)%20%7B%5Cn%20%20%20%20%20%20%20%20item%20=%20keys%5Bi%5D;%5Cn%20%20%20%20%20%20%20%20if%20(this.metamodel()%5Bitem%5D%20===%20'property')%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20result.push(item);%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%20return%20result;%5Cn%7D%22,core:!0%7D,%2213a05176b816306%22:%7B_id:%2213a05176b816306%22,component:%22SyrupClassInfo%22,state:%22property%22,action:%22function%20property(name)%20%7B%5Cn%20%20%20%20var%20result%20=%20%7B%7D;%5Cn%20%20%20%20%5Cn%20%20%20%20if%20(this.metamodel()%5Bname%5D%20===%20'property')%20%7B%5Cn%20%20%20%20%20%20%20%20result%20=%20this.model()%5Bname%5D;%5Cn%20%20%20%20%7D%5Cn%20%20%20%20return%20result;%5Cn%7D%22,core:!0%7D,%221513d1b17410e31%22:%7B_id:%221513d1b17410e31%22,component:%22SyrupComponent%22,state:%22destroy%22,action:%22function%20destroy()%20%7B%5Cn%20%20%20%20$component.destroy(this.id());%5Cn%7D%22,core:!0,useCoreAPI:!0%7D,%221afe01d6271df24%22:%7B_id:%221afe01d6271df24%22,component:%22SyrupComponent%22,state:%22off%22,action:'function%20off(state,%20behaviorId)%20%7B%5Cn%20%20%20%20var%20args%20=%20%5B%5D,%5Cn%20%20%20%20i%20=%200,%5Cn%20%20%20%20length%20=%200;%5Cn%20%20%20%20length%20=%20arguments.length;%5Cn%20%20%20%20%5Cn%20%20%20%20for%20(i%20=%200;%20i%20%3C%20length%20-%206;%20i++)%20%7B%5Cn%20%20%20%20%20%20%20%20args.push(arguments%5Bi%5D);%5Cn%20%20%20%20%7D%5Cn%20%20%20%20%5Cn%20%20%20%20if%20($workflow.checkParams(%7B%22component%22:%20this,%20%22methodName%22:%20%22off%22,%20%22args%22:%20args%7D))%20%7B%5Cn%20%20%20%20%20%20%20%20if%20($metamodel.isValidState(state,%20this.constructor.name))%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20$behavior.remove(%7B%22behaviorId%22:%20behaviorId,%20%22componentId%22:%20this.id(),%20%22state%22:%20state%7D);%5Cn%20%20%20%20%20%20%20%20%7D%20else%20%7B%20$helper.getSyrup().warning(%7B%20%22message%22:%22invoke%20%5C'off%5C'%20method%20of%20component%20%5C'%22%20+%20this.id()%20+%20%22%5C'%20with%20an%20invalid%20state%20%5C'%22%20+%20state%20+%20%22%5C'%22%7D);%20%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%7D',core:!0,useCoreAPI:!0%7D,%221f46210b7f1edce%22:%7B_id:%221f46210b7f1edce%22,component:%22SyrupComponent%22,state:%22require%22,action:%22function%20require(id)%20%7B%5Cn%20%20%20%20return%20$component.get(id);%5Cn%7D%22,core:!0,useCoreAPI:!0%7D,%22185ad1ffc211622%22:%7B_id:%22185ad1ffc211622%22,component:%22SyrupDatabase%22,state:%22collections%22,action:%22function%20collections()%20%7B%5Cn%20%20%20%20var%20result%20=%20%7B%7D,%5Cn%20%20%20%20collectionName%20=%20'';%5Cn%20%20%20%20%5Cn%20%20%20%20for%20(collectionName%20in%20$db.store)%20%7B%5Cn%20%20%20%20%20%20%20%20if%20($db.store.hasOwnProperty(collectionName)%20&&%20collectionName.indexOf('Syrup')%20!==%200)%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20result%5BcollectionName%5D%20=%20$db%5BcollectionName%5D;%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%20%20%20%20return%20result;%5Cn%7D%22,core:!0,useCoreAPI:!0%7D,%22114f911f1511ecb%22:%7B_id:%22114f911f1511ecb%22,component:%22SyrupDatabase%22,state:%22subsystem%22,action:%22function%20subsystem(params)%20%7B%5Cn%20%20%20%20return%20$db.subsystem(params);%5Cn%7D%22,core:!0,useCoreAPI:!0%7D,%221c5c716dfa1d3d5%22:%7B_id:%221c5c716dfa1d3d5%22,component:%22SyrupDatabase%22,state:%22system%22,action:%22function%20system(system)%20%7B%5Cn%20%20%20%20return%20$db.system(system);%5Cn%7D%22,core:!0,useCoreAPI:!0%7D,%22161c71a7c912944%22:%7B_id:%22161c71a7c912944%22,component:%22SyrupMetamodel%22,state:%22create%22,action:%22function%20create()%20%7B%5Cn%20%20%20%20$metamodel.create();%5Cn%7D%22,core:!0,useCoreAPI:!0%7D,%2218161129081f508%22:%7B_id:%2218161129081f508%22,component:%22SyrupMetamodel%22,state:%22schema%22,action:%22function%20schema(schema)%20%7B%5Cn%20%20%20%20$metamodel.schema(schema);%5Cn%7D%22,core:!0,useCoreAPI:!0%7D,%22184b91e0e71f1c5%22:%7B_id:%22184b91e0e71f1c5%22,component:%22SyrupMetamodel%22,state:%22type%22,action:%22function%20type(type)%20%7B%5Cn%20%20%20%20$metamodel.type(type);%5Cn%7D%22,core:!0,useCoreAPI:!0%7D,%221fe851fda917aa3%22:%7B_id:%221fe851fda917aa3%22,component:%22SyrupSystem%22,state:%22sync%22,action:%22function%20sync()%20%7B%5Cn%20%20%20%20var%20system%20=%20JSON.parse($db.system());%5Cn%20%20%20%20%5Cn%20%20%20%20this.schemas(system.schemas);%5Cn%20%20%20%20this.types(system.types);%5Cn%20%20%20%20this.behaviors(system.behaviors);%5Cn%20%20%20%20this.components(system.components);%5Cn%7D%22,core:!0,useCoreAPI:!0%7D%7D,components:%7BSyrup:%7Bsyrup:%7B_id:%22syrup%22,version:%220.9.5%22%7D%7D,SyrupDatabase:%7Bdb:%7B_id:%22db%22%7D%7D,SyrupMetamodel:%7Bmetamodel:%7B_id:%22metamodel%22%7D%7D,SyrupSystem:%7B%22133421d0c313d2d%22:%7B_id:%22133421d0c313d2d%22,name:%22web%22,version:%220.1.0%22,description:%22Add%20behaviors%20for%20web%22,subsystem:!0,master:!1%7D,%221f6ff194df1c37a%22:%7B_id:%221f6ff194df1c37a%22,name:%22webType%22,version:%220.1.0%22,description:%22Add%20types%20for%20web%22,subsystem:!0,master:!1%7D%7D%7D%7D;c.system=d%7D,%7B%7D%5D,2:%5Bfunction(a,b,c)%7B%22use%20strict%22;function%20d(a,b,c,d)%7Bvar%20e=%22%22,f=-1,g=%22%22,h=%5B%5D,i=%5B%5D,j=%22%22,k=%22%22,l=null;return%20f=b.indexOf(%22%7B%22),k=b.substring(0,f),e=k.split(%22(%22)%5B0%5D.replace(%22function%22,%22%22).trim(),g=k.split(%22(%22)%5B1%5D.replace(%22)%22,%22%22).trim(),h=g.split(%22,%22),h.forEach(function(a)%7Bi.push(a.trim())%7D),j=b.substring(f+1),j=j.substring(0,j.lastIndexOf(%22%7D%22)).trim(),e=e%7C%7Ca,%22%22===h%5B0%5D&&(h=%5B%5D),d&&(h.push(%22$component%22),h.push(%22$db%22),h.push(%22$metamodel%22),h.push(%22$workflow%22),h.push(%22$behavior%22),h.push(%22$state%22)),l=%22%22!==h%5B0%5D?new%20Function(%22body%22,%22return%20function%20%22+e+%22%20(%22+h.join(%22,%22)+%22)%20%7B%20return%20new%20Function('%22+h.join(%22','%22)+%22',%20body).apply(this,%20arguments)%20%7D;%22)(j):new%20Function(%22body%22,%22return%20function%20%22+e+%22%20()%20%7B%20return%20new%20Function(body).apply(this,%20arguments)%20%7D;%22)(j)%7Dfunction%20e(a,b,c,e,f)%7Bvar%20g=l.generateId(),h=c.toString();return%22undefined%22==typeof%20f&&(f=!1),%22undefined%22==typeof%20e&&(e=!1),c=d(b,h,f,e),m%5Bg%5D=c,k.SyrupBehavior.insert(%7B_id:g,component:a,state:b,action:h,useCoreAPI:e,core:f%7D),g%7Dfunction%20f(a)%7Bvar%20b=%5B%5D;a=a%7C%7C%7B%7D,a.behaviorId=a.behaviorId%7C%7C%22%22,a.componentId=a.componentId%7C%7C%22%22,a.state=a.state%7C%7C%22%22,a.componentId&&(a.behaviorId?(k.SyrupBehavior.remove(%7B_id:a.behaviorId,component:a.componentId,state:a.state%7D),delete%20m%5Ba.behaviorId%5D):(b=k.SyrupBehavior.remove(%7Bcomponent:a.componentId,state:a.state%7D),b.forEach(function(a)%7Bdelete%20m%5Ba%5D%7D)))%7Dfunction%20g(a)%7Bdelete%20m%5Ba%5D%7Dfunction%20h(a,b)%7Bvar%20c=%5B%5D,e=%5B%5D,f=null;return%20e=k.SyrupBehavior.find(%7Bcomponent:a,state:b%7D),e.forEach(function(a)%7Bf=m%5Ba._id%5D,%22undefined%22==typeof%20f&&(f=d(a.state,a.action,a.core,a.useCoreAPI),m%5Ba._id%5D=f),c.push(%7BuseCoreAPI:a.useCoreAPI,action:f%7D)%7D),c%7Dfunction%20i()%7Bm=%7B%7D%7Dfunction%20j(a)%7Breturn%20m%5Ba%5D%7Dvar%20k=a(%22./db.js%22),l=a(%22./helper.js%22),m=%7B%7D;c.add=e,c.get=j,c.remove=f,c.getActions=h,c.clear=i,c.removeFromMemory=g%7D,%7B%22./db.js%22:4,%22./helper.js%22:5%7D%5D,3:%5Bfunction(a,b,c)%7B%22use%20strict%22;function%20d(a)%7Bvar%20b=%5B%5D,c=%5B%5D,d=%22%22,e=%22%22,f=%22%22,g=!1;return%20a=a%7C%7C%7B%7D,d=a.type%7C%7C%22%22,e=a.id%7C%7C%22%22,f=a.propertyName%7C%7C%22%22,c=a.arr%7C%7C%5B%5D,%22undefined%22!=typeof%20a.readOnly&&(g=a.readOnly),c.forEach(function(a)%7B-1!==d.indexOf(%22@%22)?b.push(B.getSyrup().require(a)):b.push(a)%7D),b.push=function(a)%7Bvar%20b=!1;return%20g?C.readOnlyProperty(e,f):(b=-1!==d.indexOf(%22@%22),b?a&&z.inheritFrom(a.constructor.name,d.replace(%22@%22,%22%22))?(c.push(a.id()),x.state(%7Bcomponent:e,state:f,data:%5Bc.length,a.id(),%22add%22%5D%7D)):C.invalidPropertyName(e,f,a.id(),d):a&&z.isValidType(a,d)?(c.push(a),x.state(%7Bcomponent:e,state:f,data:%5Bc.length,a,%22add%22%5D%7D)):C.invalidPropertyName(e,f,a,d)),c.length%7D,b.pop=function()%7Bvar%20a,b=null,h=!1;return%20g?C.readOnlyProperty(e,f):0!==c.length&&(b=c.pop(),x.state(%7Bcomponent:b,state:f,data:%5Bc.length-1,b,%22remove%22%5D%7D),h=-1!==d.indexOf(%22@%22),a=h?J%5Bb%5D:b),a%7D,b%7Dfunction%20e(a,b)%7Bvar%20c=%5B%5D,d=%5B%5D,e=0,f=0;if(c=z.get(a)%5Bb%5D.params)for(e=c.length,f=0;e%3Ef;f++)d.push(c%5Bf%5D.name);return%20d%7Dfunction%20f(a)%7Bvar%20b=null,c=null,d=%5B%5D,e=0,f=0,g=%5B%5D;for(b=z.get(a),c=z.get(b._schema),d=Object.keys(c),e=d.length,f=0;e%3Ef;f++)(c%5Bd%5Bf%5D%5D===F%7C%7Cc%5Bd%5Bf%5D%5D===G)&&g.push(%7Bname:d%5Bf%5D,type:b%5Bd%5Bf%5D%5D.type,readOnly:b%5Bd%5Bf%5D%5D.readOnly%7D);return%20g%7Dfunction%20g(a)%7Bvar%20b=null,c=null,d=%5B%5D,e=0,f=0,g=%5B%5D;for(b=z.get(a),c=z.get(b._schema),d=Object.keys(c),e=d.length,f=0;e%3Ef;f++)c%5Bd%5Bf%5D%5D===H&&g.push(d%5Bf%5D);return%20g%7Dfunction%20h(a)%7Bvar%20b=null,c=null,d=%5B%5D,e=0,f=0,g=%5B%5D;for(b=z.get(a),c=z.get(b._schema),d=Object.keys(c),e=d.length,f=0;e%3Ef;f++)c%5Bd%5Bf%5D%5D===I&&g.push(d%5Bf%5D);return%20g%7Dfunction%20i(a)%7Bvar%20b=function(b)%7Bb=b%7C%7C%7B%7D;var%20c=%7B%7D;z.isValidObject(b,z.get(a),!0,!0)?z.prepareObject(b,z.get(a)):x.stop(%7Berror:!0,message:%22the%20parameters%20for%20creating%20a%20component%20of%20class%20'%22+a+%22'%20are%20not%20compliant%20with%20the%20model%22%7D),%22undefined%22==typeof%20b._id&&(b._id=B.generateId()),%22undefined%22!=typeof%20J%5Bb._id%5D&&C.idAlreadyUsed(b._id),J%5Bb._id%5D=this,c=function()%7Breturn%20b._id%7D,this.id=new%20Function(%22body%22,%22return%20function%20id%20()%20%7B%20return%20body.call(this)%20%7D;%22)(c),b.classInfo=a+%22Info%22,y.store%5Ba%5D%5Bb._id%5D=b,B.isSyrup()&&B.getSyrup().require(%22db%22)&&B.getSyrup().require(%22db%22).insert(a,b),Object.freeze(this),this.init&&this.init(b)%7D;return%20new%20Function(%22body%22,%22return%20function%20%22+a+%22%20(config)%20%7B%20body.call(this,config)%20%7D;%22)(b)%7Dfunction%20j(a,b)%7Bvar%20c=function()%7Breturn%20b%7D;a.id=new%20Function(%22body%22,%22return%20function%20id%20(prop,%20val)%20%7B%20return%20body.call(this,%20prop,%20val)%20%7D;%22)(c)%7Dfunction%20k(a,b,c)%7Bvar%20e=f(a);e.forEach(function(a)%7Bvar%20e=%7B%7D,f=%22%22,g=%22%22,h=%22%22;f=a.name,g=a.type,h=a.readOnly,Array.isArray(g)?(e=function(a,b)%7Bvar%20e=%5B%5D,i=null,j=null,k=null,l=null;if(%22undefined%22==typeof%20b)%7Bif(%22undefined%22==typeof%20a)return%20j=new%20d(%7Bid:this.id(),propertyName:f,readOnly:h,classId:c,type:g%5B0%5D,arr:y.store%5Bc%5D%5Bthis.id()%5D%5Bf%5D%7D);if(k=y.store%5Bc%5D%5Bthis.id()%5D%5Bf%5D%5Ba%5D)return%20l=-1!==g%5B0%5D.indexOf(%22@%22)?B.getSyrup().require(k):k%7Delse%20h?C.readOnlyProperty(this.id(),f):(z.isValidType(b,g%5B0%5D)%7C%7Cz.inheritFrom(b.constructor.name,g%5B0%5D.replace(%22@%22,%22%22))&&-1!==g%5B0%5D.indexOf(%22@%22))&&(e=y%5Bc%5D.find(%7B_id:this.id()%7D),e.length?(l=-1!==g%5B0%5D.indexOf(%22@%22)?b.id():b,i=e%5B0%5D,i%5Bf%5D%5Ba%5D=l,B.isSyrup()&&B.getSyrup().require(%22db%22).update(c,this.id(),f,l),x.state(%7Bcomponent:this.id(),state:f,data:%5Ba,l,%22add%22%5D%7D)):C.invalidPropertyName(this.id(),f,b,g))%7D,b.prototype%5Bf%5D=new%20Function(%22body%22,%22return%20function%20%22+f+%22%20(position,value)%20%7B%20return%20body.call(this,%20position,%20value)%20%7D;%22)(e)):(e=function(a)%7Bvar%20b=%5B%5D,d=null,e=null;if(%22undefined%22==typeof%20a)%7Bif(d=y.store%5Bc%5D%5Bthis.id()%5D)return%20e=d%5Bf%5D,-1!==g.indexOf(%22@%22)&&(e=t(e)),e;x.stop(%7Berror:!0,message:%22trying%20to%20get%20the%20property%20'%22+f+%22'%20on%20the%20destroyed%20component%20'%22+this.id()+%22'%22%7D)%7Delse%20h?C.readOnlyProperty(this.id(),f):z.isValidType(a,g)?(b=y%5Bc%5D.find(%7B_id:this.id()%7D),b.length&&(d=b%5B0%5D,-1!==g.indexOf(%22@%22)?d%5Bf%5D=a.id():d%5Bf%5D=a,B.isSyrup()&&B.getSyrup().require(%22db%22)&&B.getSyrup().require(%22db%22).update(c,this.id(),f,a),%22SyrupBehavior%22===c&&A.removeFromMemory(this.id()),x.state(%7Bcomponent:this.id(),state:f,data:%5Ba%5D%7D))):C.invalidPropertyName(this.id(),f,a,g)%7D,b.prototype%5Bf%5D=new%20Function(%22body%22,%22return%20function%20%22+f+%22%20(value)%20%7B%20return%20body.call(this,value)%20%7D;%22)(e))%7D)%7Dfunction%20l(a,b,c)%7Bvar%20d=g(a);d.forEach(function(a)%7Bvar%20d=e(c,a),f=d.join(%22,%22),g=function()%7Bvar%20b=null;return%20b=x.state(%7Bcomponent:this.id(),state:a,data:arguments%7D)%7D;f?b.prototype%5Ba%5D=new%20Function(%22body%22,%22return%20function%20%22+a+%22%20(%22+f+%22)%20%7B%20return%20body.call(this,%22+f+%22)%20%7D;%22)(g):b.prototype%5Ba%5D=new%20Function(%22body%22,%22return%20function%20%22+a+%22%20()%20%7B%20return%20body.call(this)%20%7D;%22)(g)%7D)%7Dfunction%20m(a,b,c)%7Bvar%20d=h(a);d.forEach(function(a)%7Bvar%20d=e(c,a),f=d.join(%22,%22),g=function()%7Bvar%20b=%5B%5D,d=-1,e=%5B%5D,f=0,g=-1,h=%7B%7D;if(%22SyrupChannel%22===c&&(b=y.SyrupSystem.find(%7Bmaster:!0%7D),b.length))%7Bfor(d=b%5B0%5D._id,h.from=d,g=arguments.length,f=0;g%3Ef;f++)e.push(arguments%5Bf%5D);h.data=e,h.event=a,y.SyrupMessage.insert(h),x.state(%7Bcomponent:this.id(),state:%22send%22,data:%5B%7Bevent:h.event,from:h.from,data:h.data%7D%5D%7D)%7Dx.state(%7Bcomponent:this.id(),state:a,data:arguments%7D)%7D;f?b.prototype%5Ba%5D=new%20Function(%22body%22,%22return%20function%20%22+a+%22%20(%22+f+%22)%20%7B%20return%20body.call(this,%22+f+%22)%20%7D;%22)(g):b.prototype%5Ba%5D=new%20Function(%22body%22,%22return%20function%20%22+a+%22%20()%20%7B%20return%20body.call(this)%20%7D;%22)(g)%7D)%7Dfunction%20n(a,b)%7Bvar%20c=function(a,c,d)%7Bvar%20e=%22%22,f=%22%22;return%20x.checkParams(%7Bcomponent:this,methodName:%22on%22,args:arguments%7D)&&(z.isValidState(a,b)?!z.isEvent(a,b)&&!z.isProperty(a,b)&&!z.isCollection(a,b)&&y.SyrupBehavior.find(%7Bcomponent:this.id(),state:a%7D).length%3E=1?C.behaviorNotUnique(b,a):D.validParamNumbers(b,a,c)?(e=A.add(this.id(),a,c,d),f=E.get(this.id()),f&&a===f.name&&x.action(e,f.parameters.data)):C.invalidParamNumberMethodOn(this.id(),a):C.invalidStateOn(b,a)),e%7D;a.prototype.on=new%20Function(%22body%22,%22return%20function%20on%20(state,handler,useCoreAPI)%20%7B%20return%20body.call(this,state,handler,useCoreAPI)%20%7D;%22)(c)%7Dfunction%20o(a,b)%7Bvar%20c=function(a,c,d)%7Bvar%20e=%22%22,f=%22%22;return%20x.checkParams(%7Bcomponent:this,methodName:%22on%22,args:arguments%7D)&&(z.isValidState(a,b)?!z.isEvent(a,b)&&!z.isProperty(a,b)&&!z.isCollection(a,b)&&y.SyrupBehavior.find(%7Bcomponent:this.id(),state:a%7D).length%3E=1?C.behaviorNotUnique(b,a):D.validParamNumbers(b,a,c)?(e=A.add(this.id(),a,c,d),f=E.get(this.id()),f&&a===f.name&&x.action(e,f.parameters.data)):C.invalidParamNumberMethodOn(this.id(),a):C.invalidStateOn(b,a)),e%7D;a.on=new%20Function(%22body%22,%22return%20function%20on%20(state,handler,useCoreAPI)%20%7B%20return%20body.call(this,%20state,%20handler,%20useCoreAPI)%20%7D;%22)(c)%7Dfunction%20p(a,b)%7Bvar%20c=function(a,c)%7Bx.checkParams(%7Bcomponent:this,methodName:%22off%22,args:arguments%7D)&&(z.isValidState(a,b)?A.remove(%7BbehaviorId:c,componentId:b,state:a%7D):C.InvalidStateOff(b,a))%7D;a.off=new%20Function(%22body%22,%22return%20function%20off%20(state,%20behaviorId)%20%7B%20return%20body.call(this,%20state,%20behaviorId)%20%7D;%22)(c)%7Dfunction%20q(a)%7Bvar%20b=function()%7Bvar%20a=this.id();y%5Ba%5D&&y%5Ba%5D.remove(),delete%20J%5Ba%5D,x.state(%7Bcomponent:a,state:%22destroy%22%7D)%7D;a.destroy=new%20Function(%22body%22,%22return%20function%20destroy%20()%20%7B%20return%20body.call(this)%20%7D;%22)(b)%7Dfunction%20r(a)%7Bvar%20b=function()%7Breturn%20t(this.id()+%22Info%22)%7D;a.classInfo=new%20Function(%22body%22,%22return%20function%20classInfo%20()%20%7B%20return%20body.call(this)%20%7D;%22)(b)%7Dfunction%20s(a)%7Ba=a%7C%7C%7B%7D;var%20b=%7B%7D,c=%22%22;return%20c=%22undefined%22==typeof%20a.model?B.generateId():a.model,b=i(c),J%5Bc%5D=b,j(b,c),k(a.model,b,c),l(a.model,b,c),m(a.model,b,c),z.inheritFrom(c,%22SyrupComponent%22)&&(n(b,c),o(b,c),p(b,c),q(b),r(b)),Object.freeze(b),b%7Dfunction%20t(a)%7Breturn%20J%5Ba%5D%7Dfunction%20u(a)%7Breturn%20s(a)%7Dfunction%20v(a)%7Bvar%20b=J%5Ba%5D,c=%22%22;b&&(delete%20J%5Ba%5D,c=b.constructor.name,y%5Bc%5D.remove(%7B_id:a%7D),%22SyrupBehavior%22===c&&A.removeFromMemory(a))%7Dfunction%20w()%7BJ=%7B%7D%7Dvar%20x=a(%22./workflow.js%22),y=a(%22./db.js%22),z=a(%22./metamodel.js%22),A=a(%22./behavior.js%22),B=a(%22./helper.js%22),C=a(%22./log.js%22),D=a(%22./workflow.js%22),E=a(%22./state.js%22),F=%22property%22,G=%22collection%22,H=%22method%22,I=%22event%22,J=%7B%7D;d.prototype=new%20Array,c.create=u,c.get=t,c.clear=w,c.destroy=v%7D,%7B%22./behavior.js%22:2,%22./db.js%22:4,%22./helper.js%22:5,%22./log.js%22:6,%22./metamodel.js%22:7,%22./state.js%22:8,%22./workflow.js%22:10%7D%5D,4:%5Bfunction(a,b,c)%7B%22use%20strict%22;function%20d()%7Bvar%20a=%7B%7D,b=%22%22,d=%22%22,e=%22%22,f=null,g=null,h=null,i=null,j=%22%22,k=0,l=0,m=%22%22;if(a.schemas=%7B%7D,c.SyrupSchema.count())for(j%20in%20r.SyrupSchema)h=JSON.parse(JSON.stringify(r.SyrupSchema%5Bj%5D)),h._core%7C%7C(a.schemas%5Bj%5D=h);if(a.types=%7B%7D,c.SyrupType.count())for(e%20in%20r.SyrupType)f=JSON.parse(JSON.stringify(r.SyrupType%5Be%5D)),delete%20f._id,f.core%7C%7C(a.types%5Bf.name%5D=f);a.behaviors=%7B%7D;for(d%20in%20r.SyrupBehavior)g=JSON.parse(JSON.stringify(r.SyrupBehavior%5Bd%5D)),delete%20g.classInfo,g.core%7C%7C(a.behaviors%5Bd%5D=g);for(a.components=%7B%7D,k=s.length,l=0;k%3El;l++)if(b=s%5Bl%5D,c%5Bb%5D.count())%7Bi=JSON.parse(JSON.stringify(r%5Bb%5D));for(m%20in%20i)delete%20i%5Bm%5D.classInfo,i%5Bm%5D._core&&delete%20i%5Bm%5D;a.components%5Bb%5D=i%7Dreturn%20a%7Dfunction%20e(a,b)%7Bvar%20c=!0,d=%22%22;for(d%20in%20a)if(%22undefined%22==typeof%20b%5Bd%5D%7C%7Cb%5Bd%5D!==a%5Bd%5D)%7Bc=!1;break%7Dreturn%20c%7Dfunction%20f(a)%7Bc%5Ba%5D=new%20v(a)%7Dfunction%20g(a)%7Bvar%20b=%22%22,e=%22%22,f=%22%22,g=%22%22,h=%22%22,i=%22%22,j=%5B%5D,k=null,m=null,o=null,p=%7B%7D;if(a)%7Bfor(g%20in%20a.types)l.type(a.types%5Bg%5D);for(h%20in%20a.schemas)l.schema(a.schemas%5Bh%5D);l.create();for(i%20in%20a.behaviors)c.SyrupBehavior.insert(a.behaviors%5Bi%5D);for(e%20in%20a.components)for(f%20in%20a.components%5Be%5D)c%5Be%5D.insert(a.components%5Be%5D%5Bf%5D);j=c.SyrupSystem.find(%7Bmaster:!0%7D),j.length&&(j%5B0%5D._id===a._id?a.master=!0:a.master=!1),c.SyrupSystem.insert(a),b=a._id%7Delse%20if(p=d(),j=c.SyrupSystem.find(%7Bmaster:!0%7D),j.length)%7Bm=j%5B0%5D,k=m._id;for(i%20in%20p.behaviors)o=p.behaviors%5Bi%5D,%22main%22===o.state&&(o.component=k);p.name=m.name,p.version=m.version,p.description=m.description,p._id=k,b=JSON.stringify(p)%7Delse%20n.masterSystemNotFound();return%20b%7Dfunction%20h(a)%7Bvar%20b=%7B%7D,d=%5B%5D,e=%22%22,f=0,g=0,h=null,i=null,j=null,k=null,l=%22%22;if(d=c.SyrupSystem.find(%7Bmaster:!0%7D),d.length&&(e=d%5B0%5D.name),b.name=a.name%7C%7C%22sub_%22+e,b.version=a.version%7C%7C%220.0.1%22,b.description=a.description%7C%7C%22%22,b.subsystem=!0,b.schemas=%7B%7D,a.schemas)for(d=c.SyrupSchema.find(a.schema),g=d.length,f=0;g%3Ef;f++)h=d%5Bf%5D,h._core%7C%7C(b.schemas%5Bh._id%5D=h);if(b.types=%7B%7D,a.types)for(d=c.SyrupType.find(a.types),g=d.length,f=0;g%3Ef;f++)i=d%5Bf%5D,i._core%7C%7C(b.types%5Bi._id%5D=i);if(b.behaviors=%7B%7D,a.behaviors)for(j=c.SyrupBehavior.find(a.behaviors),g=d.length,f=0;g%3Ef;f++)j=d%5Bf%5D,j.core%7C%7C(b.behaviors%5Bj._id%5D=j);if(b.components=%7B%7D,a.components)for(l%20in%20a.components)if(c%5Bl%5D)for(b.components%5Bl%5D=%7B%7D,d=c%5Bl%5D.find(a.components%5Bl%5D),g=d.length,f=0;g%3Ef;f++)k=d%5Bf%5D,b.components%5Bl%5D%5Bk._id%5D=k;return%20JSON.stringify(b)%7Dfunction%20i()%7Bvar%20a=0,b=0,d=%22%22;for(a=s.length,b=0;a%3Eb;b++)d=s%5Bb%5D,c%5Bd%5D.remove();for(a=t.length,b=0;a%3Eb;b++)d=t%5Bb%5D,c%5Bd%5D.remove()%7Dfunction%20j()%7Bvar%20a=%22%22,b=null;b=c.SyrupSystem.find(%7B_id:%22e89c617b6b15d24%22%7D)%5B0%5D,c.clear(),k.clear(),l.clear(),p.clear(),o.clear(),l.init(),a=c.system(b),k.get(a).main()%7Dvar%20k=a(%22./component.js%22),l=a(%22./metamodel.js%22),m=a(%22./helper.js%22),n=a(%22./log.js%22),o=a(%22./behavior.js%22),p=a(%22./state.js%22),q=a(%22./workflow.js%22),r=%7B%7D,s=%5B%5D,t=%5B%22Syrup%22,%22SyrupSchema%22,%22SyrupExtendedSchema%22,%22SyrupBehavior%22,%22SyrupState%22,%22SyrupType%22,%22SyrupMetamodel%22,%22SyrupDatabase%22,%22SyrupSystem%22,%22SyrupClassInfo%22,%22SyrupMessage%22,%22SyrupChannel%22%5D,u=%5B%22SyrupSchema%22,%22SyrupExtendedSchema%22,%22SyrupState%22,%22SyrupType%22%5D,v=function(a)%7Bl.get(a)%7C%7C-1!==t.indexOf(a)?(r%5Ba%5D=%7B%7D,this.name=a,-1===t.indexOf(a)&&s.push(a)):n.invalidCollectionName(a)%7D;v.prototype.find=function(a)%7Bvar%20b=%5B%5D,c=%22%22,d=%7B%7D;if(a=a%7C%7Cnull,a&&Object.keys(a).length)if(Array.isArray(a))a.forEach(function(a)%7Bfor(c%20in%20r%5Bthis.name%5D)d=r%5Bthis.name%5D%5Bc%5D,e(a,d)&&b.push(d)%7D.bind(this));else%20for(c%20in%20r%5Bthis.name%5D)d=r%5Bthis.name%5D%5Bc%5D,e(a,d)&&b.push(d);else%20for(c%20in%20r%5Bthis.name%5D)d=r%5Bthis.name%5D%5Bc%5D,b.push(d);return%20b%7D,v.prototype.insert=function(a)%7Bvar%20b=%5B%5D,d=null,e=%5B%5D;return%20Array.isArray(a)?b=a:b.push(a),b.forEach(function(a)%7Bvar%20b=null,f=%5B%5D,g=null,h=%5B%5D;switch(!0)%7Bcase%22SyrupSchema%22===this.name:case%22SyrupType%22===this.name:case%22SyrupExtendedSchema%22===this.name:case%20l.isValidObject(a,l.get(this.name)):%22undefined%22==typeof%20a._id&&(a._id=m.generateId()),r%5Bthis.name%5D%5Ba._id%5D=a,d=k.get(this.name),d?(b=new%20d(a),e.push(b.id())):m.isSyrup()&&m.getSyrup().require(%22db%22)&&m.getSyrup().require(%22db%22).insert(this.name,a),%22SyrupMessage%22===this.name&&m.isSyrup()&&(h=c.SyrupSystem.find(%7Bmaster:!0%7D),(!h.length%7C%7Ch.length&&h%5B0%5D._id!==a.from)&&(f=c.SyrupChannel.find(%7B%7D),f.length%3E0&&(g=m.getSyrup().require(f%5B0%5D._id),q.state(%7Bcomponent:f%5B0%5D._id,state:a.event,data:a.data%7D))));break;default:n.invalidDocumentOnDbInsert(a,this.name)%7D%7D.bind(this)),e%7D,v.prototype.update=function(a,b,c)%7Bvar%20d=this.find(a),e=0,f=0,g=d.length,h=%22%22,i=l.get(this.name),j=%22%22;%20if(c=c%7C%7C%7B%7D,%22undefined%22==typeof%20c.upsert&&(c.upsert=c.upsert%7C%7C!1),b)for(0===g&&c.upsert&&(a._id&&(b._id=a._id),this.insert(b),e+=1),f=0;g%3Ef;f++)%7B%22undefined%22!=typeof%20b._id&&b._id!==d%5Bf%5D._id&&n.updateUuid(d%5Bf%5D._id,b._id,%22undefined%22!=typeof%20k.get(b._id));for(h%20in%20b)%22undefined%22!=typeof%20d%5Bf%5D%5Bh%5D&&(j=%22%22,0!==h.indexOf(%22_%22)?j=i%5Bh%5D.type:l.getMetaDef()%5Bh%5D&&(j=l.getMetaDef()%5Bh%5D.type),j?l.isValidType(b%5Bh%5D,j)?(d%5Bf%5D%5Bh%5D=b%5Bh%5D,e+=1,m.isSyrup()&&m.getSyrup().require(%22db%22).update(this.name,d%5Bf%5D._id,h,b%5Bh%5D)):n.invalidPropertyTypeOnDbUpdate(this.name,d%5Bf%5D._id,h,b%5Bh%5D,i%5Bh%5D):n.unknownPropertyOnDbUpdate(h,d%5Bf%5D._id))%7Dreturn%20e%7D,v.prototype.remove=function(a)%7Bvar%20b=%5B%5D,c=%22%22,d=null,f=%7B%7D;if(a=a%7C%7Cnull,a&&Object.keys(a).length)if(Array.isArray(a))a.forEach(function(a)%7Bfor(c%20in%20r%5Bthis.name%5D)f=r%5Bthis.name%5D%5Bc%5D,e(a,f)&&(delete%20r%5Bthis.name%5D%5Bc%5D,d=k.get(c),d&&d.destroy(),m.isSyrup()&&m.getSyrup().require(%22db%22)&&m.getSyrup().require(%22db%22).remove(this.name,c),b.push(c))%7D.bind(this));else%20for(c%20in%20r%5Bthis.name%5D)f=r%5Bthis.name%5D%5Bc%5D,e(a,f)&&(delete%20r%5Bthis.name%5D%5Bc%5D,d=k.get(c),d&&d.destroy(),m.isSyrup()&&m.getSyrup().require(%22db%22)&&m.getSyrup().require(%22db%22).remove(this.name,c),b.push(c));else%20for(c%20in%20r%5Bthis.name%5D)delete%20r%5Bthis.name%5D%5Bc%5D,-1==u.indexOf(this.name)&&(d=k.get(c),d&&d.destroy()),m.isSyrup()&&m.getSyrup().require(%22db%22)&&m.getSyrup().require(%22db%22).remove(this.name,c),b.push(c);return%20b%7D,v.prototype.count=function()%7Bvar%20a=0,b=%22%22;for(b%20in%20r%5Bthis.name%5D)a++;return%20a%7D,c.collection=f,c.store=r,c.system=g,c.subsystem=h,c.clear=i,c.init=j%7D,%7B%22./behavior.js%22:2,%22./component.js%22:3,%22./helper.js%22:5,%22./log.js%22:6,%22./metamodel.js%22:7,%22./state.js%22:8,%22./workflow.js%22:10%7D%5D,5:%5Bfunction(a,b,c)%7B%22use%20strict%22;function%20d()%7Bvar%20a=!1;return%20h.Syrup&&h.Syrup.find().length&&(a=!0),a%7Dfunction%20e()%7Bvar%20a=%22%22;return%20j%7C%7C(d()?(a=h.Syrup.find()%5B0%5D._id,j=i.get(a)):j=%7Berror:function(a,b)%7Bconsole.error(%22syrup:%20%22+a,b)%7D,warning:function(a)%7Bconsole.warn(%22syrup:%20%22+a)%7D%7D),j%7Dfunction%20f()%7Bfunction%20a()%7Breturn%20Math.floor(65536*(1+Math.random())).toString(16)%7Dreturn%20a()+a()+a()%7Dfunction%20g()%7Bvoid%200===Function.prototype.name&&void%200!==Object.defineProperty&&Object.defineProperty(Function.prototype,%22name%22,%7Bget:function()%7Bvar%20a=/function%5Cs(%5B%5E(%5D%7B1,%7D)%5C(/,b=a.exec(this.toString());return%20b&&b.length%3E1?b%5B1%5D.trim():%22%22%7D,set:function(a)%7B%7D%7D)%7Dvar%20h=a(%22./db.js%22),i=a(%22./component.js%22),j=null;c.getSyrup=e,c.isSyrup=d,c.generateId=f,c.polyfill=g%7D,%7B%22./component.js%22:3,%22./db.js%22:4%7D%5D,6:%5Bfunction(a,b,c)%7B%22use%20strict%22;function%20d(a,b)%7Bvar%20c=%22%22;c=b%5BM%5D?%22unknown%20property%20'%22+a+%22'%20for%20the%20definition%20of%20%22+b%5BM%5D:%22unknown%20property%20'%22+a+%22'%20for%20the%20meta%20attribute%20%22+JSON.stringify(b),L.getSyrup().warning(c)%7Dfunction%20e(a,b,c)%7BL.getSyrup().warning(%22invalid%20type%20for%20property%20'%22+JSON.stringify(a)+%22':%20expected%20'%22+b+%22'%20instead%20of%20'%22+typeof%20c+%22'%22)%7Dfunction%20f(a,b)%7BL.getSyrup().warning(%22invalid%20value%20for%20the%20enum%20value%20'%22+a+%22':%20expected%20'%22+b+%22'%20instead%20of%20'%22+typeof%20a+%22'%22)%7Dfunction%20g(a,b,c)%7BL.getSyrup().warning(%22invalid%20class%20name%20for%20component%20'%22+a+%22':%20expected%20'%22+b+%22'%20instead%20of%20'%22+c+%22'%22)%7Dfunction%20h(a)%7BL.getSyrup().warning(%22missing%20property%20'%22+a+%22'%22)%7Dfunction%20i(a,b)%7BL.getSyrup().warning(%22class%20'%22+a+%22'%20is%20missing%20for%20the%20implementation%20of%20the%20class%20'%22+b+%22'%22)%7Dfunction%20j(a,b)%7BL.getSyrup().warning(%22invalid%20type%20for%20property%20'%22+a+%22'%20for%20the%20definition%20of%20'%22+b+%22'%22)%7Dfunction%20k(a,b)%7BL.getSyrup().warning(%22missing%20property%20'%22+a+%22'%20for%20the%20definition%20of%20'%22+b+%22'%22)%7Dfunction%20l(a,b)%7BL.getSyrup().warning(%22unknown%20property%20'%22+a+%22'%20for%20the%20definition%20of%20'%22+b+%22'%22)%7Dfunction%20m(a)%7BL.getSyrup().warning(%22can%20not%20load%20the%20definition%20of%20type%20'%22+a+%22'%22)%7Dfunction%20n(a,b,c,d)%7B-1!==d.indexOf(%22#%22)?L.getSyrup().warning(%22invalid%20name%20for%20property%20'%22+b+%22':%20expected%20'%22+d+%22'%20instead%20of%20'%22+c+%22'%20on%20component%20'%22+a+%22'%22):L.getSyrup().warning(%22invalid%20name%20for%20property%20'%22+b+%22':%20expected%20'%22+d+%22'%20instead%20of%20'%22+typeof%20c+%22'%20on%20component%20'%22+a+%22'%22)%7Dfunction%20o(a,b)%7BL.getSyrup().warning(%22can%20not%20set%20read-only%20property%20'%22+b+%22'%20on%20component%20'%22+a+%22'%22)%7Dfunction%20p(a,b)%7BL.getSyrup().warning(%22invalid%20document%20'%22+JSON.stringify(a)+%22'%20on%20an%20insert%20operation%20on%20collection%20'%22+b+%22'%22)%7Dfunction%20q(a,b,c,d,e)%7B-1!==e.indexOf(%22#%22)?L.getSyrup().warning(%22invalid%20type%20for%20property%20'%22+c+%22'%20on%20an%20update%20operation%20on%20collection%20'%22+a+%22':%20expected%20'%22+e+%22'%20instead%20of%20'%22+d+%22'%20on%20component%20'%22+b+%22'%22):L.getSyrup().warning(%22invalid%20type%20for%20property%20'%22+c+%22'%20on%20an%20update%20operation%20on%20collection%20'%22+a+%22':%20expected%20'%22+e+%22'%20instead%20of%20'%22+typeof%20d+%22'%20on%20component%20'%22+b+%22'%22)%7Dfunction%20r(a,b)%7BL.getSyrup().warning(%22unknown%20property%20'%22+a+%22'%20on%20an%20update%20operation%20on%20component%20'%22+b+%22'%22)%7Dfunction%20s(a,b)%7BL.getSyrup().warning(%22try%20to%20call%20an%20unknown%20method%20'%22+b+%22'%20for%20the%20class%20'%22+a+%22'%22)%7Dfunction%20t(a)%7BL.getSyrup().warning(%22invalid%20name%20for%20creating%20the%20collection%20'%22+a+%22':%20there%20is%20no%20schema%20'%22+a+%22'%20in%20the%20metamodel%22)%7Dfunction%20u(a,b)%7BL.getSyrup().warning(%22invalid%20type%20on%20the%20result%20of%20method%20'%22+b+%22'%20on%20component%20'%22+a+%22'%22)%7Dfunction%20v(a,b)%7BL.getSyrup().warning(%22unkown%20class%20component%20'%22+a+%22'%20for%20component%20'%22+b+%22'%22)%7Dfunction%20w()%7BL.getSyrup().warning(%22syrup%20has%20been%20restarted%22)%7Dfunction%20x(a,b)%7BL.getSyrup().warning(%22invalid%20number%20of%20parameters%20when%20calling%20the%20method%20'%22+b+%22'%20on%20component%20'%22+a+%22'%22)%7Dfunction%20y(a,b,c)%7BL.getSyrup().warning(%22invalid%20type%20for%20the%20parameter%20'%22+c+%22'%20when%20calling%20the%20method%20'%22+b+%22'%20on%20component%20'%22+a+%22'%22)%7Dfunction%20z(a,b)%7BL.getSyrup().warning(%22try%20to%20add%20more%20than%20one%20behavior%20for%20the%20state%20'%22+b+%22'%20on%20component%20class%20'%22+a+%22'%22)%7Dfunction%20A(a,b)%7BL.getSyrup().warning(%22try%20to%20add%20a%20behavior%20with%20an%20unkwown%20state%20'%22+b+%22'%20on%20component%20class%20'%22+a+%22'%22)%7Dfunction%20B(a,b)%7BL.getSyrup().warning(%22try%20to%20remove%20a%20behavior%20from%20an%20unkwown%20state%20'%22+b+%22'%20on%20component%20class%20'%22+a+%22'%22)%7Dfunction%20C()%7BL.getSyrup().warning(%22the%20master%20system%20is%20not%20found%22)%7Dfunction%20D(a,b)%7BL.getSyrup().warning(%22invalid%20type%20for%20value%20'%22+JSON.stringify(a)+%22':%20expected%20'%22+b+%22'%22)%7Dfunction%20E(a)%7BL.getSyrup().warning(%22unknown%20type%20for%20value%20'%22+JSON.stringify(a)+%22'%22)%7Dfunction%20F(a,b)%7BL.getSyrup().warning(%22can%20not%20yet%20validate%20if%20the%20component%20'%22+JSON.stringify(a)+%22'%20is%20an%20instance%20of%20'%22+b+%22'%22)%7Dfunction%20G(a,b,c)%7BL.getSyrup().warning(%22invalid%20type%20for%20the%20message%20'%22+JSON.stringify(a)+%22':%20expected%20type%20'%22+c+%22'%20for%20event%20'%22+b+%22'%22)%7Dfunction%20H(a,b)%7BL.getSyrup().warning(%22invalid%20number%20of%20parameters%20when%20adding%20an%20action%20on%20method%20'%22+b+%22'%20on%20component%20'%22+a+%22'%22)%7Dfunction%20I(a)%7BL.getSyrup().warning(%22try%20to%20create%20a%20component%20with%20the%20id%20'%22+a+%22'%20that%20is%20already%20used%20by%20another%20component%22)%7Dfunction%20J(a,b,c)%7Bc?L.getSyrup().warning(%22try%20to%20update%20a%20component%20of%20id%20'%22+a+%22'%20with%20the%20new%20id%20'%22+b+%22'%20that%20is%20already%20used%22):L.getSyrup().warning(%22try%20to%20update%20a%20component%20of%20id%20'%22+a+%22'%20with%20the%20new%20id%20'%22+b+%22'%22)%7Dfunction%20K(a)%7BL.getSyrup().warning(%22try%20to%20change%20the%20state%20of%20the%20destroyed%20component%20'%22+a+%22'%22)%7Dvar%20L=a(%22./helper.js%22),M=%22_id%22;c.unknownProperty=d,c.invalidPropertyType=e,c.invalidEnumValue=f,c.invalidClassName=g,c.missingProperty=h,c.missingImplementation=i,c.invalidTypeImp=j,c.missingPropertyImp=k,c.unknownPropertyImp=l,c.invalidTypeDefinition=m,c.invalidPropertyName=n,c.readOnlyProperty=o,c.invalidDocumentOnDbInsert=p,c.invalidPropertyTypeOnDbUpdate=q,c.unknownMethod=s,c.invalidCollectionName=t,c.invalidResultType=u,c.unknownComponent=v,c.workflowRestarted=w,c.invalidParamNumber=x,c.invalidParamType=y,c.behaviorNotUnique=z,c.invalidStateOn=A,c.invalidStateOff=B,c.masterSystemNotFound=C,c.invalidType=D,c.unknownType=E,c.canNotYetValidate=F,c.invalidChannelEvent=G,c.invalidParamNumberMethodOn=H,c.idAlreadyUsed=I,c.updateUuid=J,c.unknownPropertyOnDbUpdate=r,c.invalidUseOfComponent=K%7D,%7B%22./helper.js%22:5%7D%5D,7:%5Bfunction(a,b,c)%7B%22use%20strict%22;function%20d()%7Bfunction%20a(b,c)%7Bvar%20d=0,e=0;if(ea.inheritance%5Bc%5D&&(e=ea.inheritance%5Bc%5D.length))for(ea.inheritanceTree%5Bb%5D=ea.inheritanceTree%5Bb%5D.concat(ea.inheritance%5Bc%5D),d=0;e%3Ed;d++)a(b,ea.inheritance%5Bc%5D%5Bd%5D)%7Dvar%20b=null,c=null,d=0,e=0;for(b%20in%20ea.inheritance)for(e=ea.inheritance%5Bb%5D.length,e&&(ea.inheritanceTree%5Bb%5D=ea.inheritance%5Bb%5D),d=0;e%3Ed;d++)c=ea.inheritance%5Bb%5D%5Bd%5D,a(b,c)%7Dfunction%20e(a)%7Bvar%20b=%7B%7D,c=ea.catalog%5Ba%5D,d=ea.inheritanceTree%5Ba%5D,e=0,f=0,g=null,h=%22%22;for(d&&(e=d.length,d.reverse()),f=0;e%3Ef;f++)%7Bg=ea.catalog%5Bd%5Bf%5D%5D;for(h%20in%20g)0!==h.indexOf(%22_%22)&&(b%5Bh%5D=g%5Bh%5D)%7Dfor(h%20in%20c)b%5Bh%5D=c%5Bh%5D;return%20b%7Dfunction%20f()%7Bvar%20a=%22%22;for(a%20in%20ea.catalog)ea.model%5Ba%5D=e(a)%7Dfunction%20g()%7Bvar%20a=%22%22,b=null,c=%22%22;for(a%20in%20ea.model)b=ea.model%5Ba%5D,b&&%22undefined%22!=typeof%20b%5BX%5D&&(c=ea.model%5Bb%5BX%5D%5D,c?(i(b,c),ea.implementation%5Bb%5BU%5D%5D=c%5BU%5D):R.missingImplementation(b%5BX%5D,b%5BU%5D))%7Dfunction%20h()%7Bvar%20a=%22%22,b=null,c=%22%22,d=%5B%5D,e=%22%22;for(a%20in%20ea.model)%7Bif(d=%5B%5D,b=ea.model%5Ba%5D,b&&%22undefined%22==typeof%20b%5BX%5D)for(e%20in%20b)c=b%5Be%5D,0!==e.indexOf(%22_%22)&&-1!==ca.indexOf(c)&&d.push(e);ea.states%5Ba%5D=d%7D%7Dfunction%20i(a,b)%7Bvar%20c=%22%22,d=null;for(c%20in%20b)c!==U&&c!==V&&c!==W&&c!==X&&c!==Y&&c!==Z&&(%22undefined%22!=typeof%20a%5Bc%5D?(d=a%5Bc%5D,j(d,b%5Bc%5D)%7C%7CR.invalidTypeImp(c,a%5BU%5D)):R.missingPropertyImp(c,a%5BU%5D));for(c%20in%20a)c!==U&&c!==V&&c!==W&&c!==X&&c!==Y&&c!==Z&&%22undefined%22==typeof%20b%5Bc%5D&&R.unknownPropertyImp(c,a%5BU%5D)%7Dfunction%20j(a,b)%7Bvar%20c=!0;return%20c=v(b,%22string%22)&&-1!==da.indexOf(b)?v(a,b):k(a,b)%7Dfunction%20k(a,b)%7Bvar%20c=!0,d=ea.type%5Bb%5D,e=0,f=0;if(v(d,%22undefined%22))c=!1;else%20if(v(a,%22undefined%22))c=!1;else%20if(%22array%22===d.type)for(e=a.length,f=0;e%3Ef&&(c=v(d.schema,%22undefined%22)?H(a%5Bf%5D,d.type):J(a%5Bf%5D,d.schema),c!==!1);f++);else%20c=v(d.schema,%22undefined%22)?H(a,d.type):J(a,d.schema);return%20c%7Dfunction%20l()%7BQ.collection(%22SyrupSchema%22),Q.collection(%22SyrupExtendedSchema%22),Q.collection(%22SyrupClassInfo%22),Q.collection(%22SyrupBehavior%22),Q.collection(%22SyrupState%22),Q.collection(%22SyrupType%22),Q.collection(%22SyrupMessage%22),Q.collection(%22SyrupChannel%22)%7Dfunction%20m()%7Bvar%20a=%22%22,b=%7B%7D,c=%22%22;for(a%20in%20ea.catalog)b=ea.catalog%5Ba%5D,Q.SyrupSchema.insert(b),%22undefined%22!=typeof%20b%5BX%5D&&%22undefined%22==typeof%20Q%5Bb%5BU%5D%5D&&b%5BY%5D!==!1&&Q.collection(b%5BU%5D);for(a%20in%20ea.model)b=ea.model%5Ba%5D,Q.SyrupExtendedSchema.insert(b);for(c%20in%20ea.type)b=ea.type%5Bc%5D,b._id=b.name,Q.SyrupType.insert(b)%7Dfunction%20n()%7Bvar%20a=%22%22,b=%7B%7D;for(a%20in%20ea.model)b=ea.model%5Ba%5D,%22undefined%22!=typeof%20b%5BX%5D&&b%5BY%5D!==!1&&S.create(%7Bmodel:a%7D)%7Dfunction%20o()%7Bvar%20a=%22%22,b=%7B%7D,c=%22%22;for(a%20in%20ea.model)b=ea.model%5Ba%5D,c=b._id+%22Info%22,%22undefined%22!=typeof%20b%5BX%5D&&b%5BY%5D!==!1&&(S.get(c)?Q.SyrupClassInfo.update(%7B_id:c%7D,%7B_id:c,metamodel:ea.model%5Bb%5BX%5D%5D,model:b%7D):Q.SyrupClassInfo.insert(%7B_id:c,metamodel:ea.model%5Bb%5BX%5D%5D,model:b%7D))%7Dfunction%20p(a)%7Breturn%20a.replace(%22@%22,%22%22)%7Dfunction%20q(a)%7Bvar%20b=v(a,%22string%22)&&-1===da.indexOf(a)&&!r(a);return%20b%7Dfunction%20r(a)%7Breturn-1!==a.indexOf(%22@%22)%7Dfunction%20s(a)%7Bvar%20b=%22%22;return%20b=Array.isArray(a)?%22array%22:typeof%20a%7Dfunction%20t(a)%7Breturn%20a.constructor.name%7Dfunction%20u(a,b)%7Breturn-1!==b.indexOf(a)%7Dfunction%20v(a,b)%7Bvar%20c=!0;switch(b)%7Bcase%22array%22:c=Array.isArray(a);break;default:c=b===typeof%20a%7Dreturn%20c%7Dfunction%20w(a,b,c)%7Bvar%20d=!1,e=ea.model%5Bb%5D,f=%22%22;return%20e&&e%5BX%5D&&(e=ea.model%5Be%5BX%5D%5D),e&&(f=e%5Ba%5D,f===c&&(d=!0)),d%7Dfunction%20x(a)%7Bvar%20b=a%5BU%5D,c=a%5BW%5D,d=a%5BV%5D;v(b,%22undefined%22)&&(b=d,a%5BU%5D=d),K(a,ea.metadef.schema,!1)?(ea.catalog%5Bb%5D=a,c&&(ea.inheritance%5Bb%5D=c)):T.stop(%7Berror:!0,message:%22the%20schema%20'%22+JSON.stringify(a)+%22'%20is%20not%20valid%22%7D)%7Dfunction%20y(a)%7Bvar%20b=a.name;K(a,ea.metadef.type)?b?ea.type%5Bb%5D=a:R.invalidTypeDefinition(a):T.stop(%7Berror:!0,message:%22the%20type%20'%22+JSON.stringify(a)+%22'%20is%20not%20valid%22%7D)%7Dfunction%20z()%7BA(),ea.metadef=%7Bschema:%7B_id:%7Btype:%22string%22,mandatory:!0%7D,_name:%7Btype:%22string%22,mandatory:!0%7D,_inherit:%7Btype:%5B%22string%22%5D,mandatory:!1%7D,_schema:%7Btype:%22string%22,mandatory:!1%7D,_class:%7Btype:%22boolean%22,mandatory:!1%7D,_core:%7Btype:%22boolean%22,mandatory:!1%7D%7D,type:%7Bname:%7Btype:%22string%22,mandatory:!0%7D,type:%7Btype:%22string%22,mandatory:!0%7D,schema:%7Btype:%22object%22,mandatory:!1%7D,value:%7Btype:%5B%22string%22%5D,mandatory:!1%7D,core:%7Btype:%22boolean%22,mandatory:!1%7D%7D%7D,l()%7Dfunction%20A()%7Bea=%7Bmetadef:%7B%7D,catalog:%7B%7D,inheritance:%7B%7D,inheritanceTree:%7B%7D,model:%7B%7D,states:%7B%7D,type:%7B%7D,implementation:%7B%7D%7D%7Dfunction%20B()%7Bd(),f(),g(),h(),m(),n(),o()%7Dfunction%20C(a,b)%7Breturn%20w(a,b,_)%7Dfunction%20D(a,b)%7Breturn%20w(a,b,aa)%7Dfunction%20E(a,b)%7Breturn%20w(a,b,ba)%7Dfunction%20F(a,b)%7Breturn%20w(a,b,$)%7Dfunction%20G(a,b)%7Bvar%20c=!1,d=ea.model%5Bb%5D,e=%7B%7D;return%20d&&d%5BX%5D&&(d=ea.model%5Bd%5BX%5D%5D),e=ea.states%5Bd%5BU%5D%5D,Array.isArray(e)&&(c=-1!==e.indexOf(a)),c%7Dfunction%20H(a,b)%7Bfunction%20c(a,b)%7Bvar%20c=!0,d=p(b);return%20v(a,%22string%22)&&(a=S.get(a)),t(a)!==d&&(c=!1,R.invalidType(a,b.replace(%22@%22,%22%22))),c%7Dvar%20d=!0;if(v(b,%22undefined%22))R.invalidType(a,b);else%20switch(!0)%7Bcase%20q(b):d=k(a,b);break;case%20r(b):d=c(a,b);break;default:d=v(a,b)%7Dreturn%20d%7Dfunction%20I(a,b)%7Bfunction%20c(a,b)%7Bvar%20c=!1,d=%22%22;return%20d=a.constructor.name,%22Function%22===d&&(d=a.name),c=d===b%7Dvar%20d=!0;return%20r(b.type)?(d=c(S.get(a),p(b.type))&&-1!==b.value.indexOf(a),d%7C%7CR.invalidEnumValue(a,b.type)):(d=v(a,b.type)&&-1!==b.value.indexOf(a),d%7C%7CR.invalidEnumValue(a,b.type)),d%7Dfunction%20J(a,b)%7Bfunction%20c()%7Bvar%20b=!0,c=%5B%5D;return%20j=p(i),j=a%5Bj%5D,q(j)?ea.type%5Bj%5D?ea.type%5Bj%5D.schema?b=J(f,ea.type%5Bj%5D.schema):(b=v(f,ea.type%5Bj%5D.type),c=ea.type%5Bj%5D.value,c&&(b=u(f,c))):b=!1:b=%22array%22===j?Array.isArray(f):r(j)?v(f,%22object%22):v(f,j),b%7C%7CR.invalidPropertyType(f,j,f),b%7Dfunction%20d()%7Bvar%20a=!0;switch(k=s(i))%7Bcase%22string%22:if(q(k))a=J(f,i);else%20if(!v(f,i))%7BR.invalidPropertyType(e,i,f),a=!1;break%7Dbreak;case%22array%22:for(l=f.length,m=0;l%3Em;m++)if(q(i%5B0%5D))a=J(f%5Bm%5D,ea.type%5Bi%5B0%5D%5D.schema);else%20if(!v(f%5Bm%5D,i%5B0%5D))%7BR.invalidPropertyType(f%5Bm%5D,i%5B0%5D,f%5Bm%5D),a=!1;break%7D%7Dreturn%20a%7Dvar%20e=%22%22,f=null,g=!0,h=!0,i=%22%22,j=%22%22,k=%22%22,l=0,m=0;for(e%20in%20a)%7Bif(f=a%5Be%5D,v(b%5Be%5D,%22undefined%22))return%20R.unknownProperty(e,b),!1;switch(i=b%5Be%5D.type,!0)%7Bcase%20r(i):g=c();break;default:g=d()%7D%7Dfor(e%20in%20b)if(f=b%5Be%5D,h=f.mandatory,h===!0&&v(a%5Be%5D,%22undefined%22))%7BR.missingProperty(e),g=!1;break%7Dreturn%20g%7Dfunction%20K(a,b,c,d)%7Bfunction%20e(a,b)%7Bvar%20c=!0,d=%22%22;if(d=ea.type%5Bb%5D)switch(!0)%7Bcase!v(d.schema,%22undefined%22):c=K(a,d.schema);break;case!v(d.value,%22undefined%22):c=I(a,d);break;default:c=H(a,d.type)%7Delse%20c=!1;return%20c%7Dfunction%20f(b,c)%7Bvar%20e=!0,f=null,g=!1;if(m=p(c),b&&b.id?(f=b,g=!0):f=S.get(b),v(f,%22undefined%22))switch(!0)%7Bcase%20v(b,%22object%22)&&null!==b&&Object.keys(b).length%3E0:case%20v(b,%22string%22):R.canNotYetValidate(b,m)%7Delse%20t(f)!==m?(e=!1,R.invalidType(b,m)):g&&d&&(a%5Bh%5D=f.id());return%20e%7Dfunction%20g(a,b)%7Bvar%20c=!0,e=%22%22;switch(n=s(b))%7Bcase%22string%22:if(q(n))c=K(a,b);else%20if(%22array%22===b)%7Bif(%22array%22!==s(a))%7BR.invalidPropertyType(h,b,a),c=!1;break%7D%7Delse%20if(s(a)!==b)%7BR.invalidPropertyType(h,b,a),c=!1;break%7Dbreak;case%22array%22:if(Array.isArray(a))%7Bfor(o=a.length,e=b%5B0%5D,u=0;o%3Eu;u++)if(q(e))c=K(a%5Bu%5D,ea.type%5Be%5D.schema);else%20if(r(e))if(%22string%22===s(a%5Bu%5D))%7Bif(t(S.get(a%5Bu%5D))!==p(e))%7BR.invalidClassName(JSON.stringify(a%5Bu%5D),p(e),t(a%5Bu%5D)),c=!1;break%7D%7Delse%7Bif(t(a%5Bu%5D)!==p(e))%7BR.invalidClassName(JSON.stringify(a%5Bu%5D),p(e),t(a%5Bu%5D)),c=!1;break%7Dd&&(a%5Bu%5D=a%5Bu%5D.id())%7Delse%20if(s(a%5Bu%5D)!==e)%7BR.invalidPropertyType(a%5Bu%5D,e,a%5Bu%5D),c=!1;break%7D%7Delse%20c=!1,R.invalidType(a,%22array%22);break;default:c=!1,R.unknownType(a)%7Dreturn%20c%7Dvar%20h=%22%22,i=null,j=!0,k=!0,l=%22%22,m=%22%22,n=%22%22,o=0,u=0;v(c,%22undefined%22)&&(c=!0),v(d,%22undefined%22)&&(c=!1);for(h%20in%20a)if(i=a%5Bh%5D,v(b%5Bh%5D,%22undefined%22)&&%22_core%22!==h)%7Bif(c)return%20R.unknownProperty(h,b),!1%7Delse%20switch(l=%22_core%22!==h?b%5Bh%5D.type:%22boolean%22,%22_id%22===h&&(l=%22string%22),!0)%7Bcase%20q(l):j=e(i,l);break;case%20r(l):j=f(i,l);break;default:j=g(i,l)%7Dfor(h%20in%20b)i=b%5Bh%5D,k=i.mandatory,v(a%5Bh%5D,%22undefined%22)&&k===!0&&(R.missingProperty(h),j=!1);return%20j%7Dfunction%20L(a,b)%7Bvar%20c=%22%22,d=null,e=!0,f=%22%22;for(c%20in%20b)d=b%5Bc%5D,e=d.mandatory,f=d%5B%22default%22%5D,v(a%5Bc%5D,%22undefined%22)&&(e!==!1%7C%7Cv(f,%22undefined%22)%7C%7C(a%5Bc%5D=f))%7Dfunction%20M(a)%7Bvar%20b=null;return%20ea.model%5Ba%5D&&(b=ea.model%5Ba%5D),b%7Dfunction%20N()%7Bvar%20a=ea.metadef.schema;return%20a%7Dfunction%20O(a)%7Bvar%20b=%5B%5D,c=null;return%20c=ea.model%5Ba%5D,c&&(b=c%5BW%5D),b%7C%7C(b=%5B%5D),b%7Dfunction%20P(a,b)%7Bfunction%20c(a,b)%7Bvar%20d=!1,e=%5B%5D,f=0,g=0;if(e=O(a),0!==e.length)if(-1!==e.indexOf(b))d=!0;else%20for(f=0;g%3Ef&&!(d=c(e%5Bf%5D,b));f++);return%20d%7Dvar%20d=!1,e=%5B%5D,f=0,g=0;if(a!==b)%7Bif(e=O(a),g=e.length,0!==e.length)if(-1!==e.indexOf(b))d=!0;else%20for(f=0;g%3Ef&&!(d=c(e%5Bf%5D,b));f++);%7Delse%20d=!0;return%20d%7Dvar%20Q=a(%22./db.js%22),R=a(%22./log.js%22),S=a(%22./component.js%22),T=a(%22./workflow.js%22),U=%22_id%22,V=%22_name%22,W=%22_inherit%22,X=%22_schema%22,Y=%22_class%22,Z=%22_core%22,$=%22method%22,_=%22event%22,aa=%22property%22,ba=%22collection%22,ca=%5B%22property%22,%22collection%22,%22method%22,%22event%22%5D,da=%5B%22boolean%22,%22string%22,%22number%22,%22object%22,%22function%22,%22array%22%5D,ea=%7Bmetadef:%7B%7D,catalog:%7B%7D,inheritance:%7B%7D,inheritanceTree:%7B%7D,model:%7B%7D,states:%7B%7D,type:%7B%7D,implementation:%7B%7D%7D;c.init=z,c.clear=A,c.schema=x,c.type=y,c.create=B,c.get=M,c.getMetaDef=N,c.getParents=O,c.inheritFrom=P,c.isValidObject=K,c.prepareObject=L,c.isValidType=H,c.isValidEnum=I,c.isValidState=G,c.isEvent=C,c.isProperty=D,c.isCollection=E,c.isMethod=F%7D,%7B%22./component.js%22:3,%22./db.js%22:4,%22./log.js%22:6,%22./workflow.js%22:10%7D%5D,8:%5Bfunction(a,b,c)%7B%22use%20strict%22;function%20d(a,b,c)%7Bh%5Ba%5D=%7Bname:b,parameters:%7Bdata:c%7D%7D,g.store.SyrupState%5Ba%5D=%7Bname:b,parameters:%7Bdata:c%7D%7D%7Dfunction%20e(a)%7Breturn%20h%5Ba%5D%7Dfunction%20f()%7Bh=%7B%7D%7Dvar%20g=a(%22./db.js%22),h=%7B%7D;c.set=d,c.get=e,c.clear=f%7D,%7B%22./db.js%22:4%7D%5D,9:%5Bfunction(a,b,c)%7B%22use%20strict%22;var%20d=a(%22./db.js%22),e=a(%22./component.js%22),f=a(%22./metamodel.js%22),g=a(%22../build/system/system.js%22),h=a(%22./helper.js%22),i=%22%22,j=%22%22;h.polyfill(),f.init(),i=d.system(g.system),j=e.get(i),j.main(),b.exports=e.get(%22syrup%22)%7D,%7B%22../build/system/system.js%22:1,%22./component.js%22:3,%22./db.js%22:4,%22./helper.js%22:5,%22./metamodel.js%22:7%7D%5D,10:%5Bfunction(a,b,c)%7B%22use%20strict%22;function%20d(a)%7Bthis.message=a,this.name=%22SyrupError%22%7Dfunction%20e(a,b)%7Bvar%20c=null,d=%5B%5D,e=%5B%5D,f=0,g=0;if(c=s.get(a)%5Bb%5D)%7Bif(d=c.params)for(f=d.length,g=0;f%3Eg;g++)e.push(d%5Bg%5D.name)%7Delse%20x.unknownMethod(a,b);return%20e%7Dfunction%20f(a,b)%7Bvar%20c=null,d=%5B%5D,e=%5B%5D,f=0,g=0,h=0,i=0;if(c=s.get(a)%5Bb%5D)%7Bif(d=c.params)for(f=d.length,g=0;f%3Eg;g++)(%22undefined%22==typeof%20d%5Bg%5D.mandatory%7C%7Cd%5Bg%5D.mandatory===!0)&&(h+=1),i+=1;e.push(h),e.push(i)%7Delse%20x.unknownMethod(a,b);return%20e%7Dfunction%20g(a,b,c)%7Bvar%20d=null,e=%5B%5D,f=%5B%5D,g=0,h=0;if(d=s.get(a)%5Bb%5D)%7Bif(e=d.params)for(g=e.length,h=0;g%3Eh;h++)e%5Bh%5D.mandatory===!1&&%22undefined%22==typeof%20c%5Bh%5D?f.push(e%5Bh%5D%5B%22default%22%5D):f.push(c%5Bh%5D)%7Delse%20x.unknownMethod(a,b);return%20f%7Dfunction%20h(a,b)%7Bvar%20c=null,d=null;return%20c=s.get(a)%5Bb%5D.result,c&&(d=c),d%7Dfunction%20i(a,b)%7Bvar%20c=null,d=%5B%5D,e=%5B%5D,f=0,g=0;if(c=s.get(a)%5Bb%5D)%7Bif(d=c.params)for(f=d.length,g=0;f%3Eg;g++)e.push(d%5Bg%5D.type)%7Delse%20x.unknownMethod(a,b);return%20e%7Dfunction%20j(a)%7Ba=a%7C%7C%7B%7D;var%20b=a.component%7C%7Cnull,c=a.methodName%7C%7C%22%22,d=a.methodResult%7C%7Cvoid%200,e=%22%22,f=null,g=!0;return%20e=%22Function%22===b.constructor.name?b.name:b.constructor.name,f=h(e,c),null!==f&&(%22array%22===f?Array.isArray(d)%7C%7C(g=!1,x.invalidResultType(b.id(),c)):typeof%20d!==f&&(g=!1,x.invalidResultType(b.id(),c))),g%7Dfunction%20k(a,b,c)%7Bvar%20d=u.getActions(a.id(),b),e=%5B%5D,f=0,g=0,h=null;if(!d.length%7C%7Cc)if(%22Function%22!==a.constructor.name)d=d.concat(k(t.get(a.constructor.name),b,c));else%20for(e=s.getParents(a.name),f=e.length,g=0;f%3Eg&&(h=t.get(e%5Bg%5D),h?d=d.concat(k(h,b,c)):x.unknownComponent(e%5Bg%5D,a.name),!d.length);g++);return%20d.length&&d.reverse(),d%7Dfunction%20l(a,b,e,f,h)%7Bvar%20i=null,j=%5B%5D,k=0,l=0;s.isProperty(b,a.constructor.name)%7C%7Cs.isCollection(b,a.constructor.name)%7C%7C(f=g(a.constructor.name,b,f));try%7Bfor(l=f.length,k=0;l%3Ek;k++)j.push(f%5Bk%5D);e.useCoreAPI&&(j.push(t),j.push(y),j.push(s),j.push(c),j.push(u),j.push(v)),h?setTimeout(e.action.bind.apply(e.action,%5Ba%5D.concat(j)),0):i=e.action.apply(a,j)%7Dcatch(m)%7Bif(m%20instanceof%20d)throw%20m;a&&a.error&&a.error(%7Bmessage:%22error%20when%20trying%20to%20call%20the%20method%20'%22+b+%22'%20on%20component%20'%22+a.id()+%22'%22,error:m%7D),w.getSyrup()&&w.getSyrup().error(%7Bmessage:%22error%20when%20trying%20to%20call%20the%20method%20'%22+b+%22'%20on%20component%20'%22+a.id()+%22'%22,error:m%7D)%7Dreturn%20i%7Dfunction%20m(a,b,c)%7Bvar%20d=%22%22,e=-1,g=%22%22,h=%22%22,i=%5B%5D,j=0,k=%5B%5D,l=!1,m=!1,n=!1;switch(d=c.toString(),e=d.indexOf(%22%7B%22),g=d.substring(0,e),h=g.split(%22(%22)%5B1%5D.replace(%22)%22,%22%22).trim(),i=h.split(%22,%22),%22%22===i%5B0%5D&&(i=%5B%5D),j=i.length,l=s.isProperty(b,a),m=s.isCollection(b,a),!0)%7Bcase%20m:k=%5B3,3%5D;break;case%20l:k=%5B1,1%5D;break;default:k=f(a,b)%7Dreturn%20k%5B0%5D%3C=j&&j%3C=k%5B1%5D&&(n=!0),n%7Dfunction%20n(a)%7Ba=a%7C%7C%7B%7D;var%20b=a.component%7C%7Cnull,c=a.methodName%7C%7C%22%22,d=a.args%7C%7C%22%22,g=%5B%5D,h=%5B%5D,j=%5B%5D,k=%22%22,l=d.length,m=0,n=null,o=!0,p=!1,q=!1;switch(k=%22Function%22===b.constructor.name?b.name:b.constructor.name,p=s.isProperty(c,k),q=s.isCollection(c,k),g=e(k,c),!0)%7Bcase%20q:h=%5B%22number%22,s.get(k)%5Bc%5D.type%5B0%5D,%22string%22%5D,j=%5B3,3%5D;break;case%20p:h=%5Bs.get(k)%5Bc%5D.type%5D,j=%5B1,1%5D;break;default:h=i(k,c),j=f(k,c)%7Dfor(%22undefined%22==typeof%20l&&(l=1),-1===j.indexOf(l)&&(o=!1,x.invalidParamNumber(b.id(),c)),m=0;l%3Em;m++)if(n=d%5Bm%5D,%22undefined%22==typeof%20n)%7Bif(!(m%3Cj%5B0%5D))continue;o=!1,x.invalidParamNumber(b.id(),c)%7Delse%20s.isValidType(n,h%5Bm%5D)%7C%7C(o=!1,x.invalidParamType(b.id(),c,g%5Bm%5D));return%20o%7Dfunction%20o(a,b)%7Bvar%20c=!1,d=!1,e=!1,f=%5B%5D,g=null,h=null,i=null;f=y.SyrupBehavior.find(%7B_id:a%7D),i=u.get(a),1===f.length&&(g=f%5B0%5D,h=t.get(g.component),h&&(c=s.isEvent(g.state,h.constructor.name),d=s.isProperty(g.state,h.constructor.name),e=s.isCollection(g.state,h.constructor.name),(c%7C%7Cd%7C%7Ce)&&l(h,g.state,%7BuseCoreAPI:g.useCoreAPI,action:i%7D,b,!0)))%7Dfunction%20p(a)%7Ba=a%7C%7C%7B%7D,a.component=a.component%7C%7C%22%22,a.state=a.state%7C%7C%22%22,a.data=a.data%7C%7C%5B%5D;var%20b=null,c=%22%22,d=%5B%5D,e=null,f=null,g=0,h=0,i=!1,m=!1,o=!1;if(c=v.get(a.component),%22destroy%22===c&&x.invalidUseOfComponent(a.component),b=t.get(a.component),b&&(o=s.isEvent(a.state,b.constructor.name),i=s.isProperty(a.state,b.constructor.name),m=s.isCollection(a.state,b.constructor.name),d=k(b,a.state,o)),d.length)%7Bif(n(%7Bcomponent:b,methodName:a.state,args:a.data%7D))if(o%7C%7Ci%7C%7Cm)%7Bfor(h=d.length,g=0;h%3Eg;g++)e=d%5Bg%5D,l(b,a.state,e,a.data,!0);v.set(b.id(),a.state,a.data)%7Delse%20e=d%5B0%5D,f=l(b,a.state,e,a.data,!1),j(%7Bcomponent:b,methodName:a.state,methodResult:f%7D);return%20f%7Db&&(o%7C%7Ci%7C%7Cm)&&v.set(b.id(),a.state,a.data)%7Dfunction%20q(a)%7Bif(a=a%7C%7C%7B%7D,%22undefined%22==typeof%20a.error&&(a.error=!1),a.message=a.message%7C%7C%22%22,c.state=function()%7B%7D,a.error)throw%20new%20d(a.message?%22syrup%20has%20been%20stopped%20because%20%22+a.message:%22syrup%20has%20been%20stopped%20because%20of%20an%20unknown%20error%22);console.warn(%22syrup:%20syrup%20has%20been%20stopped%22)%7Dfunction%20r()%7Bc.state=p,x.workflowRestarted()%7Dvar%20s=a(%22./metamodel.js%22),t=a(%22./component.js%22),u=a(%22./behavior.js%22),v=a(%22./state.js%22),w=a(%22./helper.js%22),x=a(%22./log.js%22),y=a(%22./db.js%22);d.prototype=new%20Error,d.prototype.constructor=d,c.state=p,c.stop=q,c.restart=r,c.checkParams=n,c.validParamNumbers=m,c.action=o%7D,%7B%22./behavior.js%22:2,%22./component.js%22:3,%22./db.js%22:4,%22./helper.js%22:5,%22./log.js%22:6,%22./metamodel.js%22:7,%22./state.js%22:8%7D%5D%7D,%7B%7D,%5B9%5D)(9)%7D);"
            }
        }
    }
}
