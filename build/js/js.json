{
    "_id": "e89c617b6b15d35",
    "name": "js",
    "description": "js components",
    "version": "0.8.8",
    "components": {
        "JS": {
            "app.js": {
                "_id": "app.js",
                "source": "var%20runtime%20=%20require('system-runtime');%0A%0A//%20import%20the%20system%0Avar%20systemId%20=%20runtime.require('db').system(%7B%7Bsystem%7D%7D);%0A//%20run%20the%20system%0Aruntime.require(systemId).main();"
            },
            "system-runtime.min.js": {
                "_id": "system-runtime.min.js",
                "source": "/*%0A%20*%20Runtime%20v1.0.1%0A%20*%20The%20JSON%20Runtime%20Environment%0A%20*%20https://system-runtime.github.io%0A%20*%20@ecarriou%0A%20*%20%20%0A%20*%20Copyright%20(c)%202016%20Erwan%20Carriou%0A%20*%20%0A%20*%20Permission%20is%20hereby%20granted,%20free%20of%20charge,%20to%20any%20person%20obtaining%20a%20copy%0A%20*%20of%20this%20software%20and%20associated%20documentation%20files%20(the%20%22Software%22),%20to%20deal%0A%20*%20in%20the%20Software%20without%20restriction,%20including%20without%20limitation%20the%20rights%0A%20*%20to%20use,%20copy,%20modify,%20merge,%20publish,%20distribute,%20sublicense,%20and/or%20sell%0A%20*%20copies%20of%20the%20Software,%20and%20to%20permit%20persons%20to%20whom%20the%20Software%20is%0A%20*%20furnished%20to%20do%20so,%20subject%20to%20the%20following%20conditions:%0A%20*%20%0A%20*%20The%20above%20copyright%20notice%20and%20this%20permission%20notice%20shall%20be%20included%20in%20all%0A%20*%20copies%20or%20substantial%20portions%20of%20the%20Software.%0A%20*%20%0A%20*%20THE%20SOFTWARE%20IS%20PROVIDED%20%22AS%20IS%22,%20WITHOUT%20WARRANTY%20OF%20ANY%20KIND,%20EXPRESS%20OR%0A%20*%20IMPLIED,%20INCLUDING%20BUT%20NOT%20LIMITED%20TO%20THE%20WARRANTIES%20OF%20MERCHANTABILITY,%0A%20*%20FITNESS%20FOR%20A%20PARTICULAR%20PURPOSE%20AND%20NONINFRINGEMENT.%20IN%20NO%20EVENT%20SHALL%20THE%0A%20*%20AUTHORS%20OR%20COPYRIGHT%20HOLDERS%20BE%20LIABLE%20FOR%20ANY%20CLAIM,%20DAMAGES%20OR%20OTHER%0A%20*%20LIABILITY,%20WHETHER%20IN%20AN%20ACTION%20OF%20CONTRACT,%20TORT%20OR%20OTHERWISE,%20ARISING%20FROM,%0A%20*%20OUT%20OF%20OR%20IN%20CONNECTION%20WITH%20THE%20SOFTWARE%20OR%20THE%20USE%20OR%20OTHER%20DEALINGS%20IN%20THE%0A%20*%20SOFTWARE.%20%0A%20*/%0A!function(a)%7Bif(%22object%22==typeof%20exports&&%22undefined%22!=typeof%20module)module.exports=a();else%20if(%22function%22==typeof%20define&&define.amd)define(%5B%5D,a);else%7Bvar%20b;b=%22undefined%22!=typeof%20window?window:%22undefined%22!=typeof%20global?global:%22undefined%22!=typeof%20self?self:this,b.runtime=a()%7D%7D(function()%7Breturn%20function%20a(b,c,d)%7Bfunction%20e(g,h)%7Bif(!c%5Bg%5D)%7Bif(!b%5Bg%5D)%7Bvar%20i=%22function%22==typeof%20require&&require;if(!h&&i)return%20i(g,!0);if(f)return%20f(g,!0);var%20j=new%20Error(%22Cannot%20find%20module%20'%22+g+%22'%22);throw%20j.code=%22MODULE_NOT_FOUND%22,j%7Dvar%20k=c%5Bg%5D=%7Bexports:%7B%7D%7D;b%5Bg%5D%5B0%5D.call(k.exports,function(a)%7Bvar%20c=b%5Bg%5D%5B1%5D%5Ba%5D;return%20e(c?c:a)%7D,k,k.exports,a,b,c,d)%7Dreturn%20c%5Bg%5D.exports%7Dfor(var%20f=%22function%22==typeof%20require&&require,g=0;g%3Cd.length;g++)e(d%5Bg%5D);return%20e%7D(%7B1:%5Bfunction(a,b,c)%7B%22use%20strict%22;var%20d=%7Bschemas:%7BWorker:%7B_id:%22Worker%22,_name:%22Worker%22,_schema:%22WorkerSchema%22,_inherit:%5B%22RuntimeComponent%22%5D,_core:!0,worker:%7Btype:%22object%22,readOnly:!1,mandatory:!1,%22default%22:%7B%7D%7D,send:%7Bparams:%5B%7Bname:%22message%22,type:%22object%22%7D%5D%7D%7D,WorkerSchema:%7B_id:%22WorkerSchema%22,_name:%22WorkerSchema%22,_inherit:%5B%22RuntimeComponentSchema%22%5D,_core:!0,worker:%22property%22,send:%22method%22%7D,RuntimeAdminSchema:%7B_id:%22RuntimeAdminSchema%22,_name:%22RuntimeAdminSchema%22,_inherit:%5B%22RuntimeComponentSchema%22%5D,_core:!0,start:%22method%22,stop:%22method%22%7D,RuntimeAdmin:%7B_id:%22RuntimeAdmin%22,_name:%22RuntimeAdmin%22,_schema:%22RuntimeAdminSchema%22,_inherit:%5B%22RuntimeComponent%22%5D,_core:!0,start:%7Bparams:%5B%7Bname:%22path%22,type:%22string%22,mandatory:!1,%22default%22:%22%22%7D%5D%7D,stop:%7B%7D%7D,RuntimeChannelSchema:%7B_id:%22RuntimeChannelSchema%22,_name:%22RuntimeChannelSchema%22,sync:%22event%22,loadSystem:%22event%22,createSchema:%22event%22,updateSchema:%22event%22,deleteSchema:%22event%22,createModel:%22event%22,updateModel:%22event%22,deleteModel:%22event%22,createType:%22event%22,updateType:%22event%22,deleteType:%22event%22,createComponent:%22event%22,updateComponent:%22event%22,deleteComponent:%22event%22,createBehavior:%22event%22,updateBehavior:%22event%22,deleteBehavior:%22event%22,_inherit:%5B%22RuntimeComponentSchema%22%5D,_core:!0,send:%22event%22%7D,RuntimeChannel:%7B_id:%22RuntimeChannel%22,_name:%22RuntimeChannel%22,_schema:%22RuntimeChannelSchema%22,_inherit:%5B%22RuntimeComponent%22,%22RuntimeComponent%22%5D,sync:%7B%7D,loadSystem:%7Bparams:%5B%7Bname:%22system%22,type:%22object%22%7D%5D%7D,createSchema:%7Bparams:%5B%7Bname:%22id%22,type:%22string%22%7D,%7Bname:%22schema%22,type:%22object%22%7D%5D%7D,updateSchema:%7Bparams:%5B%7Bname:%22id%22,type:%22string%22%7D,%7Bname:%22schema%22,type:%22object%22%7D%5D%7D,deleteSchema:%7Bparams:%5B%7Bname:%22id%22,type:%22string%22%7D%5D%7D,createModel:%7Bparams:%5B%7Bname:%22id%22,type:%22string%22%7D,%7Bname:%22model%22,type:%22object%22%7D%5D%7D,updateModel:%7Bparams:%5B%7Bname:%22id%22,type:%22string%22%7D,%7Bname:%22model%22,type:%22object%22%7D%5D%7D,deleteModel:%7Bparams:%5B%7Bname:%22id%22,type:%22string%22%7D%5D%7D,createType:%7Bparams:%5B%7Bname:%22id%22,type:%22string%22%7D,%7Bname:%22type%22,type:%22object%22%7D%5D%7D,updateType:%7Bparams:%5B%7Bname:%22id%22,type:%22string%22%7D,%7Bname:%22type%22,type:%22object%22%7D%5D%7D,deleteType:%7Bparams:%5B%7Bname:%22id%22,type:%22string%22%7D%5D%7D,createComponent:%7Bparams:%5B%7Bname:%22collection%22,type:%22string%22%7D,%7Bname:%22component%22,type:%22object%22%7D%5D%7D,updateComponent:%7Bparams:%5B%7Bname:%22id%22,type:%22string%22%7D,%7Bname:%22collection%22,type:%22string%22%7D,%7Bname:%22component%22,type:%22object%22%7D%5D%7D,deleteComponent:%7Bparams:%5B%7Bname:%22id%22,type:%22string%22%7D,%7Bname:%22collection%22,type:%22string%22%7D%5D%7D,createBehavior:%7Bparams:%5B%7Bname:%22behavior%22,type:%22object%22%7D%5D%7D,updateBehavior:%7Bparams:%5B%7Bname:%22id%22,type:%22string%22%7D,%7Bname:%22behavior%22,type:%22object%22%7D%5D%7D,deleteBehavior:%7Bparams:%5B%7Bname:%22id%22,type:%22string%22%7D%5D%7D,_core:!0,send:%7Bparams:%5B%7Bname:%22message%22,type:%22object%22%7D%5D%7D%7D,RuntimeSchema:%7Bload:%22method%22,ready:%22event%22,_id:%22RuntimeSchema%22,_name:%22RuntimeSchema%22,_inherit:%5B%22RuntimeComponentSchema%22%5D,_core:!0,version:%22property%22,system:%22method%22,warning:%22event%22%7D,Runtime:%7Bload:%7Bparams:%5B%7Bname:%22url%22,type:%22string%22%7D,%7Bname:%22async%22,type:%22boolean%22,mandatory:!1,%22default%22:!0%7D%5D%7D,ready:%7B%7D,_id:%22Runtime%22,_name:%22Runtime%22,_schema:%22RuntimeSchema%22,_inherit:%5B%22RuntimeComponent%22%5D,_core:!0,version:%7Btype:%22string%22,readOnly:!0,mandatory:!0,%22default%22:%220.0.0%22%7D,warning:%7Bparams:%5B%7Bname:%22message%22,type:%22string%22%7D%5D%7D,system:%7Bparams:%5B%7Bname:%22name%22,type:%22string%22,mandatory:!1%7D%5D,result:%22object%22%7D%7D,RuntimeBehavior:%7B_id:%22RuntimeBehavior%22,_name:%22RuntimeBehavior%22,_schema:%22RuntimeBehaviorSchema%22,_inherit:%5B%22RuntimeComponent%22%5D,_core:!0,core:%7Btype:%22boolean%22,readOnly:!1,mandatory:!1,%22default%22:!1%7D,useCoreAPI:%7Btype:%22boolean%22,readOnly:!1,mandatory:!1,%22default%22:!1%7D,component:%7Btype:%22string%22,readOnly:!1,mandatory:!0,%22default%22:%22%22%7D,action:%7Btype:%22javascript%22,readOnly:!1,mandatory:!0,%22default%22:%22%22%7D,state:%7Btype:%22string%22,readOnly:!1,mandatory:!0,%22default%22:%22%22%7D%7D,RuntimeBehaviorSchema:%7B_id:%22RuntimeBehaviorSchema%22,_name:%22RuntimeBehaviorSchema%22,_inherit:%5B%22RuntimeComponentSchema%22%5D,_core:!0,core:%22property%22,component:%22property%22,action:%22property%22,state:%22property%22,useCoreAPI:%22property%22%7D,RuntimeClassInfo:%7B_id:%22RuntimeClassInfo%22,_name:%22RuntimeClassInfo%22,_schema:%22RuntimeClassInfoSchema%22,_inherit:%5B%22RuntimeComponent%22%5D,_core:!0,metamodel:%7Btype:%22object%22,readOnly:!0,mandatory:!0,%22default%22:%7B%7D%7D,model:%7Btype:%22object%22,readOnly:!0,mandatory:!0,%22default%22:%7B%7D%7D,property:%7Bparams:%5B%7Bname:%22name%22,type:%22string%22%7D%5D,result:%22object%22%7D,properties:%7Bresult:%22array%22%7D,link:%7Bparams:%5B%7Bname:%22name%22,type:%22string%22%7D%5D,result:%22object%22%7D,links:%7Bresult:%22array%22%7D,method:%7Bparams:%5B%7Bname:%22name%22,type:%22string%22%7D%5D,result:%22object%22%7D,methods:%7Bresult:%22array%22%7D,collection:%7Bparams:%5B%7Bname:%22name%22,type:%22string%22%7D%5D,result:%22object%22%7D,collections:%7Bresult:%22array%22%7D,event:%7Bparams:%5B%7Bname:%22name%22,type:%22string%22%7D%5D,result:%22object%22%7D,events:%7Bresult:%22array%22%7D%7D,RuntimeClassInfoSchema:%7B_id:%22RuntimeClassInfoSchema%22,_name:%22RuntimeClassInfoSchema%22,_inherit:%5B%22RuntimeComponentSchema%22%5D,_core:!0,model:%22property%22,metamodel:%22property%22,method:%22method%22,methods:%22method%22,property:%22method%22,properties:%22method%22,link:%22method%22,links:%22method%22,collections:%22method%22,collection:%22method%22,event:%22method%22,events:%22method%22%7D,RuntimeComponent:%7B_id:%22RuntimeComponent%22,_name:%22RuntimeComponent%22,_schema:%22RuntimeComponentSchema%22,_core:!0,on:%7Bparams:%5B%7Bname:%22state%22,type:%22string%22%7D,%7Bname:%22handler%22,type:%22function%22%7D,%7Bname:%22useCoreAPI%22,type:%22boolean%22,mandatory:!1%7D%5D%7D,off:%7Bparams:%5B%7Bname:%22state%22,type:%22string%22,mandatory:!1%7D,%7Bname:%22behaviorId%22,type:%22string%22,mandatory:!1%7D%5D%7D,require:%7Bparams:%5B%7Bname:%22id%22,type:%22string%22%7D%5D%7D,destroy:%7Bparams:%5B%5D%7D,classInfo:%7Btype:%22@RuntimeClassInfo%22,readOnly:!1,mandatory:!1,%22default%22:%7B%7D%7D,init:%7Bparams:%5B%7Bname:%22conf%22,type:%22object%22%7D%5D%7D,error:%7Bparams:%5B%7Bname:%22data%22,type:%22errorParam%22%7D%5D%7D%7D,RuntimeComponentSchema:%7B_id:%22RuntimeComponentSchema%22,_name:%22RuntimeComponentSchema%22,_core:!0,classInfo:%22property%22,on:%22method%22,off:%22method%22,require:%22method%22,destroy:%22method%22,init:%22method%22,error:%22event%22%7D,RuntimeDatabase:%7B_id:%22RuntimeDatabase%22,_name:%22RuntimeDatabase%22,_schema:%22RuntimeDatabaseSchema%22,_inherit:%5B%22RuntimeComponent%22%5D,_core:!0,system:%7Bparams:%5B%7Bname:%22system%22,type:%22object%22,mandatory:!1%7D%5D,result:%22string%22%7D,subsystem:%7Bparams:%5B%7Bname:%22params%22,type:%22object%22%7D%5D,result:%22string%22%7D,collections:%7Bresult:%22object%22%7D,insert:%7Bparams:%5B%7Bname:%22classId%22,type:%22string%22%7D,%7Bname:%22object%22,type:%22object%22%7D%5D%7D,update:%7Bparams:%5B%7Bname:%22schema%22,type:%22string%22%7D,%7Bname:%22componentId%22,type:%22string%22%7D,%7Bname:%22attributeName%22,type:%22string%22%7D,%7Bname:%22attributeValue%22,type:%22object%22%7D%5D%7D,remove:%7Bparams:%5B%7Bname:%22classId%22,type:%22string%22%7D,%7Bname:%22object%22,type:%22string%22%7D%5D%7D%7D,RuntimeDatabaseSchema:%7B_id:%22RuntimeDatabaseSchema%22,_name:%22RuntimeDatabaseSchema%22,_inherit:%5B%22RuntimeComponentSchema%22%5D,_core:!0,system:%22method%22,subsystem:%22method%22,collections:%22method%22,insert:%22event%22,update:%22event%22,remove:%22event%22%7D,RuntimeMessage:%7B_id:%22RuntimeMessage%22,_name:%22RuntimeMessage%22,_schema:%22RuntimeMessageSchema%22,_core:!0,event:%7Btype:%22string%22,readOnly:!1,mandatory:!0,%22default%22:%22%22%7D,from:%7Btype:%22string%22,readOnly:!1,mandatory:!0,%22default%22:%22%22%7D,data:%7Btype:%22array%22,readOnly:!1,mandatory:!0,%22default%22:%5B%5D%7D%7D,RuntimeMessageSchema:%7B_id:%22RuntimeMessageSchema%22,_name:%22RuntimeMessageSchema%22,_core:!0,event:%22property%22,from:%22property%22,data:%22property%22%7D,RuntimeMetamodel:%7B_id:%22RuntimeMetamodel%22,_name:%22RuntimeMetamodel%22,_schema:%22RuntimeMetamodelSchema%22,_inherit:%5B%22RuntimeComponent%22%5D,_core:!0,schema:%7Bparams:%5B%7Bname:%22schema%22,type:%22object%22%7D%5D%7D,type:%7Bparams:%5B%7Bname:%22type%22,type:%22object%22%7D%5D%7D,create:%7Bparams:%5B%5D%7D%7D,RuntimeMetamodelSchema:%7B_id:%22RuntimeMetamodelSchema%22,_name:%22RuntimeMetamodelSchema%22,_inherit:%5B%22RuntimeComponentSchema%22%5D,_core:!0,schema:%22method%22,type:%22method%22,create:%22method%22%7D,RuntimeState:%7B_id:%22RuntimeState%22,_name:%22RuntimeState%22,_schema:%22RuntimeStateSchema%22,_class:!1,_core:!0,name:%7Btype:%22string%22,readOnly:!1,mandatory:!0,%22default%22:%22%22%7D,parameters:%7Btype:%22object%22,readOnly:!1,mandatory:!1,%22default%22:%7B%7D%7D%7D,RuntimeStateSchema:%7B_id:%22RuntimeStateSchema%22,_name:%22RuntimeStateSchema%22,_core:!0,name:%22property%22,parameters:%22property%22%7D,RuntimeSystem:%7B_id:%22RuntimeSystem%22,_name:%22RuntimeSystem%22,_schema:%22RuntimeSystemSchema%22,_inherit:%5B%22RuntimeComponent%22%5D,_core:!0,name:%7Btype:%22string%22,readOnly:!1,mandatory:!0,%22default%22:%22%22%7D,master:%7Btype:%22boolean%22,readOnly:!1,mandatory:!1,%22default%22:!1%7D,subsystem:%7Btype:%22boolean%22,readOnly:!1,mandatory:!1,%22default%22:!1%7D,version:%7Btype:%22string%22,readOnly:!1,mandatory:!1,%22default%22:%220.0.1%22%7D,description:%7Btype:%22string%22,readOnly:!1,mandatory:!1,%22default%22:%22%22%7D,schemas:%7Btype:%22object%22,readOnly:!1,mandatory:!1,%22default%22:%7B%7D%7D,behaviors:%7Btype:%22object%22,readOnly:!1,mandatory:!1,%22default%22:%7B%7D%7D,types:%7Btype:%22object%22,readOnly:!1,mandatory:!1,%22default%22:%7B%7D%7D,components:%7Btype:%22object%22,readOnly:!1,mandatory:!1,%22default%22:%7B%7D%7D,ready:%7B%7D,sync:%7B%7D,main:%7B%7D%7D,RuntimeSystemSchema:%7B_id:%22RuntimeSystemSchema%22,_name:%22RuntimeSystemSchema%22,_inherit:%5B%22RuntimeComponentSchema%22%5D,_core:!0,name:%22property%22,master:%22property%22,subsystem:%22property%22,version:%22property%22,description:%22property%22,schemas:%22property%22,behaviors:%22property%22,types:%22property%22,components:%22property%22,sync:%22method%22,main:%22method%22,ready:%22event%22%7D%7D,types:%7Bhtml:%7Bname:%22html%22,type:%22string%22,core:!0%7D,css:%7Bname:%22css%22,type:%22string%22,core:!0%7D,collection:%7Bname:%22collection%22,type:%22object%22,schema:%7Btype:%7Btype:%5B%22string%22%5D,mandatory:!0%7D,readOnly:%7Btype:%22boolean%22,mandatory:!0%7D,mandatory:%7Btype:%22boolean%22,mandatory:!0%7D,%22default%22:%7Btype:%22object%22,mandatory:!0%7D%7D,core:!0%7D,errorParam:%7Bname:%22errorParam%22,type:%22object%22,schema:%7Bmessage:%7Btype:%22string%22,mandatory:!0%7D,error:%7Btype:%22object%22,mandatory:!0%7D%7D,core:!0%7D,event:%7Bname:%22event%22,type:%22object%22,schema:%7Bparams:%7Btype:%5B%22parameter%22%5D,mandatory:!1%7D%7D,core:!0%7D,javascript:%7Bname:%22javascript%22,type:%22string%22,core:!0%7D,json:%7Bname:%22json%22,type:%22string%22,core:!0%7D,link:%7Bname:%22link%22,type:%22object%22,schema:%7Btype:%7Btype:%22string%22,mandatory:!0%7D,readOnly:%7Btype:%22boolean%22,mandatory:!0%7D,mandatory:%7Btype:%22boolean%22,mandatory:!0%7D,%22default%22:%7Btype:%22@type%22,mandatory:!0%7D%7D,core:!0%7D,message:%7Bname:%22message%22,type:%22object%22,schema:%7Bevent:%7Btype:%22string%22,mandatory:!0%7D,from:%7Btype:%22string%22,mandatory:!1%7D,data:%7Btype:%22object%22,mandatory:!0%7D%7D,core:!0%7D,method:%7Bname:%22method%22,type:%22object%22,schema:%7Bresult:%7Btype:%22string%22,mandatory:!1%7D,params:%7Btype:%5B%22parameter%22%5D,mandatory:!1%7D%7D,core:!0%7D,parameter:%7Bname:%22parameter%22,type:%22object%22,schema:%7Bname:%7Btype:%22string%22,mandatory:!0%7D,type:%7Btype:%22string%22,mandatory:!0%7D,mandatory:%7Btype:%22boolean%22,mandatory:!1%7D,%22default%22:%7Btype:%22@type%22,mandatory:!1%7D%7D,core:!0%7D,property:%7Bname:%22property%22,type:%22object%22,schema:%7Btype:%7Btype:%22string%22,mandatory:!0%7D,readOnly:%7Btype:%22boolean%22,mandatory:!0%7D,mandatory:%7Btype:%22boolean%22,mandatory:!0%7D,%22default%22:%7Btype:%22@type%22,mandatory:!0%7D%7D,core:!0%7D%7D,behaviors:%7B%221c00c107e01c9b3%22:%7B_id:%221c00c107e01c9b3%22,component:%22RuntimeAdmin%22,state:%22start%22,action:%22function%20start(path)%20%7B%5Cn%20%20%20%20var%20Worker%20=%20null,%5Cn%20%20%20%20worker%20=%20null,%5Cn%20%20%20%20workerPath%20=%20'',%5Cn%20%20%20%20RuntimeChannel%20=%20null,%5Cn%20%20%20%20runtimeChannel%20=%20null;%5Cn%20%20%20%20%5Cn%20%20%20%20if%20(path)%20%7B%5Cn%20%20%20%20%20%20%20%20workerPath%20=%20path%20+%20'/scripts/worker.js';%5Cn%20%20%20%20%20%20%20%20workerPath%20=%20workerPath.replace(/%5C%5C/%5C%5C//g,'/');%5Cn%20%20%20%20%7D%20else%20%7B%5Cn%20%20%20%20%20%20%20%20workerPath%20=%20'/designer/scripts/worker.js';%5Cn%20%20%20%20%7D%5Cn%20%20%20%20%5Cn%20%20%20%20if%20(typeof%20SharedWorker%20!==%20'undefined')%20%7B%5Cn%20%20%20%20%20%20%20%20%5Cn%20%20%20%20%20%20%20%20if%20(!this.require('channel-admin'))%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20RuntimeChannel%20=%20this.require('RuntimeChannel');%5Cn%20%20%20%20%20%20%20%20%20%20%20%20runtimeChannel%20=%20new%20RuntimeChannel(%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'_id':%20'channel-admin',%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'_core':%20true%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D);%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%5Cn%20%20%20%20%20%20%20%20%20%20%20%20runtimeChannel.on('send',%20function%20send(message)%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.require('worker-admin').worker().port.postMessage(message);%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D);%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%5Cn%20%20%20%20%20%20%20%20%20%20%20%20//%20schema%20change%20events%5Cn%20%20%20%20%20%20%20%20%20%20%20%20runtimeChannel.on('createSchema',%20function%20createSchema(id,%20schema)%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.require('metamodel').schema(schema);%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.require('metamodel').create();%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D,%20true);%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%5Cn%20%20%20%20%20%20%20%20%20%20%20%20runtimeChannel.on('updateSchema',%20function%20updateSchema(id,%20schema)%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.require('metamodel').type(schema);%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.require('metamodel').create();%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D,%20true);%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%5Cn%20%20%20%20%20%20%20%20%20%20%20%20runtimeChannel.on('deleteSchema',%20function%20deleteSchema(id)%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20$db%5B'RuntimeSchema'%5D.remove(%7B'_id':%20id%7D);%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.require('metamodel').create();%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D,%20true);%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%5Cn%20%20%20%20%20%20%20%20%20%20%20%20//%20model%20change%20events%5Cn%20%20%20%20%20%20%20%20%20%20%20%20runtimeChannel.on('createModel',%20function%20createModel(id,%20model)%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.require('metamodel').schema(model);%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.require('metamodel').create();%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D,%20true);%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%5Cn%20%20%20%20%20%20%20%20%20%20%20%20runtimeChannel.on('updateModel',%20function%20updateModel(id,%20model)%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.require('metamodel').type(model);%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.require('metamodel').create();%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D,%20true);%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%5Cn%20%20%20%20%20%20%20%20%20%20%20%20runtimeChannel.on('deleteModel',%20function%20deleteModel(id)%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20$db%5B'RuntimeSchema'%5D.remove(%7B'_id':%20id%7D);%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.require('metamodel').create();%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20$component.removeFromMemory(id);%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D,%20true);%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%5Cn%20%20%20%20%20%20%20%20%20%20%20%20//%20type%20change%20events%5Cn%20%20%20%20%20%20%20%20%20%20%20%20runtimeChannel.on('createType',%20function%20createType(id,%20type)%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.require('metamodel').type(type);%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.require('metamodel').create();%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D,%20true);%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%5Cn%20%20%20%20%20%20%20%20%20%20%20%20runtimeChannel.on('updateType',%20function%20updateType(id,%20type)%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.require('metamodel').type(type);%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.require('metamodel').create();%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D,%20true);%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%5Cn%20%20%20%20%20%20%20%20%20%20%20%20runtimeChannel.on('deleteType',%20function%20deleteType(id)%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20$db%5B'RuntimeType'%5D.remove(%7B'_id':%20id%7D);%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.require('metamodel').create();%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D,%20true);%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%5Cn%20%20%20%20%20%20%20%20%20%20%20%20//%20component%20change%20events%5Cn%20%20%20%20%20%20%20%20%20%20%20%20runtimeChannel.on('createComponent',%20function%20createComponent(model,%20component)%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20$db%5Bmodel%5D.insert(component);%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D,%20true);%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%5Cn%20%20%20%20%20%20%20%20%20%20%20%20runtimeChannel.on('updateComponent',%20function%20updateComponent(id,%20collection,%20component)%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20$db%5Bcollection%5D.update(%7B'_id':%20id%7D,%20component);%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D,%20true);%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%5Cn%20%20%20%20%20%20%20%20%20%20%20%20runtimeChannel.on('deleteComponent',%20function%20deleteComponent(id,%20collection)%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20$db%5Bcollection%5D.remove(%7B'_id':%20id%7D);%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D,%20true);%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%5Cn%20%20%20%20%20%20%20%20%20%20%20%20//%20behavior%20change%20events%5Cn%20%20%20%20%20%20%20%20%20%20%20%20runtimeChannel.on('createBehavior',%20function%20createBehavior(component)%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20$db%5B'RuntimeBehavior'%5D.insert(component);%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D,%20true);%5Cn%20%20%20%20%20%20%20%20%20%20%20%20runtimeChannel.on('updateBehavior',%20function%20updateBehavior(id,%20behavior)%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.require(id).action(behavior.action);%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D);%5Cn%20%20%20%20%20%20%20%20%20%20%20%20runtimeChannel.on('deleteBehavior',%20function%20deleteBehavior(id)%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20$db%5B'RuntimeBehavior'%5D.remove(%7B'_id':%20id%7D);%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D,%20true);%5Cn%20%20%20%20%20%20%20%20%20%5Cn%20%20%20%20%20%20%20%20%20%20%20%20//%20System%20Designer%20event%5Cn%20%20%20%20%20%20%20%20%20%20%20%20runtimeChannel.on('sync',%20function%20sync()%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.loadSystem(JSON.parse(this.require('db').system()));%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D);%5Cn%20%20%20%20%5Cn%20%20%20%20%20%20%20%20%20%20%20%20Worker%20=%20this.require('Worker');%5Cn%20%20%20%20%20%20%20%20%20%20%20%20worker%20=%20new%20Worker(%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'_id':%20'worker-admin',%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'_core':%20true,%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'worker':%20new%20SharedWorker(workerPath),%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D);%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%5Cn%20%20%20%20%20%20%20%20%20%20%20%20worker.worker().port.onmessage%20=%20function%20(e)%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20$db.RuntimeMessage.insert(e.data);%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D;%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%5Cn%20%20%20%20%20%20%20%20%20%20%20%20console.info('runtime:%20admin%20is%20started');%5Cn%20%20%20%20%20%20%20%20%7D%20else%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20console.info('runtime:%20admin%20is%20already%20started');%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%20else%20%7B%5Cn%20%20%20%20%20%20%20%20console.info('runtime:%20the%20browser%20can%20not%20run%20admin%20features');%5Cn%20%20%20%20%7D%5Cn%7D%22,useCoreAPI:!0,core:!0%7D,%221d7151dd2d1558f%22:%7B_id:%221d7151dd2d1558f%22,component:%22RuntimeAdmin%22,state:%22stop%22,action:%22function%20stop()%20%7B%5Cn%20%20%20%20var%20worker%20=%20null,%5Cn%20%20%20%20channel%20=%20null;%5Cn%20%20%20%20%5Cn%20%20%20%20worker%20=%20this.require('worker-admin');%5Cn%20%20%20%20if%20(worker%20&&%20worker.worker())%20%7B%5Cn%20%20%20%20%20%20%20%20worker.worker().port.onmessage%20=%20function%20()%20%7B%7D;%5Cn%20%20%20%20%20%20%20%20worker.destroy();%5Cn%20%20%20%20%20%20%20%20%5Cn%20%20%20%20%20%20%20%20channel%20=%20this.require('channel-admin');%5Cn%20%20%20%20%20%20%20%20if%20(channel)%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20channel.destroy();%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%5Cn%20%20%20%20%20%20%20%20console.info('runtime:%20admin%20is%20stopped');%5Cn%20%20%20%20%7D%5Cn%7D%22,useCoreAPI:!1,core:!1%7D,%221fc101c23918773%22:%7Bcomponent:%22RuntimeComponent%22,state:%22off%22,action:'function%20off(state,%20behaviorId)%20%7B%5Cn%20%20%20%20var%20args%20=%20%5B%5D,%5Cn%20%20%20%20i%20=%200,%5Cn%20%20%20%20length%20=%200;%5Cn%20%20%20%20length%20=%20arguments.length;%5Cn%20%20%20%20%5Cn%20%20%20%20for%20(i%20=%200;%20i%20%3C%20length%20-%206;%20i++)%20%7B%5Cn%20%20%20%20%20%20%20%20args.push(arguments%5Bi%5D);%5Cn%20%20%20%20%7D%5Cn%20%20%20%20%5Cn%20%20%20%20if%20($workflow.checkParams(%7B%5Cn%20%20%20%20%20%20%20%20%22component%22:%20this,%20%5Cn%20%20%20%20%20%20%20%20%22methodName%22:%20%22off%22,%20%5Cn%20%20%20%20%20%20%20%20%22args%22:%20args%5Cn%20%20%20%20%20%20%20%20%7D))%20%7B%5Cn%20%20%20%20%20%20%20%20%5Cn%20%20%20%20%20%20%20%20if%20(state%20%7C%7C%20behaviorId)%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20if%20($metamodel.isValidState(state,%20this.constructor.name))%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20$behavior.remove(%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22behaviorId%22:%20behaviorId,%20%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22componentId%22:%20this.id(),%20%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22state%22:%20state%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D);%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%20%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20console.warn(%22runtime:%20invoke%20%5C%5C%5C'off%5C%5C%5C'%20method%20of%20component%20%5C'%22%20+%20this.id()%20+%20%22%5C'%20with%20an%20invalid%20state%20%5C'%22%20+%20state%20+%20%22%5C'%22);%20%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%7D%20else%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20$behavior.remove(%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22componentId%22:%20this.id()%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D);%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%7D',core:!0,useCoreAPI:!0%7D,%221aaee1e6311ff39%22:%7B_id:%221aaee1e6311ff39%22,component:%22runtime%22,state:%22load%22,action:%22function%20load(url,%20async)%20%7B%5Cn%20%20%20%20var%20xhr%20=%20null,%5Cn%20%20%20%20callbackLoad%20=%20null;%5Cn%20%20%20%20xhr%20=%20new%20XMLHttpRequest();%5Cn%20%20%20%20%5Cn%20%20%20%20callbackLoad%20=%20function%20callbackLoad(system)%20%7B%5Cn%20%20%20%20%20%20%20%20var%20sysId%20=%20$db.system(system),%5Cn%20%20%20%20%20%20%20%20sys%20=%20$component.get(sysId),%5Cn%20%20%20%20%20%20%20%20systems%20=%20document.querySelectorAll('link%5Brel=system%5D'),%5Cn%20%20%20%20%20%20%20%20nbSubsystem%20=%20$db.RuntimeSystem.find(%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20'subsystem':%20true%5Cn%20%20%20%20%20%20%20%20%7D);%20%5Cn%20%20%20%20%20%20%20%20if%20(sys)%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20sys.main();%5Cn%20%20%20%20%20%20%20%20%7D%20%5Cn%20%20%20%20%20%20%20%20if%20(systems.length%20+%201%20+%20nbSubsystem.length%20===%20$db.RuntimeSystem.count())%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20$component.get('runtime').ready();%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D;%5Cn%20%20%20%20%5Cn%20%20%20%20if%20(async)%20%7B%5Cn%20%20%20%20%20%20%20%20xhr.open('GET',%20url,%20true);%5Cn%20%20%20%20%20%20%20%20xhr.onreadystatechange%20=%20function%20()%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20if%20(xhr.readyState%20===%204)%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(xhr.status%20===%20200)%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20callbackLoad(JSON.parse(xhr.response));%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%7D;%5Cn%20%20%20%20%20%20%20%20xhr.send(null);%5Cn%20%20%20%20%7D%20else%20%7B%5Cn%20%20%20%20%20%20%20%20xhr.open('GET',%20url,%20false);%5Cn%20%20%20%20%20%20%20%20xhr.send(null);%5Cn%20%20%20%20%20%20%20%20if%20(xhr.status%20===%20200)%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20callbackLoad(JSON.parse(xhr.response));%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%7D%22,core:!0,useCoreAPI:!0%7D,%221f6001773a18791%22:%7B_id:%221f6001773a18791%22,component:%22e89c617b6b15d24%22,state:%22main%22,action:%22function%20main()%20%7B%5Cn%20%20%20%20var%20subsystems%20=%20%5B%5D,%5Cn%20%20%20%20systems%20=%20%5B%5D,%5Cn%20%20%20%20system%20=%20null,%5Cn%20%20%20%20i%20=%200,%5Cn%20%20%20%20length%20=%200;%5Cn%20%20%20%20%5Cn%20%20%20%20subsystems%20=%20$db.RuntimeSystem.find(%7B%5Cn%20%20%20%20%20%20%20%20'subsystem':%20true%5Cn%20%20%20%20%7D);%5Cn%20%20%20%20subsystems.forEach(function%20(subsystem)%20%7B%5Cn%20%20%20%20%20%20%20%20var%20subsystemId%20=%20subsystem._id;%5Cn%20%20%20%20%20%20%20%20this.require(subsystemId).main();%5Cn%20%20%20%20%7D,%20this);%20%5Cn%20%20%20%20%5Cn%20%20%20%20if%20(typeof%20document%20!==%20'undefined')%20%7B%5Cn%20%20%20%20%20%20%20%20systems%20=%20document.querySelectorAll('link%5Brel=system%5D');%5Cn%20%20%20%20%20%20%20%20length%20=%20systems.length;%5Cn%20%20%20%20%20%20%20%20%5Cn%20%20%20%20%20%20%20%20for%20(i%20=%200;%20i%20%3C%20length;%20i++)%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20system%20=%20systems%5Bi%5D;%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%5Cn%20%20%20%20%20%20%20%20%20%20%20%20if%20(system.getAttribute('async')%20===%20'false')%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.require('runtime').load(system.href,%20false);%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.require('runtime').load(system.href,%20true);%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20if%20(length%20===%200)%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20this.require('runtime').ready();%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%7D%22,core:!0,useCoreAPI:!0%7D,%2211a0d1c5ac1ff12%22:%7B_id:%2211a0d1c5ac1ff12%22,component:%22Runtime%22,state:%22error%22,action:%22function%20error(data)%20%7B%5Cn%20%20%20%20console.error('runtime:%20'%20+%20data.message,%20data.error);%5Cn%7D%22,core:!0%7D,%221bc1d108a21355d%22:%7B_id:%221bc1d108a21355d%22,component:%22Runtime%22,state:%22system%22,action:%22function%20system(name)%20%7B%5Cn%20%20%20%20var%20System%20=%20null,%5Cn%20%20%20%20system%20=%20%7B%7D,%5Cn%20%20%20%20systemId%20=%20'',%5Cn%20%20%20%20result%20=%20%5B%5D,%5Cn%20%20%20%20conf%20=%20%7B%7D;%5Cn%20%20%20%20%5Cn%20%20%20%20if%20(name)%20%7B%5Cn%20%20%20%20%20%20%20%20conf.master%20=%20true;%5Cn%20%20%20%20%20%20%20%20conf.name%20=%20name;%5Cn%20%20%20%20%20%20%20%20System%20=%20this.require('RuntimeSystem');%5Cn%20%20%20%20%20%20%20%20system%20=%20new%20System(conf);%5Cn%20%20%20%20%7D%20else%20%7B%5Cn%20%20%20%20%20%20%20%20result%20=%20$db.RuntimeSystem.find(%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20'master':%20true%5Cn%20%20%20%20%20%20%20%20%7D);%5Cn%20%20%20%20%20%20%20%20if%20(result.length)%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20systemId%20=%20result%5B0%5D._id;%5Cn%20%20%20%20%20%20%20%20%20%20%20%20system%20=%20$component.get(systemId);%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%20%20%20%20return%20system;%5Cn%7D%22,core:!0,useCoreAPI:!0%7D,%2215e5611ba214590%22:%7B_id:%2215e5611ba214590%22,component:%22Runtime%22,state:%22warning%22,action:%22function%20warning(message)%20%7B%5Cn%20%20%20%20console.warn('runtime:%20'%20+%20message);%5Cn%7D%22,core:!0%7D,%2214b7a1dd8f16235%22:%7B_id:%2214b7a1dd8f16235%22,component:%22RuntimeClassInfo%22,state:%22collection%22,action:%22function%20collection(name)%20%7B%5Cn%20%20%20%20var%20result%20=%20%7B%7D;%5Cn%20%20%20%20if%20(this.metamodel()%5Bname%5D%20===%20'collection')%20%7B%5Cn%20%20%20%20%20%20%20%20result%20=%20this.model()%5Bname%5D;%5Cn%20%20%20%20%7D%20%5Cn%20%20%20%20%5Cn%20%20%20%20return%20result;%20%5Cn%7D%22,core:!0%7D,%221edba11cf015087%22:%7B_id:%221edba11cf015087%22,component:%22RuntimeClassInfo%22,state:%22collections%22,action:%22function%20collections()%20%7B%5Cn%20%20%20%20var%20keys%20=%20Object.keys(this.metamodel()),%5Cn%20%20%20%20item%20=%20'',%5Cn%20%20%20%20result%20=%20%5B%5D,%5Cn%20%20%20%20i%20=%200,%5Cn%20%20%20%20length%20=%200;%5Cn%20%20%20%20%5Cn%20%20%20%20length%20=%20keys.length;%20%5Cn%20%20%20%20%5Cn%20%20%20%20for%20(i%20=%200;%20i%20%3C%20length;%20i++)%20%7B%20%5Cn%20%20%20%20%20%20%20%20item%20=%20keys%5Bi%5D;%20%5Cn%20%20%20%20%20%20%20%20if%20(this.metamodel()%5Bitem%5D%20===%20'collection')%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20result.push(item);%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%20%20%20%20%5Cn%20%20%20%20return%20result;%5Cn%7D%22,core:!0%7D,%2218bf810ab71cb24%22:%7B_id:%2218bf810ab71cb24%22,component:%22RuntimeClassInfo%22,state:%22event%22,action:%22function%20event(name)%20%7B%5Cn%20%20%20%20var%20result%20=%20%7B%7D;%5Cn%20%20%20%20%5Cn%20%20%20%20if%20(this.metamodel()%5Bname%5D%20===%20'event')%20%7B%5Cn%20%20%20%20%20%20%20%20result%20=%20this.model()%5Bname%5D;%5Cn%20%20%20%20%7D%20%5Cn%20%20%20%20%5Cn%20%20%20%20return%20result;%5Cn%7D%22,core:!0%7D,%221246a1d96f1d1b6%22:%7B_id:%221246a1d96f1d1b6%22,component:%22RuntimeClassInfo%22,state:%22events%22,action:%22function%20events()%20%7B%5Cn%20%20%20%20var%20keys%20=%20Object.keys(this.metamodel()),%5Cn%20%20%20%20item%20=%20'',%5Cn%20%20%20%20result%20=%20%5B%5D,%5Cn%20%20%20%20i%20=%200,%5Cn%20%20%20%20length%20=%200;%5Cn%20%20%20%20%5Cn%20%20%20%20length%20=%20keys.length;%5Cn%20%20%20%20%5Cn%20%20%20%20for%20(i%20=%200;%20i%20%3C%20length;%20i++)%20%7B%5Cn%20%20%20%20%20%20%20%20item%20=%20keys%5Bi%5D;%5Cn%20%20%20%20%20%20%20%20if%20(this.metamodel()%5Bitem%5D%20===%20'event')%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20result.push(item);%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%20%5Cn%20%20%20%20return%20result;%5Cn%7D%22,core:!0%7D,%2211c051a1d81a285%22:%7B_id:%2211c051a1d81a285%22,component:%22RuntimeClassInfo%22,state:%22link%22,action:%22function%20link(name)%20%7B%5Cn%20%20%20%20var%20result%20=%20%7B%7D;%5Cn%20%20%20%20%5Cn%20%20%20%20if%20(this.metamodel()%5Bname%5D%20===%20'link')%20%7B%5Cn%20%20%20%20%20%20%20%20result%20=%20this.model()%5Bname%5D;%5Cn%20%20%20%20%7D%5Cn%20%20%20%20return%20result;%5Cn%7D%22,core:!0%7D,%2215fac1509e1f236%22:%7B_id:%2215fac1509e1f236%22,component:%22RuntimeClassInfo%22,state:%22links%22,action:%22function%20links()%20%7B%20%5Cn%20%20%20%20var%20keys%20=%20Object.keys(this.metamodel()),%5Cn%20%20%20%20item%20=%20'',%5Cn%20%20%20%20result%20=%20%5B%5D,%5Cn%20%20%20%20i%20=%200,%5Cn%20%20%20%20length%20=%200;%5Cn%20%20%20%20length%20=%20keys.length;%5Cn%20%20%20%20%5Cn%20%20%20%20for%20(i%20=%200;%20i%20%3C%20length;%20i++)%20%7B%5Cn%20%20%20%20%20%20%20%20item%20=%20keys%5Bi%5D;%5Cn%20%20%20%20%20%20%20%20if%20(this.metamodel()%5Bitem%5D%20===%20'link')%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20result.push(item);%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%20return%20result;%5Cn%7D%22,core:!0%7D,%221ed611c850133ae%22:%7B_id:%221ed611c850133ae%22,component:%22RuntimeClassInfo%22,state:%22method%22,action:%22function%20method(name)%20%7B%5Cn%20%20%20%20var%20result%20=%20%7B%7D;%5Cn%20%20%20%20if%20(this.metamodel()%5Bname%5D%20===%20'method')%20%7B%5Cn%20%20%20%20%20%20%20%20result%20=%20this.model()%5Bname%5D;%5Cn%20%20%20%20%20%20%20%20%5Cn%20%20%20%20%7D%5Cn%20%20%20%20%5Cn%20%20%20%20return%20result;%5Cn%7D%22,core:!0%7D,%221ffe01407718387%22:%7B_id:%221ffe01407718387%22,component:%22RuntimeClassInfo%22,state:%22methods%22,action:%22function%20methods()%20%7B%5Cn%20%20%20%20var%20keys%20=%20Object.keys(this.metamodel()),%5Cn%20%20%20%20item%20=%20'',%5Cn%20%20%20%20result%20=%20%5B%5D,%5Cn%20%20%20%20i%20=%200,%5Cn%20%20%20%20length%20=%200;%5Cn%20%20%20%20length%20=%20keys.length;%5Cn%20%20%20%20for%20(i%20=%200;%20i%20%3C%20length;%20i++)%20%7B%5Cn%20%20%20%20%20%20%20%20item%20=%20keys%5Bi%5D;%5Cn%20%20%20%20%20%20%20%20if%20(this.metamodel()%5Bitem%5D%20===%20'method')%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20result.push(item);%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%20%5Cn%20%20%20%20%5Cn%20%20%20%20return%20result;%5Cn%7D%22,core:!0%7D,%2217fbe1fbd3109ce%22:%7B_id:%2217fbe1fbd3109ce%22,component:%22RuntimeClassInfo%22,state:%22properties%22,action:%22function%20properties()%20%7B%20%5Cn%20%20%20%20var%20keys%20=%20Object.keys(this.metamodel()),%5Cn%20%20%20%20item%20=%20'',%5Cn%20%20%20%20result%20=%20%5B%5D,%5Cn%20%20%20%20i%20=%200,%5Cn%20%20%20%20length%20=%200;%5Cn%20%20%20%20length%20=%20keys.length;%5Cn%20%20%20%20%5Cn%20%20%20%20for%20(i%20=%200;%20i%20%3C%20length;%20i++)%20%7B%5Cn%20%20%20%20%20%20%20%20item%20=%20keys%5Bi%5D;%5Cn%20%20%20%20%20%20%20%20if%20(this.metamodel()%5Bitem%5D%20===%20'property')%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20result.push(item);%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%20return%20result;%5Cn%7D%22,core:!0%7D,%221cfcc1145a193d7%22:%7B_id:%221cfcc1145a193d7%22,component:%22RuntimeClassInfo%22,state:%22property%22,action:%22function%20property(name)%20%7B%5Cn%20%20%20%20var%20result%20=%20%7B%7D;%5Cn%20%20%20%20%5Cn%20%20%20%20if%20(this.metamodel()%5Bname%5D%20===%20'property')%20%7B%5Cn%20%20%20%20%20%20%20%20result%20=%20this.model()%5Bname%5D;%5Cn%20%20%20%20%7D%5Cn%20%20%20%20return%20result;%5Cn%7D%22,core:!0%7D,%22155fb1bc861bd3b%22:%7B_id:%22155fb1bc861bd3b%22,component:%22RuntimeComponent%22,state:%22destroy%22,action:%22function%20destroy()%20%7B%5Cn%20%20%20%20$component.destroy(this.id());%5Cn%7D%22,core:!0,useCoreAPI:!0%7D,%221a53713bb113982%22:%7B_id:%221a53713bb113982%22,component:%22RuntimeComponent%22,state:%22off%22,action:'function%20off(state,%20behaviorId)%20%7B%5Cn%20%20%20%20var%20args%20=%20%5B%5D,%5Cn%20%20%20%20i%20=%200,%5Cn%20%20%20%20length%20=%200;%5Cn%20%20%20%20length%20=%20arguments.length;%5Cn%20%20%20%20%5Cn%20%20%20%20for%20(i%20=%200;%20i%20%3C%20length%20-%206;%20i++)%20%7B%5Cn%20%20%20%20%20%20%20%20args.push(arguments%5Bi%5D);%5Cn%20%20%20%20%7D%5Cn%20%20%20%20%5Cn%20%20%20%20if%20($workflow.checkParams(%7B%5Cn%20%20%20%20%20%20%20%20%22component%22:%20this,%20%5Cn%20%20%20%20%20%20%20%20%22methodName%22:%20%22off%22,%20%5Cn%20%20%20%20%20%20%20%20%22args%22:%20args%5Cn%20%20%20%20%20%20%20%20%7D))%20%7B%5Cn%20%20%20%20%20%20%20%20%5Cn%20%20%20%20%20%20%20%20if%20(state%20%7C%7C%20behaviorId)%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20if%20($metamodel.isValidState(state,%20this.constructor.name))%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20$behavior.remove(%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22behaviorId%22:%20behaviorId,%20%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22componentId%22:%20this.id(),%20%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22state%22:%20state%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D);%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%20%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20console.warn(%22runtime:%20invoke%20%5C%5C%5C'off%5C%5C%5C'%20method%20of%20component%20%5C'%22%20+%20this.id()%20+%20%22%5C'%20with%20an%20invalid%20state%20%5C'%22%20+%20state%20+%20%22%5C'%22);%20%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%7D%20else%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20$behavior.remove(%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22componentId%22:%20this.id()%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D);%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%7D',core:!0,useCoreAPI:!0%7D,%221524811ac21a1ff%22:%7B_id:%221524811ac21a1ff%22,component:%22RuntimeComponent%22,state:%22require%22,action:%22function%20require(id)%20%7B%5Cn%20%20%20%20return%20$component.get(id);%5Cn%7D%22,core:!0,useCoreAPI:!0%7D,%2215cee12ed517717%22:%7B_id:%2215cee12ed517717%22,component:%22RuntimeDatabase%22,state:%22collections%22,action:%22function%20collections()%20%7B%5Cn%20%20%20%20var%20result%20=%20%7B%7D,%5Cn%20%20%20%20collectionName%20=%20'';%5Cn%20%20%20%20%5Cn%20%20%20%20for%20(collectionName%20in%20$db.store)%20%7B%5Cn%20%20%20%20%20%20%20%20if%20($db.store.hasOwnProperty(collectionName)%20&&%20collectionName.indexOf('Runtime')%20!==%200)%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20result%5BcollectionName%5D%20=%20$db%5BcollectionName%5D;%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%20%20%20%20return%20result;%5Cn%7D%22,core:!0,useCoreAPI:!0%7D,%22182c41e8fb1e1d3%22:%7B_id:%22182c41e8fb1e1d3%22,component:%22RuntimeDatabase%22,state:%22subsystem%22,action:%22function%20subsystem(params)%20%7B%5Cn%20%20%20%20return%20$db.subsystem(params);%5Cn%7D%22,core:!0,useCoreAPI:!0%7D,%221fac21097c14045%22:%7B_id:%221fac21097c14045%22,component:%22RuntimeDatabase%22,state:%22system%22,action:%22function%20system(system)%20%7B%5Cn%20%20%20%20return%20$db.system(system);%5Cn%7D%22,core:!0,useCoreAPI:!0%7D,%2217e4215e0a14708%22:%7B_id:%2217e4215e0a14708%22,component:%22RuntimeMetamodel%22,state:%22create%22,action:%22function%20create()%20%7B%5Cn%20%20%20%20$metamodel.create();%5Cn%7D%22,core:!0,useCoreAPI:!0%7D,%221cf4f1c17c14450%22:%7B_id:%221cf4f1c17c14450%22,component:%22RuntimeMetamodel%22,state:%22schema%22,action:%22function%20schema(schema)%20%7B%5Cn%20%20%20%20$metamodel.schema(schema);%5Cn%7D%22,core:!0,useCoreAPI:!0%7D,%2216f9b169651061a%22:%7B_id:%2216f9b169651061a%22,component:%22RuntimeMetamodel%22,state:%22type%22,action:%22function%20type(type)%20%7B%5Cn%20%20%20%20$metamodel.type(type);%5Cn%7D%22,core:!0,useCoreAPI:!0%7D,%221d82b1a62714a3a%22:%7B_id:%221d82b1a62714a3a%22,component:%22RuntimeSystem%22,state:%22sync%22,action:%22function%20sync()%20%7B%5Cn%20%20%20%20var%20system%20=%20JSON.parse($db.system());%5Cn%20%20%20%20%5Cn%20%20%20%20this.schemas(system.schemas);%5Cn%20%20%20%20this.types(system.types);%5Cn%20%20%20%20this.behaviors(system.behaviors);%5Cn%20%20%20%20this.components(system.components);%5Cn%7D%22,core:!0,useCoreAPI:!0%7D%7D,components:%7BRuntimeAdmin:%7Badmin:%7B_id:%22admin%22%7D%7D,Runtime:%7Bruntime:%7B_id:%22runtime%22,version:%221.0.1%22%7D%7D,RuntimeDatabase:%7Bdb:%7B_id:%22db%22%7D%7D,RuntimeMetamodel:%7Bmetamodel:%7B_id:%22metamodel%22%7D%7D,RuntimeSystem:%7B%2218ed81de331252c%22:%7B_id:%2218ed81de331252c%22,name:%22system-admin%22,version:%220.1.0%22,description:%22Runtime%20Component%20administration%22,subsystem:!0,master:!1%7D,%22133421d0c313d2d%22:%7B_id:%22133421d0c313d2d%22,name:%22web%22,version:%220.1.0%22,description:%22Add%20behaviors%20for%20web%22,subsystem:!0,master:!1%7D,%221f6ff194df1c37a%22:%7B_id:%221f6ff194df1c37a%22,name:%22webType%22,version:%220.1.0%22,description:%22Add%20types%20for%20web%22,subsystem:!0,master:!1%7D%7D%7D,name:%22runtime%22,version:%221.0.1%22,description:%22Runtime%22,_id:%22e89c617b6b15d24%22,master:!1,subsystem:!1%7D;c.system=d%7D,%7B%7D%5D,2:%5Bfunction(a,b,c)%7B%22use%20strict%22;function%20d(a,b,c,d)%7Bvar%20e=%22%22,f=-1,g=%22%22,h=%5B%5D,i=%5B%5D,j=%22%22,k=%22%22,l=null;return%20f=b.indexOf(%22%7B%22),k=b.substring(0,f),e=k.split(%22(%22)%5B0%5D.replace(%22function%22,%22%22).trim(),g=k.split(%22(%22)%5B1%5D.replace(%22)%22,%22%22).trim(),h=g.split(%22,%22),h.forEach(function(a)%7Bi.push(a.trim())%7D),j=b.substring(f+1),j=j.substring(0,j.lastIndexOf(%22%7D%22)).trim(),e=e%7C%7Ca,%22%22===h%5B0%5D&&(h=%5B%5D),d&&(h.push(%22$component%22),h.push(%22$db%22),h.push(%22$metamodel%22),h.push(%22$workflow%22),h.push(%22$behavior%22),h.push(%22$state%22)),l=%22%22!==h%5B0%5D?new%20Function(%22body%22,%22return%20function%20%22+e+%22%20(%22+h.join(%22,%22)+%22)%20%7B%20return%20new%20Function('%22+h.join(%22','%22)+%22',%20body).apply(this,%20arguments)%20%7D;%22)(j):new%20Function(%22body%22,%22return%20function%20%22+e+%22%20()%20%7B%20return%20new%20Function(body).apply(this,%20arguments)%20%7D;%22)(j)%7Dfunction%20e(a,b,c,e,f)%7Bvar%20g=l.generateId(),h=c.toString();return%22undefined%22==typeof%20f&&(f=!1),%22undefined%22==typeof%20e&&(e=!1),c=d(b,h,f,e),m%5Bg%5D=c,k.RuntimeBehavior.insert(%7B_id:g,component:a,state:b,action:h,useCoreAPI:e,core:f%7D),g%7Dfunction%20f(a)%7Bvar%20b=%5B%5D;a=a%7C%7C%7B%7D,a.behaviorId=a.behaviorId%7C%7C%22%22,a.componentId=a.componentId%7C%7C%22%22,a.state=a.state%7C%7C%22%22,a.componentId&&(a.behaviorId?(k.RuntimeBehavior.remove(%7B_id:a.behaviorId,component:a.componentId,state:a.state%7D),delete%20m%5Ba.behaviorId%5D):(b=a.state?k.RuntimeBehavior.remove(%7Bcomponent:a.componentId,state:a.state%7D):k.RuntimeBehavior.remove(%7Bcomponent:a.componentId%7D),b.forEach(function(a)%7Bdelete%20m%5Ba%5D%7D)))%7Dfunction%20g(a)%7Bdelete%20m%5Ba%5D%7Dfunction%20h(a,b)%7Bvar%20c=%5B%5D,e=%5B%5D,f=null;return%20e=k.RuntimeBehavior.find(%7Bcomponent:a,state:b%7D),e.forEach(function(a)%7Bf=m%5Ba._id%5D,%22undefined%22==typeof%20f&&(f=d(a.state,a.action,a.core,a.useCoreAPI),m%5Ba._id%5D=f),c.push(%7BuseCoreAPI:a.useCoreAPI,action:f%7D)%7D),c%7Dfunction%20i()%7Bm=%7B%7D%7Dfunction%20j(a)%7Breturn%20m%5Ba%5D%7Dvar%20k=a(%22./db.js%22),l=a(%22./helper.js%22),m=%7B%7D;c.add=e,c.get=j,c.remove=f,c.getActions=h,c.clear=i,c.removeFromMemory=g%7D,%7B%22./db.js%22:4,%22./helper.js%22:5%7D%5D,3:%5Bfunction(a,b,c)%7B%22use%20strict%22;function%20d(a)%7Bvar%20b=%5B%5D,c=%5B%5D,d=%22%22,e=%22%22,f=%22%22,g=!1;return%20a=a%7C%7C%7B%7D,d=a.type%7C%7C%22%22,e=a.id%7C%7C%22%22,f=a.propertyName%7C%7C%22%22,c=a.arr%7C%7C%5B%5D,%22undefined%22!=typeof%20a.readOnly&&(g=a.readOnly),c.forEach(function(a)%7B-1!==d.indexOf(%22@%22)?b.push(C.getRuntime().require(a)):b.push(a)%7D),b.push=function(a)%7Bvar%20b=!1;return%20g?D.readOnlyProperty(e,f):(b=-1!==d.indexOf(%22@%22),b?a&&A.inheritFrom(a.constructor.name,d.replace(%22@%22,%22%22))?(c.push(a.id()),y.state(%7Bcomponent:e,state:f,data:%5Bc.length,a.id(),%22add%22%5D%7D)):D.invalidPropertyName(e,f,a.id(),d):a&&A.isValidType(a,d)?(c.push(a),y.state(%7Bcomponent:e,state:f,data:%5Bc.length,a,%22add%22%5D%7D)):D.invalidPropertyName(e,f,a,d)),c.length%7D,b.pop=function()%7Bvar%20a,b=null,h=!1;return%20g?D.readOnlyProperty(e,f):0!==c.length&&(b=c.pop(),y.state(%7Bcomponent:e,state:f,data:%5Bc.length,b,%22remove%22%5D%7D),h=-1!==d.indexOf(%22@%22),a=h?L%5Bb%5D:b),a%7D,b%7Dfunction%20e(a,b)%7Bvar%20c=%5B%5D,d=%5B%5D,e=0,f=0;if(c=A.get(a)%5Bb%5D.params)for(e=c.length,f=0;e%3Ef;f++)d.push(c%5Bf%5D.name);return%20d%7Dfunction%20f(a)%7Bvar%20b=null,c=null,d=%5B%5D,e=0,f=0,g=%5B%5D;for(b=A.get(a),c=A.get(b._schema),d=Object.keys(c),e=d.length,f=0;e%3Ef;f++)c%5Bd%5Bf%5D%5D!==H&&c%5Bd%5Bf%5D%5D!==G&&c%5Bd%5Bf%5D%5D!==I%7C%7Cg.push(%7Bname:d%5Bf%5D,type:b%5Bd%5Bf%5D%5D.type,readOnly:b%5Bd%5Bf%5D%5D.readOnly%7D);return%20g%7Dfunction%20g(a)%7Bvar%20b=null,c=null,d=%5B%5D,e=0,f=0,g=%5B%5D;for(b=A.get(a),c=A.get(b._schema),d=Object.keys(c),e=d.length,f=0;e%3Ef;f++)c%5Bd%5Bf%5D%5D===J&&g.push(d%5Bf%5D);return%20g%7Dfunction%20h(a)%7Bvar%20b=null,c=null,d=%5B%5D,e=0,f=0,g=%5B%5D;for(b=A.get(a),c=A.get(b._schema),d=Object.keys(c),e=d.length,f=0;e%3Ef;f++)c%5Bd%5Bf%5D%5D===K&&g.push(d%5Bf%5D);return%20g%7Dfunction%20i(a)%7Bvar%20b=function(b)%7Bb=b%7C%7C%7B%7D;var%20c=%7B%7D;A.isValidObject(b,A.get(a),!0,!0)?A.prepareObject(b,A.get(a)):y.stop(%7B%0Aerror:!0,message:%22the%20parameters%20for%20creating%20a%20component%20of%20class%20'%22+a+%22'%20are%20not%20compliant%20with%20the%20model%22%7D),%22undefined%22==typeof%20b._id&&(b._id=C.generateId()),L%5Bb._id%5D=this,c=function()%7Breturn%20b._id%7D,this.id=new%20Function(%22body%22,%22return%20function%20id%20()%20%7B%20return%20body.call(this)%20%7D;%22)(c),b.classInfo=a+%22Info%22,z.store%5Ba%5D%5Bb._id%5D=b,C.isRuntime()&&C.getRuntime().require(%22db%22)&&C.getRuntime().require(%22db%22).insert(a,b),Object.freeze(this),this.init&&this.init(b)%7D;return%20new%20Function(%22body%22,%22return%20function%20%22+a+%22%20(config)%20%7B%20body.call(this,config)%20%7D;%22)(b)%7Dfunction%20j(a,b)%7Bvar%20c=function()%7Breturn%20b%7D;a.id=new%20Function(%22body%22,%22return%20function%20id%20(prop,%20val)%20%7B%20return%20body.call(this,%20prop,%20val)%20%7D;%22)(c)%7Dfunction%20k(a,b,c)%7Bvar%20e=f(a);e.forEach(function(a)%7Bvar%20e=%7B%7D,f=%22%22,g=%22%22,h=%22%22;f=a.name,g=a.type,h=a.readOnly,Array.isArray(g)?(e=function(a,b)%7Bvar%20e=%5B%5D,i=null,j=null,k=null,l=null;if(%22undefined%22==typeof%20b)%7Bif(%22undefined%22==typeof%20a)return%20j=new%20d(%7Bid:this.id(),propertyName:f,readOnly:h,classId:c,type:g%5B0%5D,arr:z.store%5Bc%5D%5Bthis.id()%5D%5Bf%5D%7D);if(k=z.store%5Bc%5D%5Bthis.id()%5D%5Bf%5D%5Ba%5D)return%20l=-1!==g%5B0%5D.indexOf(%22@%22)?C.getRuntime().require(k):k%7Delse%20h?D.readOnlyProperty(this.id(),f):(A.isValidType(b,g%5B0%5D)%7C%7CA.inheritFrom(b.constructor.name,g%5B0%5D.replace(%22@%22,%22%22))&&-1!==g%5B0%5D.indexOf(%22@%22))&&(e=z%5Bc%5D.find(%7B_id:this.id()%7D),e.length?(l=-1!==g%5B0%5D.indexOf(%22@%22)?b.id():b,i=e%5B0%5D,i%5Bf%5D%5Ba%5D=l,C.isRuntime()&&C.getRuntime().require(%22db%22).update(c,this.id(),f,l),y.state(%7Bcomponent:this.id(),state:f,data:%5Ba,l,%22add%22%5D%7D)):D.invalidPropertyName(this.id(),f,b,g))%7D,b.prototype%5Bf%5D=new%20Function(%22body%22,%22return%20function%20%22+f+%22%20(position,value)%20%7B%20return%20body.call(this,%20position,%20value)%20%7D;%22)(e)):(e=function(a)%7Bvar%20b=%5B%5D,d=null,e=null;if(%22undefined%22==typeof%20a)%7Bif(d=z.store%5Bc%5D%5Bthis.id()%5D)return%20e=d%5Bf%5D,-1!==g.indexOf(%22@%22)&&(e=t(e)),e;y.stop(%7Berror:!0,message:%22trying%20to%20get%20the%20property%20'%22+f+%22'%20on%20the%20destroyed%20component%20'%22+this.id()+%22'%22%7D)%7Delse%20h?D.readOnlyProperty(this.id(),f):A.isValidType(a,g)?(b=z%5Bc%5D.find(%7B_id:this.id()%7D),b.length&&(d=b%5B0%5D,-1!==g.indexOf(%22@%22)?d%5Bf%5D=a.id():d%5Bf%5D=a,C.isRuntime()&&C.getRuntime().require(%22db%22)&&C.getRuntime().require(%22db%22).update(c,this.id(),f,a),%22RuntimeBehavior%22===c&&B.removeFromMemory(this.id()),y.state(%7Bcomponent:this.id(),state:f,data:%5Ba%5D%7D))):D.invalidPropertyName(this.id(),f,a,g)%7D,b.prototype%5Bf%5D=new%20Function(%22body%22,%22return%20function%20%22+f+%22%20(value)%20%7B%20return%20body.call(this,value)%20%7D;%22)(e))%7D)%7Dfunction%20l(a,b,c)%7Bvar%20d=g(a);d.forEach(function(a)%7Bvar%20d=e(c,a),f=d.join(%22,%22),g=function()%7Bvar%20b=null;return%20b=y.state(%7Bcomponent:this.id(),state:a,data:arguments%7D)%7D;f?b.prototype%5Ba%5D=new%20Function(%22body%22,%22return%20function%20%22+a+%22%20(%22+f+%22)%20%7B%20return%20body.call(this,%22+f+%22)%20%7D;%22)(g):b.prototype%5Ba%5D=new%20Function(%22body%22,%22return%20function%20%22+a+%22%20()%20%7B%20return%20body.call(this)%20%7D;%22)(g)%7D)%7Dfunction%20m(a,b,c)%7Bvar%20d=h(a);d.forEach(function(a)%7Bvar%20d=e(c,a),f=d.join(%22,%22),g=function()%7Bvar%20b=%5B%5D,d=-1,e=%5B%5D,f=0,g=-1,h=%7B%7D;if(%22RuntimeChannel%22===c)%7Bif(b=z.RuntimeSystem.find(%7Bmaster:!0%7D),b.length)%7Bfor(d=b%5B0%5D._id,h.from=d,g=arguments.length,f=0;g%3Ef;f++)e.push(arguments%5Bf%5D);h.data=e,h.event=a,z.RuntimeMessage.insert(h),y.state(%7Bcomponent:this.id(),state:%22send%22,data:%5B%7Bevent:h.event,from:h.from,data:h.data%7D%5D%7D)%7D%7Delse%20y.state(%7Bcomponent:this.id(),state:a,data:arguments%7D)%7D;f?b.prototype%5Ba%5D=new%20Function(%22body%22,%22return%20function%20%22+a+%22%20(%22+f+%22)%20%7B%20return%20body.call(this,%22+f+%22)%20%7D;%22)(g):b.prototype%5Ba%5D=new%20Function(%22body%22,%22return%20function%20%22+a+%22%20()%20%7B%20return%20body.call(this)%20%7D;%22)(g)%7D)%7Dfunction%20n(a,b)%7Bvar%20c=function(a,c,d)%7Bvar%20e=%22%22,f=%22%22;return%20y.checkParams(%7Bcomponent:this,methodName:%22on%22,args:arguments%7D)&&(A.isValidState(a,b)?A.isEvent(a,b)%7C%7CA.isProperty(a,b)%7C%7CA.isLink(a,b)%7C%7CA.isCollection(a,b)%7C%7C!(z.RuntimeBehavior.find(%7Bcomponent:this.id(),state:a%7D).length%3E=1)?E.validParamNumbers(b,a,c)?(e=B.add(this.id(),a,c,d),f=F.get(this.id()),f&&a===f.name&&y.action(e,f.parameters.data)):D.invalidParamNumberMethodOn(this.id(),a):D.behaviorNotUnique(b,a):D.invalidStateOn(b,a)),e%7D;a.prototype.on=new%20Function(%22body%22,%22return%20function%20on%20(state,handler,useCoreAPI)%20%7B%20return%20body.call(this,state,handler,useCoreAPI)%20%7D;%22)(c)%7Dfunction%20o(a,b)%7Bvar%20c=function(a,c,d)%7Bvar%20e=%22%22,f=%22%22;return%20y.checkParams(%7Bcomponent:this,methodName:%22on%22,args:arguments%7D)&&(A.isValidState(a,b)?A.isEvent(a,b)%7C%7CA.isProperty(a,b)%7C%7CA.isLink(a,b)%7C%7CA.isCollection(a,b)%7C%7C!(z.RuntimeBehavior.find(%7Bcomponent:this.id(),state:a%7D).length%3E=1)?E.validParamNumbers(b,a,c)?(e=B.add(this.id(),a,c,d),f=F.get(this.id()),f&&a===f.name&&y.action(e,f.parameters.data)):D.invalidParamNumberMethodOn(this.id(),a):D.behaviorNotUnique(b,a):D.invalidStateOn(b,a)),e%7D;a.on=new%20Function(%22body%22,%22return%20function%20on%20(state,handler,useCoreAPI)%20%7B%20return%20body.call(this,%20state,%20handler,%20useCoreAPI)%20%7D;%22)(c)%7Dfunction%20p(a,b)%7Bvar%20c=function(a,c)%7By.checkParams(%7Bcomponent:this,methodName:%22off%22,args:arguments%7D)&&(A.isValidState(a,b)?B.remove(%7BbehaviorId:c,componentId:b,state:a%7D):D.InvalidStateOff(b,a))%7D;a.off=new%20Function(%22body%22,%22return%20function%20off%20(state,%20behaviorId)%20%7B%20return%20body.call(this,%20state,%20behaviorId)%20%7D;%22)(c)%7Dfunction%20q(a)%7Bvar%20b=function()%7Bvar%20a=this.id(),b=%5B%5D,c=0,d=0;for(z%5Ba%5D&&(b=z%5Ba%5D.remove()),delete%20L%5Ba%5D,B.remove(%7BcomponentId:a%7D),d=b.length,c=0;d%3Ec;c++)B.remove(%7BcomponentId:b%5Bc%5D%7D);y.state(%7Bcomponent:a,state:%22destroy%22%7D)%7D;a.destroy=new%20Function(%22body%22,%22return%20function%20destroy%20()%20%7B%20return%20body.call(this)%20%7D;%22)(b)%7Dfunction%20r(a)%7Bvar%20b=function()%7Breturn%20t(this.id()+%22Info%22)%7D;a.classInfo=new%20Function(%22body%22,%22return%20function%20classInfo%20()%20%7B%20return%20body.call(this)%20%7D;%22)(b)%7Dfunction%20s(a)%7Ba=a%7C%7C%7B%7D;var%20b=%7B%7D,c=%22%22;return%20c=%22undefined%22==typeof%20a.model?C.generateId():a.model,b=i(c),L%5Bc%5D=b,j(b,c),k(a.model,b,c),l(a.model,b,c),m(a.model,b,c),A.inheritFrom(c,%22RuntimeComponent%22)&&(n(b,c),o(b,c),p(b,c),q(b),r(b)),Object.freeze(b),b%7Dfunction%20t(a)%7Breturn%20L%5Ba%5D%7Dfunction%20u(a)%7Breturn%20s(a)%7Dfunction%20v(a)%7Bvar%20b=L%5Ba%5D,c=%22%22;b&&(delete%20L%5Ba%5D,c=b.constructor.name,z%5Bc%5D.remove(%7B_id:a%7D),B.remove(%7BcomponentId:a%7D),%22RuntimeBehavior%22===c&&B.removeFromMemory(a))%7Dfunction%20w(a)%7Bdelete%20L%5Ba%5D%7Dfunction%20x()%7BL=%7B%7D%7Dvar%20y=a(%22./workflow.js%22),z=a(%22./db.js%22),A=a(%22./metamodel.js%22),B=a(%22./behavior.js%22),C=a(%22./helper.js%22),D=a(%22./log.js%22),E=a(%22./workflow.js%22),F=a(%22./state.js%22),G=%22property%22,H=%22link%22,I=%22collection%22,J=%22method%22,K=%22event%22,L=%7B%7D;d.prototype=new%20Array,c.create=u,c.get=t,c.removeFromMemory=w,c.clear=x,c.destroy=v%7D,%7B%22./behavior.js%22:2,%22./db.js%22:4,%22./helper.js%22:5,%22./log.js%22:6,%22./metamodel.js%22:7,%22./state.js%22:9,%22./workflow.js%22:10%7D%5D,4:%5Bfunction(a,b,c)%7B%22use%20strict%22;function%20d()%7Bvar%20a=%7B%7D,b=%22%22,d=%22%22,e=%22%22,f=null,g=null,h=null,i=null,j=%22%22,k=0,l=0,m=%22%22;if(a.schemas=%7B%7D,c.RuntimeSchema.count())for(j%20in%20r.RuntimeSchema)h=JSON.parse(JSON.stringify(r.RuntimeSchema%5Bj%5D)),h._core%7C%7C(a.schemas%5Bj%5D=h);if(a.types=%7B%7D,c.RuntimeType.count())for(e%20in%20r.RuntimeType)f=JSON.parse(JSON.stringify(r.RuntimeType%5Be%5D)),delete%20f._id,f.core%7C%7C(a.types%5Bf.name%5D=f);a.behaviors=%7B%7D;for(d%20in%20r.RuntimeBehavior)g=JSON.parse(JSON.stringify(r.RuntimeBehavior%5Bd%5D)),delete%20g.classInfo,g.core%7C%7C(a.behaviors%5Bd%5D=g);for(a.components=%7B%7D,k=s.length,l=0;k%3El;l++)if(b=s%5Bl%5D,c%5Bb%5D.count())%7Bi=JSON.parse(JSON.stringify(r%5Bb%5D));for(m%20in%20i)delete%20i%5Bm%5D.classInfo,i%5Bm%5D._core&&delete%20i%5Bm%5D;a.components%5Bb%5D=i%7Dreturn%20a%7Dfunction%20e(a,b)%7Bvar%20c=!0,d=%22%22;for(d%20in%20a)%7Bif(%22undefined%22==typeof%20b%5Bd%5D)%7Bc=!1;break%7Dif(a%5Bd%5Dinstanceof%20RegExp)%7Bif(null===b%5Bd%5D.match(a%5Bd%5D))%7Bc=!1;break%7D%7Delse%20if(b%5Bd%5D!==a%5Bd%5D)%7Bc=!1;break%7D%7Dreturn%20c%7Dfunction%20f(a)%7Bc%5Ba%5D=new%20v(a)%7Dfunction%20g(a)%7Bvar%20b=%22%22,e=%22%22,f=%22%22,g=%22%22,h=%22%22,i=%22%22,j=%5B%5D,k=null,m=null,o=null,p=%7B%7D;if(a)%7Bfor(g%20in%20a.types)l.type(a.types%5Bg%5D);for(h%20in%20a.schemas)l.schema(a.schemas%5Bh%5D);l.create();for(i%20in%20a.behaviors)c.RuntimeBehavior.insert(a.behaviors%5Bi%5D);for(e%20in%20a.components)for(f%20in%20a.components%5Be%5D)c%5Be%5D.insert(a.components%5Be%5D%5Bf%5D);j=c.RuntimeSystem.find(%7Bmaster:!0%7D),j.length&&(j%5B0%5D._id===a._id?a.master=!0:a.master=!1),c.RuntimeSystem.insert(a),b=a._id%7Delse%20if(p=d(),j=c.RuntimeSystem.find(%7Bmaster:!0%7D),j.length)%7Bm=j%5B0%5D,k=m._id;for(i%20in%20p.behaviors)o=p.behaviors%5Bi%5D,%22main%22===o.state&&(o.component=k);p.name=m.name,p.version=m.version,p.description=m.description,p._id=k,b=JSON.stringify(p)%7Delse%20n.masterSystemNotFound();return%20b%7Dfunction%20h(a)%7Bvar%20b=%7B%7D,d=%5B%5D,e=%22%22,f=0,g=0,h=null,i=null,j=null,k=null,l=%22%22;if(d=c.RuntimeSystem.find(%7Bmaster:!0%7D),d.length&&(e=d%5B0%5D.name),b.name=a.name%7C%7C%22sub_%22+e,b.version=a.version%7C%7C%220.0.1%22,b.description=a.description%7C%7C%22%22,b.subsystem=!0,b.schemas=%7B%7D,a.schemas)for(d=c.RuntimeSchema.find(a.schema),g=d.length,f=0;g%3Ef;f++)h=d%5Bf%5D,h._core%7C%7C(b.schemas%5Bh._id%5D=h);if(b.types=%7B%7D,a.types)for(d=c.RuntimeType.find(a.types),g=d.length,f=0;g%3Ef;f++)i=d%5Bf%5D,i._core%7C%7C(b.types%5Bi._id%5D=i);if(b.behaviors=%7B%7D,a.behaviors)for(j=c.RuntimeBehavior.find(a.behaviors),g=d.length,f=0;g%3Ef;f++)j=d%5Bf%5D,j.core%7C%7C(b.behaviors%5Bj._id%5D=j);if(b.components=%7B%7D,a.components)for(l%20in%20a.components)if(c%5Bl%5D)for(b.components%5Bl%5D=%7B%7D,d=c%5Bl%5D.find(a.components%5Bl%5D),g=d.length,f=0;g%3Ef;f++)k=d%5Bf%5D,b.components%5Bl%5D%5Bk._id%5D=k;return%20JSON.stringify(b)%7Dfunction%20i()%7Bvar%20a=0,b=0,d=%22%22;for(a=s.length,b=0;a%3Eb;b++)d=s%5Bb%5D,c%5Bd%5D.remove();for(a=t.length,b=0;a%3Eb;b++)d=t%5Bb%5D,c%5Bd%5D.remove()%7Dfunction%20j()%7Bvar%20a=%22%22,b=null;b=c.RuntimeSystem.find(%7B_id:%22e89c617b6b15d24%22%7D)%5B0%5D,c.clear(),k.clear(),l.clear(),p.clear(),o.clear(),l.init(),a=c.system(b),k.get(a).main()%7Dvar%20k=a(%22./component.js%22),l=a(%22./metamodel.js%22),m=a(%22./helper.js%22),n=a(%22./log.js%22),o=a(%22./behavior.js%22),p=a(%22./state.js%22),q=a(%22./workflow.js%22),r=%7B%7D,s=%5B%5D,t=%5B%22Runtime%22,%22RuntimeSchema%22,%22RuntimeExtendedSchema%22,%22RuntimeBehavior%22,%22RuntimeState%22,%22RuntimeType%22,%22RuntimeMetamodel%22,%22RuntimeDatabase%22,%22RuntimeSystem%22,%22RuntimeClassInfo%22,%22RuntimeMessage%22,%22RuntimeChannel%22%5D,u=%5B%22RuntimeSchema%22,%22RuntimeExtendedSchema%22,%22RuntimeState%22,%22RuntimeType%22%5D,v=function(a)%7Bl.get(a)%7C%7C-1!==t.indexOf(a)?(r%5Ba%5D=%7B%7D,this.name=a,-1===t.indexOf(a)&&s.push(a)):n.invalidCollectionName(a)%7D;v.prototype.find=function(a)%7Bvar%20b=%5B%5D,c=%22%22,d=%7B%7D;if(a=a%7C%7Cnull,a&&Object.keys(a).length)if(Array.isArray(a))a.forEach(function(a)%7Bfor(c%20in%20r%5Bthis.name%5D)d=r%5Bthis.name%5D%5Bc%5D,e(a,d)&&b.push(d)%7D.bind(this));else%20for(c%20in%20r%5Bthis.name%5D)d=r%5Bthis.name%5D%5Bc%5D,e(a,d)&&b.push(d);else%20for(c%20in%20r%5Bthis.name%5D)d=r%5Bthis.name%5D%5Bc%5D,b.push(d);return%20b%7D,v.prototype.insert=function(a)%7Bvar%20b=%5B%5D,d=null,e=%5B%5D;return%20Array.isArray(a)?b=a:b.push(a),b.forEach(function(a)%7Bvar%20b=null,f=%5B%5D,g=null,h=%5B%5D;switch(!0)%7Bcase%22RuntimeSchema%22===this.name:case%22RuntimeType%22===this.name:case%22RuntimeExtendedSchema%22===this.name:case%20l.isValidObject(a,l.get(this.name)):if(%22undefined%22==typeof%20a._id&&(a._id=m.generateId()),r%5Bthis.name%5D%5Ba._id%5D=a,d=k.get(this.name),d?(b=new%20d(a),e.push(b.id())):m.isRuntime()&&m.getRuntime().require(%22db%22)&&m.getRuntime().require(%22db%22).insert(this.name,a),%22RuntimeMessage%22===this.name&&m.isRuntime()&&(h=c.RuntimeSystem.find(%7Bmaster:!0%7D),!h.length%7C%7Ch.length&&h%5B0%5D._id!==a.from))%7Bf=c.RuntimeChannel.find(%7B%7D);for(var%20i=f.length,j=0;i%3Ej;j++)g=m.getRuntime().require(f%5Bj%5D._id),q.state(%7Bcomponent:f%5Bj%5D._id,state:a.event,data:a.data%7D)%7Dbreak;default:n.invalidDocumentOnDbInsert(a,this.name)%7D%7D.bind(this)),e%7D,v.prototype.update=function(a,b,c)%7Bvar%20d=this.find(a),e=0,f=0,g=d.length,h=%22%22,i=l.get(this.name),j=%22%22;if(c=c%7C%7C%7B%7D,%22undefined%22==typeof%20c.upsert&&(c.upsert=c.upsert%7C%7C!1),b)for(0===g&&c.upsert&&(a._id&&(b._id=a._id),this.insert(b),e+=1),f=0;g%3Ef;f++)%7B%22undefined%22!=typeof%20b._id&&b._id!==d%5Bf%5D._id&&n.updateUuid(d%5Bf%5D._id,b._id,%22undefined%22!=typeof%20k.get(b._id));for(h%20in%20b)%22undefined%22!=typeof%20d%5Bf%5D%5Bh%5D&&(%22RuntimeSchema%22!==this.name?(j=%22%22,0!==h.indexOf(%22_%22)?j=i%5Bh%5D.type:l.getMetaDef()%5Bh%5D&&(j=l.getMetaDef()%5Bh%5D.type),j?l.isValidType(b%5Bh%5D,j)?(d%5Bf%5D%5Bh%5D=b%5Bh%5D,e+=1,m.isRuntime()&&m.getRuntime().require(%22db%22).update(this.name,d%5Bf%5D._id,h,b%5Bh%5D),q.state(%7Bcomponent:d%5Bf%5D._id,state:h,data:%5Bb%5Bh%5D%5D%7D),q.state(%7Bcomponent:this.name,state:h,data:%5Bb%5Bh%5D%5D%7D)):n.invalidPropertyTypeOnDbUpdate(this.name,d%5Bf%5D._id,h,b%5Bh%5D,i%5Bh%5D):n.unknownPropertyOnDbUpdate(h,d%5Bf%5D._id)):(d%5Bf%5D%5Bh%5D=b%5Bh%5D,e+=1,m.isRuntime()&&m.getRuntime().require(%22db%22).update(this.name,d%5Bf%5D._id,h,b%5Bh%5D)))%7Dreturn%20e%7D,v.prototype.remove=function(a)%7Bvar%20b=%5B%5D,c=%22%22,d=null,f=%7B%7D;if(a=a%7C%7Cnull,a&&Object.keys(a).length)if(Array.isArray(a))a.forEach(function(a)%7Bfor(c%20in%20r%5Bthis.name%5D)f=r%5Bthis.name%5D%5Bc%5D,e(a,f)&&(delete%20r%5Bthis.name%5D%5Bc%5D,d=k.get(c),d&&d.destroy(),m.isRuntime()&&m.getRuntime().require(%22db%22)&&m.getRuntime().require(%22db%22).remove(this.name,c),b.push(c))%7D.bind(this));else%20for(c%20in%20r%5Bthis.name%5D)f=r%5Bthis.name%5D%5Bc%5D,e(a,f)&&(delete%20r%5Bthis.name%5D%5Bc%5D,d=k.get(c),d&&d.destroy(),m.isRuntime()&&m.getRuntime().require(%22db%22)&&m.getRuntime().require(%22db%22).remove(this.name,c),b.push(c));else%20for(c%20in%20r%5Bthis.name%5D)delete%20r%5Bthis.name%5D%5Bc%5D,-1==u.indexOf(this.name)&&(d=k.get(c),d&&d.destroy()),m.isRuntime()&&m.getRuntime().require(%22db%22)&&m.getRuntime().require(%22db%22).remove(this.name,c),b.push(c);return%20b%7D,v.prototype.count=function()%7Bvar%20a=0,b=%22%22;for(b%20in%20r%5Bthis.name%5D)a++;return%20a%7D,c.collection=f,c.store=r,c.system=g,c.subsystem=h,c.clear=i,c.init=j%7D,%7B%22./behavior.js%22:2,%22./component.js%22:3,%22./helper.js%22:5,%22./log.js%22:6,%22./metamodel.js%22:7,%22./state.js%22:9,%22./workflow.js%22:10%7D%5D,5:%5Bfunction(a,b,c)%7B%22use%20strict%22;function%20d()%7Bvar%20a=!1;return%20h.Runtime&&h.Runtime.find().length&&(a=!0),a%7Dfunction%20e()%7Bvar%20a=%22%22;return%20j%7C%7C(d()?(a=h.Runtime.find()%5B0%5D._id,j=i.get(a)):j=%7Berror:function(a,b)%7Bconsole.error(%22runtime:%20%22+a,b)%7D,warning:function(a)%7Bconsole.warn(%22runtime:%20%22+a)%7D%7D),j%7Dfunction%20f()%7Bfunction%20a()%7Breturn%20Math.floor(65536*(1+Math.random())).toString(16)%7Dreturn%20a()+a()+a()%7Dfunction%20g()%7Bvoid%200===Function.prototype.name&&void%200!==Object.defineProperty&&Object.defineProperty(Function.prototype,%22name%22,%7Bget:function()%7Bvar%20a=/function%5Cs(%5B%5E(%5D%7B1,%7D)%5C(/,b=a.exec(this.toString());return%20b&&b.length%3E1?b%5B1%5D.trim():%22%22%7D,set:function(a)%7B%7D%7D)%7Dvar%20h=a(%22./db.js%22),i=a(%22./component.js%22),j=null;c.getRuntime=e,c.isRuntime=d,c.generateId=f,c.polyfill=g%7D,%7B%22./component.js%22:3,%22./db.js%22:4%7D%5D,6:%5Bfunction(a,b,c)%7B%22use%20strict%22;function%20d(a,b)%7Bvar%20c=%22%22;c=b%5BL%5D?%22unknown%20property%20'%22+a+%22'%20for%20the%20definition%20of%20%22+b%5BL%5D:%22unknown%20property%20'%22+a+%22'%20for%20the%20meta%20attribute%20%22+JSON.stringify(b),K.getRuntime().warning(c)%7Dfunction%20e(a,b,c)%7BK.getRuntime().warning(%22invalid%20type%20for%20property%20'%22+JSON.stringify(a)+%22':%20expected%20'%22+b+%22'%20instead%20of%20'%22+typeof%20c+%22'%22)%7Dfunction%20f(a,b)%7BK.getRuntime().warning(%22invalid%20value%20for%20the%20enum%20value%20'%22+a+%22':%20expected%20'%22+b+%22'%20instead%20of%20'%22+typeof%20a+%22'%22)%7Dfunction%20g(a,b,c)%7BK.getRuntime().warning(%22invalid%20class%20name%20for%20component%20'%22+a+%22':%20expected%20'%22+b+%22'%20instead%20of%20'%22+c+%22'%22)%7Dfunction%20h(a)%7BK.getRuntime().warning(%22missing%20property%20'%22+a+%22'%22)%7Dfunction%20i(a,b)%7BK.getRuntime().warning(%22class%20'%22+a+%22'%20is%20missing%20for%20the%20implementation%20of%20the%20class%20'%22+b+%22'%22)%7Dfunction%20j(a,b)%7BK.getRuntime().warning(%22invalid%20type%20for%20property%20'%22+a+%22'%20for%20the%20definition%20of%20'%22+b+%22'%22)%7Dfunction%20k(a,b)%7BK.getRuntime().warning(%22missing%20property%20'%22+a+%22'%20for%20the%20definition%20of%20'%22+b+%22'%22)%7Dfunction%20l(a,b)%7BK.getRuntime().warning(%22unknown%20property%20'%22+a+%22'%20for%20the%20definition%20of%20'%22+b+%22'%22)%7Dfunction%20m(a)%7BK.getRuntime().warning(%22can%20not%20load%20the%20definition%20of%20type%20'%22+a+%22'%22)%7Dfunction%20n(a,b,c,d)%7B-1!==d.indexOf(%22#%22)?K.getRuntime().warning(%22invalid%20name%20for%20property%20'%22+b+%22':%20expected%20'%22+d+%22'%20instead%20of%20'%22+c+%22'%20on%20component%20'%22+a+%22'%22):K.getRuntime().warning(%22invalid%20name%20for%20property%20'%22+b+%22':%20expected%20'%22+d+%22'%20instead%20of%20'%22+typeof%20c+%22'%20on%20component%20'%22+a+%22'%22)%7Dfunction%20o(a,b)%7BK.getRuntime().warning(%22can%20not%20set%20read-only%20property%20'%22+b+%22'%20on%20component%20'%22+a+%22'%22)%7Dfunction%20p(a,b)%7BK.getRuntime().warning(%22invalid%20document%20'%22+JSON.stringify(a)+%22'%20on%20an%20insert%20operation%20on%20collection%20'%22+b+%22'%22)%7Dfunction%20q(a,b,c,d,e)%7B-1!==e.indexOf(%22#%22)?K.getRuntime().warning(%22invalid%20type%20for%20property%20'%22+c+%22'%20on%20an%20update%20operation%20on%20collection%20'%22+a+%22':%20expected%20'%22+e+%22'%20instead%20of%20'%22+d+%22'%20on%20component%20'%22+b+%22'%22):K.getRuntime().warning(%22invalid%20type%20for%20property%20'%22+c+%22'%20on%20an%20update%20operation%20on%20collection%20'%22+a+%22':%20expected%20'%22+e+%22'%20instead%20of%20'%22+typeof%20d+%22'%20on%20component%20'%22+b+%22'%22)%7Dfunction%20r(a,b)%7BK.getRuntime().warning(%22unknown%20property%20'%22+a+%22'%20on%20an%20update%20operation%20on%20component%20'%22+b+%22'%22)%7Dfunction%20s(a,b)%7BK.getRuntime().warning(%22try%20to%20call%20an%20unknown%20method%20'%22+b+%22'%20for%20the%20class%20'%22+a+%22'%22)%7Dfunction%20t(a)%7BK.getRuntime().warning(%22invalid%20name%20for%20creating%20the%20collection%20'%22+a+%22':%20there%20is%20no%20schema%20'%22+a+%22'%20in%20the%20metamodel%22)%7Dfunction%20u(a,b)%7BK.getRuntime().warning(%22invalid%20type%20on%20the%20result%20of%20method%20'%22+b+%22'%20on%20component%20'%22+a+%22'%22)%7Dfunction%20v(a,b)%7BK.getRuntime().warning(%22unkown%20class%20component%20'%22+a+%22'%20for%20component%20'%22+b+%22'%22)%7Dfunction%20w()%7BK.getRuntime().warning(%22runtime%20has%20been%20restarted%22)%7Dfunction%20x(a,b)%7BK.getRuntime().warning(%22invalid%20number%20of%20parameters%20when%20calling%20the%20method%20'%22+b+%22'%20on%20component%20'%22+a+%22'%22)%7Dfunction%20y(a,b,c)%7BK.getRuntime().warning(%22invalid%20type%20for%20the%20parameter%20'%22+c+%22'%20when%20calling%20the%20method%20'%22+b+%22'%20on%20component%20'%22+a+%22'%22)%7Dfunction%20z(a,b)%7BK.getRuntime().warning(%22try%20to%20add%20more%20than%20one%20behavior%20for%20the%20state%20'%22+b+%22'%20on%20component%20class%20'%22+a+%22'%22)%7Dfunction%20A(a,b)%7BK.getRuntime().warning(%22try%20to%20add%20a%20behavior%20with%20an%20unkwown%20state%20'%22+b+%22'%20on%20component%20class%20'%22+a+%22'%22)%7Dfunction%20B(a,b)%7BK.getRuntime().warning(%22try%20to%20remove%20a%20behavior%20from%20an%20unkwown%20state%20'%22+b+%22'%20on%20component%20class%20'%22+a+%22'%22)%7Dfunction%20C()%7BK.getRuntime().warning(%22the%20master%20system%20is%20not%20found%22)%7Dfunction%20D(a,b)%7BK.getRuntime().warning(%22invalid%20type%20for%20value%20'%22+JSON.stringify(a)+%22':%20expected%20'%22+b+%22'%22)%7Dfunction%20E(a)%7BK.getRuntime().warning(%22unknown%20type%20for%20value%20'%22+JSON.stringify(a)+%22'%22)%7Dfunction%20F(a,b)%7BK.getRuntime().warning(%22can%20not%20yet%20validate%20if%20the%20component%20'%22+JSON.stringify(a)+%22'%20is%20an%20instance%20of%20'%22+b+%22'%22)%7Dfunction%20G(a,b,c)%7BK.getRuntime().warning(%22invalid%20type%20for%20the%20message%20'%22+JSON.stringify(a)+%22':%20expected%20type%20'%22+c+%22'%20for%20event%20'%22+b+%22'%22)%7Dfunction%20H(a,b)%7BK.getRuntime().warning(%22invalid%20number%20of%20parameters%20when%20adding%20an%20action%20on%20method%20'%22+b+%22'%20on%20component%20'%22+a+%22'%22)%7Dfunction%20I(a,b,c)%7Bc?K.getRuntime().warning(%22try%20to%20update%20a%20component%20of%20id%20'%22+a+%22'%20with%20the%20new%20id%20'%22+b+%22'%20that%20is%20already%20used%22):K.getRuntime().warning(%22try%20to%20update%20a%20component%20of%20id%20'%22+a+%22'%20with%20the%20new%20id%20'%22+b+%22'%22)%7Dfunction%20J(a)%7BK.getRuntime().warning(%22try%20to%20change%20the%20state%20of%20the%20destroyed%20component%20'%22+a+%22'%22)%7Dvar%20K=a(%22./helper.js%22),L=%22_id%22;c.unknownProperty=d,c.invalidPropertyType=e,c.invalidEnumValue=f,c.invalidClassName=g,c.missingProperty=h,c.missingImplementation=i,c.invalidTypeImp=j,c.missingPropertyImp=k,c.unknownPropertyImp=l,c.invalidTypeDefinition=m,c.invalidPropertyName=n,c.readOnlyProperty=o,c.invalidDocumentOnDbInsert=p,c.invalidPropertyTypeOnDbUpdate=q,c.unknownMethod=s,c.invalidCollectionName=t,c.invalidResultType=u,c.unknownComponent=v,c.workflowRestarted=w,c.invalidParamNumber=x,c.invalidParamType=y,c.behaviorNotUnique=z,c.invalidStateOn=A,c.invalidStateOff=B,c.masterSystemNotFound=C,c.invalidType=D,c.unknownType=E,c.canNotYetValidate=F,c.invalidChannelEvent=G,c.invalidParamNumberMethodOn=H,c.updateUuid=I,c.unknownPropertyOnDbUpdate=r,c.invalidUseOfComponent=J%7D,%7B%22./helper.js%22:5%7D%5D,7:%5Bfunction(a,b,c)%7B%22use%20strict%22;function%20d()%7Bvar%20a=%5B%5D,b=%5B%5D,c=null,d=null,e=%22%22,f=%22%22,g=0,h=0;for(ia.catalog=%7B%7D,ia.inheritance=%7B%7D,ia.inheritanceTree=%7B%7D,ia.model=%7B%7D,ia.states=%7B%7D,ia.type=%7B%7D,ia.implementation=%7B%7D,a=T.RuntimeSchema.find(%7B%7D),h=a.length,g=0;h%3Eg;g++)c=a%5Bg%5D,e=c%5BX%5D,f=c%5BZ%5D,ia.catalog%5Be%5D=c,f&&(ia.inheritance%5Be%5D=f);for(b=T.RuntimeType.find(%7B%7D),h=b.length,g=0;h%3Eg;g++)d=b%5Bg%5D,ia.type%5Bd.name%5D=d%7Dfunction%20e()%7Bfunction%20a(b,c)%7Bvar%20d=0,e=0;if(ia.inheritance%5Bc%5D&&(e=ia.inheritance%5Bc%5D.length))for(ia.inheritanceTree%5Bb%5D=ia.inheritanceTree%5Bb%5D.concat(ia.inheritance%5Bc%5D),d=0;e%3Ed;d++)a(b,ia.inheritance%5Bc%5D%5Bd%5D)%7Dvar%20b=null,c=null,d=0,e=0;for(b%20in%20ia.inheritance)for(e=ia.inheritance%5Bb%5D.length,e&&(ia.inheritanceTree%5Bb%5D=ia.inheritance%5Bb%5D),d=0;e%3Ed;d++)c=ia.inheritance%5Bb%5D%5Bd%5D,a(b,c)%7Dfunction%20f(a)%7Bvar%20b=%7B%7D,c=ia.catalog%5Ba%5D,d=ia.inheritanceTree%5Ba%5D,e=0,f=0,g=null,h=%22%22;for(d&&(e=d.length,d.reverse()),f=0;e%3Ef;f++)%7Bg=ia.catalog%5Bd%5Bf%5D%5D;for(h%20in%20g)0!==h.indexOf(%22_%22)&&(b%5Bh%5D=g%5Bh%5D)%7Dfor(h%20in%20c)b%5Bh%5D=c%5Bh%5D;return%20b%7Dfunction%20g()%7Bvar%20a=%22%22;for(a%20in%20ia.catalog)ia.model%5Ba%5D=f(a)%7Dfunction%20h()%7Bvar%20a=%22%22,b=null,c=%22%22;for(a%20in%20ia.model)b=ia.model%5Ba%5D,b&&%22undefined%22!=typeof%20b%5B$%5D&&(c=ia.model%5Bb%5B$%5D%5D,c?(j(b,c),ia.implementation%5Bb%5BX%5D%5D=c%5BX%5D):U.missingImplementation(b%5B$%5D,b%5BX%5D))%7Dfunction%20i()%7Bvar%20a=%22%22,b=null,c=%22%22,d=%5B%5D,e=%22%22;for(a%20in%20ia.model)%7Bif(d=%5B%5D,b=ia.model%5Ba%5D,b&&%22undefined%22==typeof%20b%5B$%5D)for(e%20in%20b)c=b%5Be%5D,0!==e.indexOf(%22_%22)&&-1!==ga.indexOf(c)&&d.push(e);ia.states%5Ba%5D=d%7D%7Dfunction%20j(a,b)%7Bvar%20c=%22%22,d=null;for(c%20in%20b)c!==X&&c!==Y&&c!==Z&&c!==$&&c!==_&&c!==aa&&(%22undefined%22!=typeof%20a%5Bc%5D?(d=a%5Bc%5D,k(d,b%5Bc%5D)%7C%7CU.invalidTypeImp(c,a%5BX%5D)):U.missingPropertyImp(c,a%5BX%5D));for(c%20in%20a)c!==X&&c!==Y&&c!==Z&&c!==$&&c!==_&&c!==aa&&%22undefined%22==typeof%20b%5Bc%5D&&U.unknownPropertyImp(c,a%5BX%5D)%7Dfunction%20k(a,b)%7Bvar%20c=!0;return%20c=w(b,%22string%22)&&-1!==ha.indexOf(b)?w(a,b):l(a,b)%7Dfunction%20l(a,b)%7Bvar%20c=!0,d=ia.type%5Bb%5D,e=0,f=0;if(w(d,%22undefined%22))c=!1;else%20if(w(a,%22undefined%22))c=!1;else%20if(%22array%22===d.type)for(e=a.length,f=0;e%3Ef&&(c=w(d.schema,%22undefined%22)?K(a%5Bf%5D,d.type):M(a%5Bf%5D,d.schema),c!==!1);f++);else%20c=w(d.schema,%22undefined%22)?K(a,d.type):M(a,d.schema);return%20c%7Dfunction%20m()%7BT.collection(%22RuntimeSchema%22),T.collection(%22RuntimeExtendedSchema%22),T.collection(%22RuntimeClassInfo%22),T.collection(%22RuntimeBehavior%22),T.collection(%22RuntimeState%22),T.collection(%22RuntimeType%22),T.collection(%22RuntimeMessage%22),T.collection(%22RuntimeChannel%22)%7Dfunction%20n()%7Bvar%20a=%22%22,b=%7B%7D;for(a%20in%20ia.catalog)b=ia.catalog%5Ba%5D,%22undefined%22!=typeof%20b%5B$%5D&&%22undefined%22==typeof%20T%5Bb%5BX%5D%5D&&b%5B_%5D!==!1&&T.collection(b%5BX%5D);for(a%20in%20ia.model)b=ia.model%5Ba%5D,T.RuntimeExtendedSchema.insert(b)%7Dfunction%20o()%7Bvar%20a=%22%22,b=%7B%7D;for(a%20in%20ia.model)b=ia.model%5Ba%5D,%22undefined%22!=typeof%20b%5B$%5D&&b%5B_%5D!==!1&&V.create(%7Bmodel:a%7D)%7Dfunction%20p()%7Bvar%20a=%22%22,b=%7B%7D,c=%22%22;for(a%20in%20ia.model)b=ia.model%5Ba%5D,c=b._id+%22Info%22,%22undefined%22!=typeof%20b%5B$%5D&&b%5B_%5D!==!1&&(V.get(c)?T.RuntimeClassInfo.update(%7B_id:c%7D,%7B_id:c,metamodel:ia.model%5Bb%5B$%5D%5D,model:b%7D):T.RuntimeClassInfo.insert(%7B_id:c,metamodel:ia.model%5Bb%5B$%5D%5D,model:b%7D))%7Dfunction%20q(a)%7Breturn%20a.replace(%22@%22,%22%22)%7Dfunction%20r(a)%7Bvar%20b=w(a,%22string%22)&&-1===ha.indexOf(a)&&!s(a);return%20b%7Dfunction%20s(a)%7Breturn-1!==a.indexOf(%22@%22)%7Dfunction%20t(a)%7Bvar%20b=%22%22;return%20b=Array.isArray(a)?%22array%22:typeof%20a%7Dfunction%20u(a)%7Breturn%20a.constructor.name%7Dfunction%20v(a,b)%7Breturn-1!==b.indexOf(a)%7Dfunction%20w(a,b)%7Bvar%20c=!0;switch(b)%7Bcase%22array%22:c=Array.isArray(a);break;default:c=b===typeof%20a%7Dreturn%20c%7Dfunction%20x(a,b,c)%7Bvar%20d=!1,e=ia.model%5Bb%5D,f=%22%22;return%20e&&e%5B$%5D&&(e=ia.model%5Be%5B$%5D%5D),e&&(f=e%5Ba%5D,f===c&&(d=!0)),d%7Dfunction%20y(a,b)%7Bvar%20c=%22%22,d=b;for(c%20in%20a)a.hasOwnProperty(c)&&0!==c.indexOf(%22_%22)&&(d%5Bc%5D=a%5Bc%5D);return%20d%7Dfunction%20z(a)%7Bvar%20b=null,c=%22%22,d=%22%22,e=%22%22,f=%5B%5D;b=JSON.parse(JSON.stringify(a)),c=b%5BX%5D,e=b%5BY%5D,d=b%5BZ%5D,w(c,%22undefined%22)&&(c=e,b%5BX%5D=e),N(b,ia.metadef.schema,!1)?(f=T.RuntimeSchema.find(%7B_id:c%7D),f.length?T.RuntimeSchema.update(%7B_id:c%7D,y(b,f%5B0%5D)):T.RuntimeSchema.insert(b)):W.stop(%7Berror:!0,message:%22the%20schema%20'%22+JSON.stringify(a)+%22'%20is%20not%20valid%22%7D)%7Dfunction%20A(a)%7Bvar%20b=a.name;N(a,ia.metadef.type)?b?T.RuntimeType.insert(a):U.invalidTypeDefinition(a):W.stop(%7Berror:!0,message:%22the%20type%20'%22+JSON.stringify(a)+%22'%20is%20not%20valid%22%7D)%7Dfunction%20B()%7BC(),ia.metadef=%7Bschema:%7B_id:%7Btype:%22string%22,mandatory:!0%7D,_name:%7Btype:%22string%22,mandatory:!0%7D,_inherit:%7Btype:%5B%22string%22%5D,mandatory:!1%7D,_schema:%7Btype:%22string%22,mandatory:!1%7D,_class:%7Btype:%22boolean%22,mandatory:!1%7D,_core:%7Btype:%22boolean%22,mandatory:!1%7D%7D,type:%7Bname:%7Btype:%22string%22,mandatory:!0%7D,type:%7Btype:%22string%22,mandatory:!0%7D,schema:%7Btype:%22object%22,mandatory:!1%7D,value:%7Btype:%5B%22string%22%5D,mandatory:!1%7D,core:%7Btype:%22boolean%22,mandatory:!1%7D%7D%7D,m()%7Dfunction%20C()%7Bia=%7Bmetadef:%7B%7D,catalog:%7B%7D,inheritance:%7B%7D,inheritanceTree:%7B%7D,model:%7B%7D,states:%7B%7D,type:%7B%7D,implementation:%7B%7D%7D%7Dfunction%20D()%7Bd(),e(),g(),h(),i(),n(),o(),p()%7Dfunction%20E(a,b)%7Breturn%20x(a,b,ca)%7Dfunction%20F(a,b)%7Breturn%20x(a,b,da)%7Dfunction%20G(a,b)%7Breturn%20x(a,b,ea)%7Dfunction%20H(a,b)%7Breturn%20x(a,b,fa)%7Dfunction%20I(a,b)%7Breturn%20x(a,b,ba)%7Dfunction%20J(a,b)%7Bvar%20c=!1,d=ia.model%5Bb%5D,e=%7B%7D;return%20d&&d%5B$%5D&&(d=ia.model%5Bd%5B$%5D%5D),e=ia.states%5Bd%5BX%5D%5D,Array.isArray(e)&&(c=-1!==e.indexOf(a)),c%7Dfunction%20K(a,b)%7Bfunction%20c(a,b)%7Bvar%20c=!0,d=q(b),e=a;return%20w(a,%22string%22)&&(e=V.get(a)),u(e)!==d&&%22%7B%7D%22!==JSON.stringify(e)&&(c=!1,U.invalidType(a,b.replace(%22@%22,%22%22))),c%7Dfunction%20d(a,b)%7Bvar%20d=!0,e=%22%22,f=0,g=0;switch(e=t(b))%7Bcase%22string%22:d=w(a,b);break;case%22array%22:for(g=a.length,f=0;g%3Ef;f++)switch(!0)%7Bcase%20r(b%5B0%5D):d=l(a%5Bf%5D,b%5B0%5D);break;case%20s(b%5B0%5D):d=c(a%5Bf%5D,b%5B0%5D);break;default:d=w(a%5Bf%5D,b%5B0%5D)%7D%7Dreturn!0%7Dvar%20e=!0;if(w(b,%22undefined%22))U.invalidType(a,b);else%20switch(!0)%7Bcase%20r(b):e=l(a,b);break;case%20s(b):e=c(a,b);break;default:e=d(a,b)%7Dreturn%20e%7Dfunction%20L(a,b)%7Bfunction%20c(a,b)%7Bvar%20c=!1,d=%22%22;return%20d=a.constructor.name,%22Function%22===d&&(d=a.name),c=d===b%7Dvar%20d=!0;return%20s(b.type)?(d=c(V.get(a),q(b.type))&&-1!==b.value.indexOf(a),d%7C%7CU.invalidEnumValue(a,b.type)):(d=w(a,b.type)&&-1!==b.value.indexOf(a),d%7C%7CU.invalidEnumValue(a,b.type)),d%7Dfunction%20M(a,b)%7Bfunction%20c()%7Bvar%20b=!0,c=%5B%5D;return%20j=q(i),j=a%5Bj%5D,r(j)?ia.type%5Bj%5D?ia.type%5Bj%5D.schema?b=M(f,ia.type%5Bj%5D.schema):(b=w(f,ia.type%5Bj%5D.type),c=ia.type%5Bj%5D.value,c&&(b=v(f,c))):b=!1:b=%22array%22===j?Array.isArray(f):s(j)?w(f,%22object%22)%7C%7Cw(f,%22string%22):w(f,j),b%7C%7CU.invalidPropertyType(f,j,f),b%7Dfunction%20d()%7Bvar%20a=!0;switch(k=t(i))%7Bcase%22string%22:if(r(k))a=M(f,i);else%20if(!w(f,i))%7BU.invalidPropertyType(e,i,f),a=!1;break%7Dbreak;case%22array%22:for(l=f.length,m=0;l%3Em;m++)if(r(i%5B0%5D))a=M(f%5Bm%5D,ia.type%5Bi%5B0%5D%5D.schema);else%20if(!w(f%5Bm%5D,i%5B0%5D))%7BU.invalidPropertyType(f%5Bm%5D,i%5B0%5D,f%5Bm%5D),a=!1;break%7D%7Dreturn%20a%7Dvar%20e=%22%22,f=null,g=!0,h=!0,i=%22%22,j=%22%22,k=%22%22,l=0,m=0;for(e%20in%20a)%7Bif(f=a%5Be%5D,w(b%5Be%5D,%22undefined%22))return%20U.unknownProperty(e,b),!1;switch(i=b%5Be%5D.type,!0)%7Bcase%20s(i):g=c();break;default:g=d()%7D%7Dfor(e%20in%20b)if(f=b%5Be%5D,h=f.mandatory,h===!0&&w(a%5Be%5D,%22undefined%22))%7BU.missingProperty(e),g=!1;break%7Dreturn%20g%7Dfunction%20N(a,b,c,d)%7Bfunction%20e(a,b)%7Bvar%20c=!0,d=%22%22;if(d=ia.type%5Bb%5D)switch(!0)%7Bcase!w(d.schema,%22undefined%22):c=N(a,d.schema);break;case!w(d.value,%22undefined%22):c=L(a,d);break;default:c=K(a,d.type)%7Delse%20c=!1;return%20c%7Dfunction%20f(b,c)%7Bvar%20e=!0,f=null,g=!1;if(m=q(c),b&&b.id?(f=b,g=!0):f=V.get(b),w(f,%22undefined%22))switch(!0)%7Bcase%20w(b,%22object%22)&&null!==b&&Object.keys(b).length%3E0:case%20w(b,%22string%22):U.canNotYetValidate(b,m)%7Delse%20S(f.constructor.name,m)?g&&d&&(a%5Bh%5D=f.id()):(e=!1,U.invalidType(b,m));return%20e%7Dfunction%20g(a,b)%7Bvar%20c=!0,e=%22%22;switch(n=t(b))%7Bcase%22string%22:if(r(n))c=N(a,b);else%20if(%22array%22===b)%7Bif(%22array%22!==t(a))%7BU.invalidPropertyType(h,b,a),c=!1;break%7D%7Delse%20if(t(a)!==b)%7BU.invalidPropertyType(h,b,a),c=!1;break%7Dbreak;case%22array%22:if(Array.isArray(a))%7Bfor(o=a.length,e=b%5B0%5D,p=0;o%3Ep;p++)if(r(e))c=N(a%5Bp%5D,ia.type%5Be%5D.schema);else%20if(s(e))if(%22string%22===t(a%5Bp%5D))%7Bif(u(V.get(a%5Bp%5D))!==q(e))%7BU.invalidClassName(JSON.stringify(a%5Bp%5D),q(e),u(a%5Bp%5D)),c=!1;break%7D%7Delse%7Bif(u(a%5Bp%5D)!==q(e))%7BU.invalidClassName(JSON.stringify(a%5Bp%5D),q(e),u(a%5Bp%5D)),c=!1;break%7Dd&&(a%5Bp%5D=a%5Bp%5D.id())%7Delse%20if(t(a%5Bp%5D)!==e)%7BU.invalidPropertyType(a%5Bp%5D,e,a%5Bp%5D),c=!1;break%7D%7Delse%20c=!1,U.invalidType(a,%22array%22);break;default:c=!1,U.unknownType(a)%7Dreturn%20c%7Dvar%20h=%22%22,i=null,j=!0,k=!0,l=%22%22,m=%22%22,n=%22%22,o=0,p=0;w(c,%22undefined%22)&&(c=!0),w(d,%22undefined%22)&&(c=!1);for(h%20in%20a)if(i=a%5Bh%5D,w(b%5Bh%5D,%22undefined%22)&&%22_core%22!==h)%7Bif(c)return%20U.unknownProperty(h,b),!1%7Delse%20switch(l=%22_core%22!==h?b%5Bh%5D.type:%22boolean%22,%22_id%22===h&&(l=%22string%22),!0)%7Bcase%20r(l):j=e(i,l);break;case%20s(l):j=f(i,l);break;default:j=g(i,l)%7Dfor(h%20in%20b)i=b%5Bh%5D,k=i.mandatory,w(a%5Bh%5D,%22undefined%22)&&k===!0&&(U.missingProperty(h),j=!1);return%20j%7Dfunction%20O(a,b)%7Bvar%20c=%22%22,d=null,e=!0,f=%22%22;for(c%20in%20b)d=b%5Bc%5D,e=d.mandatory,f=d%5B%22default%22%5D,w(a%5Bc%5D,%22undefined%22)&&(e!==!1%7C%7Cw(f,%22undefined%22)%7C%7C(a%5Bc%5D=f))%7Dfunction%20P(a)%7Bvar%20b=null;return%20ia.model%5Ba%5D&&(b=ia.model%5Ba%5D),b%7Dfunction%20Q()%7Bvar%20a=ia.metadef.schema;return%20a%7Dfunction%20R(a)%7Bvar%20b=%5B%5D,c=null;return%20c=ia.model%5Ba%5D,c&&(b=c%5BZ%5D),b%7C%7C(b=%5B%5D),b%7Dfunction%20S(a,b)%7Bfunction%20c(a,b)%7Bvar%20d=!1,e=%5B%5D,f=0,g=0;if(e=R(a),0!==e.length)if(-1!==e.indexOf(b))d=!0;else%20for(f=0;g%3Ef&&!(d=c(e%5Bf%5D,b));f++);return%20d%7Dvar%20d=!1,e=%5B%5D,f=0,g=0;if(a!==b)%7Bif(e=R(a),g=e.length,0!==e.length)if(-1!==e.indexOf(b))d=!0;else%20for(f=0;g%3Ef&&!(d=c(e%5Bf%5D,b));f++);%7Delse%20d=!0;return%20d%7Dvar%20T=a(%22./db.js%22),U=a(%22./log.js%22),V=a(%22./component.js%22),W=a(%22./workflow.js%22),X=%22_id%22,Y=%22_name%22,Z=%22_inherit%22,$=%22_schema%22,_=%22_class%22,aa=%22_core%22,ba=%22method%22,ca=%22event%22,da=%22property%22,ea=%22link%22,fa=%22collection%22,ga=%5B%22property%22,%22collection%22,%22link%22,%22method%22,%22event%22%5D,ha=%5B%22boolean%22,%22string%22,%22number%22,%22object%22,%22function%22,%22array%22%5D,ia=%7Bmetadef:%7B%7D,catalog:%7B%7D,inheritance:%7B%7D,inheritanceTree:%7B%7D,model:%7B%7D,states:%7B%7D,type:%7B%7D,implementation:%7B%7D%7D;c.init=B,c.clear=C,c.schema=z,c.type=A,c.create=D,c.get=P,c.getMetaDef=Q,c.getParents=R,c.inheritFrom=S,c.isValidObject=N,c.prepareObject=O,c.isValidType=K,c.isValidEnum=L,c.isValidState=J,c.isEvent=E,c.isProperty=F,c.isLink=G,c.isCollection=H,c.isMethod=I%7D,%7B%22./component.js%22:3,%22./db.js%22:4,%22./log.js%22:6,%22./workflow.js%22:10%7D%5D,8:%5Bfunction(a,b,c)%7B%22use%20strict%22;var%20d=a(%22./db.js%22),e=a(%22./component.js%22),f=a(%22./metamodel.js%22),g=a(%22../build/system/system.js%22),h=a(%22./helper.js%22),i=%22%22,j=%22%22;h.polyfill(),f.init(),i=d.system(g.system),j=e.get(i),j.main(),b.exports=e.get(%22runtime%22)%7D,%7B%22../build/system/system.js%22:1,%22./component.js%22:3,%22./db.js%22:4,%22./helper.js%22:5,%22./metamodel.js%22:7%7D%5D,9:%5Bfunction(a,b,c)%7B%22use%20strict%22;function%20d(a,b,c)%7Bh%5Ba%5D=%7Bname:b,parameters:%7Bdata:c%7D%7D,g.store.RuntimeState%5Ba%5D=%7Bname:b,parameters:%7Bdata:c%7D%7D%7Dfunction%20e(a)%7Breturn%20h%5Ba%5D%7Dfunction%20f()%7Bh=%7B%7D%7Dvar%20g=a(%22./db.js%22),h=%7B%7D;c.set=d,c.get=e,c.clear=f%7D,%7B%22./db.js%22:4%7D%5D,10:%5Bfunction(a,b,c)%7B%22use%20strict%22;function%20d(a)%7Bthis.message=a,this.name=%22RuntimeError%22%7Dfunction%20e(a,b)%7Bvar%20c=null,d=%5B%5D,e=%5B%5D,f=0,g=0;if(c=s.get(a)%5Bb%5D)%7Bif(d=c.params)for(f=d.length,g=0;f%3Eg;g++)e.push(d%5Bg%5D.name)%7Delse%20x.unknownMethod(a,b);return%20e%7Dfunction%20f(a,b)%7Bvar%20c=null,d=%5B%5D,e=%5B%5D,f=0,g=0,h=0,i=0;if(c=s.get(a)%5Bb%5D)%7Bif(d=c.params)for(f=d.length,g=0;f%3Eg;g++)%22undefined%22!=typeof%20d%5Bg%5D.mandatory&&d%5Bg%5D.mandatory!==!0%7C%7C(h+=1),i+=1;e.push(h),e.push(i)%7Delse%20x.unknownMethod(a,b);return%20e%7Dfunction%20g(a,b,c)%7Bvar%20d=null,e=%5B%5D,f=%5B%5D,g=0,h=0;if(d=s.get(a)%5Bb%5D)%7Bif(e=d.params)for(g=e.length,h=0;g%3Eh;h++)e%5Bh%5D.mandatory===!1&&%22undefined%22==typeof%20c%5Bh%5D?f.push(e%5Bh%5D%5B%22default%22%5D):f.push(c%5Bh%5D)%7Delse%20x.unknownMethod(a,b);return%20f%7Dfunction%20h(a,b)%7Bvar%20c=null,d=null;return%20c=s.get(a)%5Bb%5D.result,c&&(d=c),d%7Dfunction%20i(a,b)%7Bvar%20c=null,d=%5B%5D,e=%5B%5D,f=0,g=0;if(c=s.get(a)%5Bb%5D)%7Bif(d=c.params)for(f=d.length,g=0;f%3Eg;g++)e.push(d%5Bg%5D.type)%7Delse%20x.unknownMethod(a,b);return%20e%7Dfunction%20j(a)%7Ba=a%7C%7C%7B%7D;var%20b=a.component%7C%7Cnull,c=a.methodName%7C%7C%22%22,d=a.methodResult%7C%7Cvoid%200,e=%22%22,f=null,g=!0;return%20e=%22Function%22===b.constructor.name?b.name:b.constructor.name,f=h(e,c),null!==f&&(%22array%22===f?Array.isArray(d)%7C%7C(g=!1,x.invalidResultType(b.id(),c)):typeof%20d!==f&&(g=!1,x.invalidResultType(b.id(),c))),g%7Dfunction%20k(a,b,c)%7Bvar%20d=u.getActions(a.id(),b),e=%5B%5D,f=0,g=0,h=null;if(!d.length%7C%7Cc)if(%22Function%22!==a.constructor.name)d=d.concat(k(t.get(a.constructor.name),b,c));else%20for(e=s.getParents(a.name),f=e.length,g=0;f%3Eg&&(h=t.get(e%5Bg%5D),h?d=d.concat(k(h,b,c)):x.unknownComponent(e%5Bg%5D,a.name),!d.length);g++);return%20d.length&&d.reverse(),d%7Dfunction%20l(a,b,e,f,h)%7Bvar%20i=null,j=%5B%5D,k=%22%22,l=0,m=0;k=%22Function%22===a.constructor.name?a.name:a.constructor.name,s.isProperty(b,k)%7C%7Cs.isLink(b,k)%7C%7Cs.isCollection(b,k)%7C%7C(f=g(k,b,f));try%7Bfor(m=f.length,l=0;m%3El;l++)j.push(f%5Bl%5D);e.useCoreAPI&&(j.push(t),j.push(y),j.push(s),j.push(c),j.push(u),j.push(v)),h?setTimeout(e.action.bind.apply(e.action,%5Ba%5D.concat(j)),0):i=e.action.apply(a,j)%7Dcatch(n)%7Bif(n%20instanceof%20d)throw%20n;a&&a.error&&a.error(%7Bmessage:%22error%20when%20trying%20to%20call%20the%20method%20'%22+b+%22'%20on%20component%20'%22+a.id()+%22'%22,error:n%7D),w.getRuntime()&&w.getRuntime().error(%7Bmessage:%22error%20when%20trying%20to%20call%20the%20method%20'%22+b+%22'%20on%20component%20'%22+a.id()+%22'%22,error:n%7D)%7Dreturn%20i%7Dfunction%20m(a,b,c)%7Bvar%20d=%22%22,e=-1,g=%22%22,h=%22%22,i=%5B%5D,j=0,k=%5B%5D,l=!1,m=!1,n=!1,o=!1;switch(d=c.toString(),e=d.indexOf(%22%7B%22),g=d.substring(0,e),h=g.split(%22(%22)%5B1%5D.replace(%22)%22,%22%22).trim(),i=h.split(%22,%22),%22%22===i%5B0%5D&&(i=%5B%5D),j=i.length,l=s.isProperty(b,a),m=s.isLink(b,a),n=s.isCollection(b,a),!0)%7Bcase%20n:k=%5B3,3%5D;break;case%20l:k=%5B1,1%5D;break;case%20m:k=%5B1,1%5D;break;default:k=f(a,b)%7Dreturn%20k%5B0%5D%3C=j&&j%3C=k%5B1%5D&&(o=!0),o%7Dfunction%20n(a)%7Ba=a%7C%7C%7B%7D;var%20b=a.component%7C%7Cnull,c=a.methodName%7C%7C%22%22,d=a.args%7C%7C%22%22,g=%5B%5D,h=%5B%5D,j=%5B%5D,k=%22%22,l=d.length,m=0,n=null,o=!0,p=!1,q=!1,r=!1;switch(k=%22Function%22===b.constructor.name?b.name:b.constructor.name,p=s.isProperty(c,k),q=s.isLink(c,k),r=s.isCollection(c,k),g=e(k,c),!0)%7Bcase%20r:h=%5B%22number%22,s.get(k)%5Bc%5D.type%5B0%5D,%22string%22%5D,%0Aj=%5B3,3%5D;break;case%20p:h=%5Bs.get(k)%5Bc%5D.type%5D,j=%5B1,1%5D;break;case%20q:h=%5Bs.get(k)%5Bc%5D.type%5D,j=%5B1,1%5D;break;default:h=i(k,c),j=f(k,c)%7Dfor(%22undefined%22==typeof%20l&&(l=1),-1===j.indexOf(l)&&(o=!1,x.invalidParamNumber(b.id(),c)),m=0;l%3Em;m++)if(n=d%5Bm%5D,%22undefined%22==typeof%20n)%7Bif(!(m%3Cj%5B0%5D))continue;o=!1,x.invalidParamNumber(b.id(),c)%7Delse%20s.isValidType(n,h%5Bm%5D)%7C%7C(o=!1,x.invalidParamType(b.id(),c,g%5Bm%5D));return%20o%7Dfunction%20o(a,b)%7Bvar%20c=!1,d=!1,e=!1,f=!1,g=%5B%5D,h=null,i=null,j=%22%22,k=null;g=y.RuntimeBehavior.find(%7B_id:a%7D),k=u.get(a),1===g.length&&(h=g%5B0%5D,i=t.get(h.component),i&&(j=%22Function%22===i.constructor.name?i.name:i.constructor.name,c=s.isEvent(h.state,j),d=s.isProperty(h.state,j),e=s.isLink(h.state,j),f=s.isCollection(h.state,j),(c%7C%7Cd%7C%7Cf%7C%7Ce)&&l(i,h.state,%7BuseCoreAPI:h.useCoreAPI,action:k%7D,b,!0)))%7Dfunction%20p(a)%7Ba=a%7C%7C%7B%7D,a.component=a.component%7C%7C%22%22,a.state=a.state%7C%7C%22%22,a.data=a.data%7C%7C%5B%5D;var%20b=null,c=%22%22,d=%5B%5D,e=null,f=null,g=0,h=0,i=!1,m=!1,o=!1,p=!1,q=!1;if(c=v.get(a.component),%22destroy%22===c&&x.invalidUseOfComponent(a.component),b=t.get(a.component),b&&(i=%22Function%22===b.constructor.name?b.name:b.constructor.name,q=s.isEvent(a.state,i),m=s.isProperty(a.state,i),o=s.isLink(a.state,i),p=s.isCollection(a.state,i),d=k(b,a.state,q)),d.length)%7Bif(n(%7Bcomponent:b,methodName:a.state,args:a.data%7D))if(q%7C%7Cm%7C%7Co%7C%7Cp)%7Bfor(h=d.length,g=0;h%3Eg;g++)e=d%5Bg%5D,l(b,a.state,e,a.data,!0);v.set(b.id(),a.state,a.data)%7Delse%20e=d%5B0%5D,f=l(b,a.state,e,a.data,!1),j(%7Bcomponent:b,methodName:a.state,methodResult:f%7D);return%20f%7Db&&(q%7C%7Cm%7C%7Co%7C%7Cp)&&v.set(b.id(),a.state,a.data)%7Dfunction%20q(a)%7Bif(a=a%7C%7C%7B%7D,%22undefined%22==typeof%20a.error&&(a.error=!1),a.message=a.message%7C%7C%22%22,c.state=function()%7B%7D,a.error)throw%20new%20d(a.message?%22runtime%20has%20been%20stopped%20because%20%22+a.message:%22runtime%20has%20been%20stopped%20because%20of%20an%20unknown%20error%22);console.warn(%22runtime:%20runtime%20has%20been%20stopped%22)%7Dfunction%20r()%7Bc.state=p,x.workflowRestarted()%7Dvar%20s=a(%22./metamodel.js%22),t=a(%22./component.js%22),u=a(%22./behavior.js%22),v=a(%22./state.js%22),w=a(%22./helper.js%22),x=a(%22./log.js%22),y=a(%22./db.js%22);d.prototype=new%20Error,d.prototype.constructor=d,c.state=p,c.stop=q,c.restart=r,c.checkParams=n,c.validParamNumbers=m,c.action=o%7D,%7B%22./behavior.js%22:2,%22./component.js%22:3,%22./db.js%22:4,%22./helper.js%22:5,%22./log.js%22:6,%22./metamodel.js%22:7,%22./state.js%22:9%7D%5D%7D,%7B%7D,%5B8%5D)(8)%7D);"
            }
        }
    }
}
