{
	"component": "Designer",
	"state": "open",
	"action": "function open(url, target, isExt) {\n    var ref = null,\n        that = this;\n    \n    function _getRelativePath() {\n      var result = 'index.html';\n      \n      switch (that.context()) {\n        case 'system':\n          if (that.system()) {\n            result = result + '#' + that.system().id() + '#system#' + that.system().name();\n          }\n          break;\n        case 'schemas':\n          if (that.system()) {\n            result = result + '#' + that.system().id() + '#schemas';\n            if (that.space()) {\n             result = result + '#' + that.space();\n            }\n          }\n          break;\n        case 'models':\n          if (that.system()) {\n            result = result + '#' + that.system().id() + '#models';\n            if (that.space()) {\n             result = result + '#' + that.space();\n            }\n          }\n          break;\n        case 'types':\n          if (that.system()) {\n            result = result + '#' + that.system().id() + '#types';\n            if (that.space()) {\n             result = result + '#' + that.space();\n            }\n          }\n          break;\n        case 'behaviors':\n          if (that.system()) {\n            result = result + '#' + that.system().id() + '#behaviors';\n            if (that.space()) {\n             result = result + '#' + that.space();\n            }\n          }\n          break;\n        case 'components':\n          if (that.system()) {\n            result = result + '#' + that.system().id() + '#components';\n            if (that.space()) {\n             result = result + '#' + that.space();\n            }\n          }\n          break;\n        default:\n          break;\n      }\n      \n      return result;\n    }\n    \n    switch(true) {\n      case typeof require !== 'undefined':\n        if (isExt) {\n            ref = require('electron').shell.openExternal(url ,target);  \n        } else {\n            ref = window.open(url, target);\n        }\n        break;\n      case typeof cordova !== 'undefined':\n        if (isExt) {\n          window.open(url, '_system');\n        } else { \n          if (url.indexOf('index.html') === -1) {\n            var system = this.require('db').collections().System.find({\n                '_id': this.require('designer').system().id()\n            })[0];\n            system = JSON.parse(JSON.stringify(system));\n            delete system.classInfo;\n            \n            url = url + '?system=' + encodeURIComponent(JSON.stringify(system));\n            url = url + '&ref=' + encodeURIComponent(_getRelativePath());\n          }\n          document.location.href = url;\n        }\n        break;\n      default:\n        ref = window.open(url, target);\n        break;\n    }\n    \n    return ref;\n}"
}