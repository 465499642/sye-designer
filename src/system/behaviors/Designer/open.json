{
	"component": "Designer",
	"state": "open",
	"action": "function open(url, target, isExt) {\n    var ref = null;\n    \n    function _getRelativePath() {\n      var result = '',\n          paths = [];\n      \n      paths = window.location.href.split('/');\n      result = paths[paths.length - 1];\n      result = result.split('?messages=')[0];\n      \n      return result;\n    }\n    \n    switch(true) {\n      case typeof require !== 'undefined':\n        if (isExt) {\n            ref = require('electron').shell.openExternal(url ,target);  \n        } else {\n            ref = window.open(url, target);\n        }\n        break;\n      case typeof cordova !== 'undefined':\n        if (isExt) {\n          window.open(url, '_system');\n        } else { \n          if (url.indexOf('index.html') === -1) {\n            var system = this.require('db').collections().System.find({\n                '_id': this.require('designer').system().id()\n            })[0];\n            system = JSON.parse(JSON.stringify(system));\n            delete system.classInfo;\n            \n            url = url + '?system=' + encodeURIComponent(JSON.stringify(system));\n            url = url + '&ref=' + encodeURIComponent(_getRelativePath());\n          }\n          document.location.href = url;\n        }\n        break;\n      default:\n        ref = window.open(url, target);\n        break;\n    }\n    \n    return ref;\n}"
}