{
  "name": "editor-component",
  "master": true,
  "subsystem": false,
  "version": "1.0.0",
  "description": "",
  "schemas": {
    "a1097d1ea0812005": {
      "_name": "MenuBar",
      "designer": "property",
      "logo": "property",
      "header": "property",
      "items": "collection",
      "actions": "collection",
      "render": "method",
      "clear": "method",
      "_id": "a1097d1ea0812005",
      "_inherit": [
        "RuntimeComponent"
      ]
    },
    "l1d113198721599d": {
      "_name": "MenuItem",
      "html": "link",
      "position": "property",
      "type": "property",
      "name": "property",
      "hide": "method",
      "show": "method",
      "render": "method",
      "click": "event",
      "_id": "l1d113198721599d",
      "_inherit": [
        "RuntimeComponent"
      ]
    },
    "f1257f17deb16097": {
      "_name": "ToolBar",
      "designer": "property",
      "items": "collection",
      "render": "method",
      "_id": "f1257f17deb16097",
      "_inherit": [
        "RuntimeComponent"
      ]
    },
    "f1092816b571e03c": {
      "_name": "Workspace",
      "designer": "property",
      "create": "method",
      "load": "method",
      "clear": "method",
      "refresh": "method",
      "render": "method",
      "_id": "f1092816b571e03c",
      "_inherit": [
        "RuntimeComponent"
      ]
    },
    "k1b97018e111d0e3": {
      "_name": "Server",
      "designer": "property",
      "start": "method",
      "_id": "k1b97018e111d0e3",
      "_inherit": [
        "RuntimeComponent"
      ]
    },
    "o1ead8184af1a83e": {
      "_name": "Designer",
      "_inherit": [
        "RuntimeComponent"
      ],
      "version": "property",
      "menubar": "property",
      "toolbar": "property",
      "workspace": "property",
      "spaces": "property",
      "context": "property",
      "oldContext": "property",
      "space": "property",
      "server": "property",
      "system": "property",
      "debug": "property",
      "filter": "property",
      "type": "property",
      "store": "property",
      "state": "property",
      "runWindow": "property",
      "debugWindow": "property",
      "updateRouter": "method",
      "syncModel": "method",
      "syncBehavior": "method",
      "syncComponent": "method",
      "createModel": "method",
      "createBehavior": "method",
      "deleteSchema": "method",
      "linkModel": "method",
      "refresh": "method",
      "save": "method",
      "saveCordova": "method",
      "saveAs": "method",
      "clear": "method",
      "check": "method",
      "welcome": "method",
      "generateId": "method",
      "open": "method",
      "render": "event",
      "logs": "collection",
      "isCordova": "method",
      "isElectron": "method",
      "updateCordovaContext": "method",
      "messages": "property",
      "runMessages": "method",
      "lastPage": "property",
      "getGeneratedSchema": "method",
      "getGeneratedModel": "method",
      "mergeBehavior": "method",
      "_id": "o1ead8184af1a83e"
    }
  },
  "models": {
    "y18b1217aaa13456": {
      "_id": "y18b1217aaa13456",
      "_name": "MenuBar",
      "designer": {
        "type": "@Designer",
        "readOnly": true,
        "mandatory": false,
        "default": {}
      },
      "logo": {
        "type": "@MenuLogo",
        "readOnly": false,
        "mandatory": false,
        "default": {}
      },
      "header": {
        "type": "@MenuHeader",
        "readOnly": false,
        "mandatory": false,
        "default": {}
      },
      "items": {
        "type": [
          "@MenuItem"
        ],
        "readOnly": false,
        "mandatory": false,
        "default": []
      },
      "actions": {
        "type": [
          "@MenuAction"
        ],
        "readOnly": false,
        "mandatory": false,
        "default": []
      },
      "render": {},
      "clear": {}
    },
    "u1f9a01abe31b3bf": {
      "_id": "u1f9a01abe31b3bf",
      "_name": "MenuItem",
      "html": {
        "type": "@HTML",
        "readOnly": false,
        "mandatory": false,
        "default": {}
      },
      "position": {
        "type": "number",
        "readOnly": false,
        "mandatory": false,
        "default": 0
      },
      "type": {
        "type": "editorType",
        "readOnly": false,
        "mandatory": false,
        "default": "designer"
      },
      "name": {
        "type": "string",
        "readOnly": false,
        "mandatory": false,
        "default": ""
      },
      "hide": {},
      "show": {},
      "render": {},
      "click": {}
    },
    "l129a713e681c903": {
      "_id": "l129a713e681c903",
      "_name": "ToolBar",
      "designer": {
        "type": "@Designer",
        "readOnly": true,
        "mandatory": true,
        "default": {}
      },
      "items": {
        "type": [
          "@ToolBarItem"
        ],
        "readOnly": false,
        "mandatory": false,
        "default": []
      },
      "render": {}
    },
    "v1435e1809e10be7": {
      "_id": "v1435e1809e10be7",
      "_name": "Workspace",
      "designer": {
        "type": "@Designer",
        "readOnly": true,
        "mandatory": true,
        "default": {}
      },
      "create": {},
      "load": {},
      "clear": {},
      "refresh": {},
      "render": {}
    },
    "e1ca371b8a41af7b": {
      "_id": "e1ca371b8a41af7b",
      "_name": "Server",
      "designer": {
        "type": "@Designer",
        "readOnly": true,
        "mandatory": true,
        "default": {}
      },
      "start": {}
    },
    "q129be1c61b18285": {
      "_id": "q129be1c61b18285",
      "_name": "Designer",
      "version": {
        "type": "string",
        "readOnly": false,
        "mandatory": false,
        "default": "2.0.0-alpha.1"
      },
      "menubar": {
        "type": "@MenuBar",
        "readOnly": false,
        "mandatory": false,
        "default": {}
      },
      "toolbar": {
        "type": "@ToolBar",
        "readOnly": false,
        "mandatory": false,
        "default": {}
      },
      "workspace": {
        "type": "@Workspace",
        "readOnly": false,
        "mandatory": false,
        "default": {}
      },
      "spaces": {
        "type": "@Spaces",
        "readOnly": false,
        "mandatory": false,
        "default": {}
      },
      "context": {
        "type": "string",
        "readOnly": false,
        "mandatory": false,
        "default": ""
      },
      "oldContext": {
        "type": "string",
        "readOnly": false,
        "mandatory": false,
        "default": ""
      },
      "space": {
        "type": "string",
        "readOnly": false,
        "mandatory": false,
        "default": ""
      },
      "server": {
        "type": "@Server",
        "readOnly": false,
        "mandatory": false,
        "default": {}
      },
      "system": {
        "type": "@System",
        "readOnly": false,
        "mandatory": false,
        "default": {}
      },
      "debug": {
        "type": "boolean",
        "readOnly": false,
        "mandatory": false,
        "default": false
      },
      "filter": {
        "type": "string",
        "readOnly": false,
        "mandatory": false,
        "default": ""
      },
      "type": {
        "type": "editorType",
        "readOnly": false,
        "mandatory": false,
        "default": "designer"
      },
      "store": {
        "type": "@Store",
        "readOnly": false,
        "mandatory": false,
        "default": {}
      },
      "state": {
        "type": "@DesignerState",
        "readOnly": false,
        "mandatory": false,
        "default": {}
      },
      "runWindow": {
        "type": "object",
        "readOnly": false,
        "mandatory": false,
        "default": null
      },
      "debugWindow": {
        "type": "object",
        "readOnly": false,
        "mandatory": false,
        "default": null
      },
      "updateRouter": {},
      "syncModel": {
        "params": [
          {
            "name": "schema",
            "type": "object",
            "mandatory": false,
            "default": {}
          }
        ]
      },
      "syncBehavior": {
        "params": [
          {
            "name": "model",
            "type": "object",
            "mandatory": false,
            "default": {}
          }
        ]
      },
      "syncComponent": {
        "params": [
          {
            "name": "model",
            "type": "object",
            "mandatory": false,
            "default": {}
          },
          {
            "name": "forceDelete",
            "type": "boolean",
            "mandatory": false,
            "default": true
          }
        ]
      },
      "createModel": {
        "params": [
          {
            "name": "schema",
            "type": "object",
            "mandatory": false,
            "default": {}
          }
        ]
      },
      "createBehavior": {
        "params": [
          {
            "name": "type",
            "type": "string",
            "mandatory": false,
            "default": "method"
          },
          {
            "name": "model",
            "type": "string",
            "mandatory": false,
            "default": ""
          },
          {
            "name": "state",
            "type": "string",
            "mandatory": false,
            "default": ""
          },
          {
            "name": "def",
            "type": "object",
            "mandatory": false,
            "default": {}
          }
        ]
      },
      "deleteSchema": {
        "params": [
          {
            "name": "schemaId",
            "type": "string",
            "mandatory": false,
            "default": ""
          }
        ]
      },
      "linkModel": {
        "params": [
          {
            "name": "source",
            "type": "string",
            "mandatory": false,
            "default": ""
          },
          {
            "name": "target",
            "type": "string",
            "mandatory": false,
            "default": ""
          }
        ]
      },
      "refresh": {},
      "save": {},
      "saveCordova": {},
      "saveAs": {
        "params": [
          {
            "name": "data",
            "type": "object",
            "mandatory": false,
            "default": {}
          },
          {
            "name": "fileName",
            "type": "string",
            "mandatory": false,
            "default": ""
          }
        ]
      },
      "clear": {},
      "check": {},
      "welcome": {},
      "generateId": {
        "result": "string"
      },
      "open": {
        "params": [
          {
            "name": "url",
            "type": "string",
            "mandatory": false,
            "default": ""
          },
          {
            "name": "target",
            "type": "string",
            "mandatory": false,
            "default": ""
          },
          {
            "name": "isExt",
            "type": "boolean",
            "mandatory": false,
            "default": false
          }
        ]
      },
      "render": {},
      "logs": {
        "type": [
          "@Log"
        ],
        "readOnly": false,
        "mandatory": false,
        "default": []
      },
      "isCordova": {
        "result": "boolean"
      },
      "isElectron": {
        "result": "boolean"
      },
      "updateCordovaContext": {},
      "messages": {
        "type": "array",
        "readOnly": false,
        "mandatory": false,
        "default": []
      },
      "runMessages": {
        "params": [
          {
            "name": "messages",
            "type": "array",
            "mandatory": true,
            "default": []
          }
        ]
      },
      "lastPage": {
        "type": "string",
        "readOnly": false,
        "mandatory": false,
        "default": "index.html"
      },
      "getGeneratedSchema": {
        "params": [
          {
            "name": "schema",
            "type": "string",
            "mandatory": true,
            "default": ""
          }
        ],
        "result": "object"
      },
      "getGeneratedModel": {
        "params": [
          {
            "name": "model",
            "type": "string",
            "mandatory": true,
            "default": ""
          }
        ],
        "result": "object"
      },
      "mergeBehavior": {
        "params": [
          {
            "name": "behaviors",
            "type": "object",
            "mandatory": true,
            "default": {}
          },
          {
            "name": "behavior",
            "type": "object",
            "mandatory": true,
            "default": {}
          },
          {
            "name": "sysId",
            "type": "string",
            "mandatory": true,
            "default": ""
          },
          {
            "name": "systemName",
            "type": "string",
            "mandatory": true,
            "default": ""
          }
        ]
      }
    }
  },
  "behaviors": {
    "c140f716fc01f40f": {
      "_id": "c140f716fc01f40f",
      "component": "MenuBar",
      "state": "init",
      "action": "function init(conf) { \n  var menuHeader = [],\n    menuItems = [],\n    menuActions = [],\n    menuSearch = [],\n    self = this;\n\n  // menu header\n  menuHeader = this.require('db').collections().MenuHeader.find({\n    \"type\": this.designer().type()\n  });\n  this.header(this.require(menuHeader[0]._id));\n\n  // menu items\n  menuItems = this.require('db').collections().MenuItem.find({\n    \"type\": this.designer().type()\n  });\n\n  menuItems.sort(function (itemA, itemB) {\n    if (itemA.position > itemB.position) {\n      return 1;\n    }\n    if (itemA.position < itemB.position) {\n      return -1;\n    }\n    return 0;\n  });\n\n  menuItems.forEach(function (menuItem) {\n    var id = menuItem._id;\n    self.items().push(self.require(id));\n  });\n\n  // menu actions\n  menuActions = this.require('db').collections().MenuAction.find({\n    \"type\": this.designer().type()\n  });\n\n  menuSearch = this.require('db').collections().MenuSearch.find({\n    \"type\": this.designer().type()\n  });\n\n  menuActions = menuActions.concat(menuSearch);\n\n  menuActions.sort(function (itemA, itemB) {\n    if (itemA.position > itemB.position) {\n      return 1;\n    }\n    if (itemA.position < itemB.position) {\n      return -1;\n    }\n    return 0;\n  });\n\n  menuActions.forEach(function (menuAction) {\n    var id = menuAction._id;\n    self.actions().push(self.require(id));\n  });\n}",
      "useCoreAPI": false,
      "core": false
    },
    "m12dab1ab2215335": {
      "_id": "m12dab1ab2215335",
      "component": "MenuBar",
      "state": "render",
      "action": "function render() { \n  var length = 0,\n    i = 0,\n    item = null,\n    domHeader = document.getElementById('designer-menubar-header'),\n    domItems = document.getElementById('designer-menubar-items'),\n    domAction = document.getElementById('designer-menubar-actions'),\n    self = this;\n\n  function _removeActive() {\n    var length = 0,\n      i = 0,\n      item = null;\n\n    length = domItems.children.length;\n    for (i = 0; i < length; i++) {\n      item = domItems.children[i];\n      $(item).removeClass('active');\n    }\n  }\n\n  // header\n  domHeader.insertAdjacentHTML('afterbegin', this.header().html().source());\n\n  this.items().forEach(function (item) {\n    domItems.insertAdjacentHTML('beforeend', '<li>' + item.html().source() + '</>');\n  });\n\n  // events\n  var callback = function () {\n    _removeActive();\n    $(this).addClass('active');\n  };\n  length = domItems.children.length;\n  for (i = 0; i < length; i++) {\n    item = domItems.children[i];\n    item.addEventListener('click', callback);\n    item.addEventListener('click', function () {\n      this.click();\n    }.bind(self.items(i)));\n  }\n\n  // actions\n  this.actions().forEach(function (action) {\n    domAction.insertAdjacentHTML('afterbegin', '<li>' + action.html().source() + '</>');\n  });\n\n  // focus on first element\n  if (length > 0) {\n    this.designer().context(this.items(0).name());\n    item = domItems.children[0];\n    $(item).addClass('active');\n  }\n}",
      "useCoreAPI": false,
      "core": false
    },
    "s10e461a0831354a": {
      "_id": "s10e461a0831354a",
      "component": "MenuItem",
      "state": "click",
      "action": "function click() { \n  var designer = this.require('designer'),\n    editor = this.require('editor'),\n    extra = null,\n    oldContext = '',\n    context = '',\n    val = '';\n\n  designer.oldContext(designer.context());\n  designer.context(this.name());\n\n  extra = designer.store().extra();\n  oldContext = designer.oldContext();\n  context = designer.context();\n  val = editor.getValue();\n\n  if (oldContext) {\n    if (oldContext !== 'runtimeComponent') {\n      if (extra[oldContext] === 'json') {\n        designer.store().data()[oldContext] = JSON.parse(editor.getValue());\n      } else {\n        designer.store().data()[oldContext] = editor.getValue();\n      }\n    } else {\n      designer.store().data(JSON.parse(editor.getValue()));\n    }\n  }\n\n  component = designer.store().data();\n\n  if (context !== 'runtimeComponent') {\n    if (extra[context] === 'json') {\n      editor.setEditor(extra[context], JSON.stringify(component[context], null, '\\t'), 2);\n    } else {\n      editor.setEditor(extra[context], component[context], 1, true);\n    }\n  } else {\n    editor.setEditor('json', JSON.stringify(designer.store().data(), null, '\\t'), 2);\n  }\n}",
      "useCoreAPI": false,
      "core": false
    },
    "t1bc2d177b019c45": {
      "_id": "t1bc2d177b019c45",
      "component": "ToolBar",
      "state": "init",
      "action": "function init(conf) { \n  var toolBarItems = [],\n    self = this;\n\n  // items\n  toolBarItems = this.require('db').collections().ToolBarItem.find({\n    \"type\": this.designer().type()\n  });\n\n  // sort items\n  toolBarItems.sort(function (itemA, itemB) {\n    if (itemA.position > itemB.position) {\n      return 1;\n    }\n    if (itemA.position < itemB.position) {\n      return -1;\n    }\n    return 0;\n  });\n\n  toolBarItems.forEach(function (toolBarItem) {\n    var id = toolBarItem._id;\n    self.items().push(self.require(id));\n  });\n}",
      "useCoreAPI": false,
      "core": false
    },
    "v1bc561f6f811823": {
      "_id": "v1bc561f6f811823",
      "component": "ToolBar",
      "state": "render",
      "action": "function render() { \n  var domItems = document.getElementById('designer-toolbar-items'),\n    i = 0,\n    length = 0,\n    item = null,\n    self = this;\n\n  // items\n  this.items().forEach(function (item) {\n    domItems.insertAdjacentHTML('beforeend', '<li>' + item.html().source() + '</>');\n  });\n\n  // events\n  length = domItems.children.length;\n  for (i = 0; i < length; i++) {\n    item = domItems.children[i];\n    item.addEventListener('click', function () {\n      this.click();\n    }.bind(self.items(i)));\n  }\n}",
      "useCoreAPI": false,
      "core": false
    },
    "a18a121495912d0c": {
      "_id": "a18a121495912d0c",
      "component": "Workspace",
      "state": "init",
      "action": "function init(conf) { \n  var Editor = null,\n    designer = null,\n    editor = null;\n\n  Editor = this.require('Editor');\n  designer = this.require('designer');\n\n  if (designer.isCordova()) {\n    editor = new Editor({\n      '_id': 'editor',\n      'type': 'codemirror',\n      'context': 'component',\n      'editor': CodeMirror($('#designer-editor')[0], {\n        lineNumbers: true,\n        styleActiveLine: true,\n        'mode': 'application/json',\n        'theme': 'eclipse',\n        'tabSize': 2,\n        'autoCloseBrackets': true\n      })\n    });\n  } else {\n    editor = new Editor({\n      '_id': 'editor',\n      'type': 'ace',\n      'context': 'component',\n      'editor': ace.edit('designer-editor')\n    });\n  }\n}",
      "useCoreAPI": false,
      "core": false
    },
    "f1236f1ee1e1d68f": {
      "_id": "f1236f1ee1e1d68f",
      "component": "Workspace",
      "state": "render",
      "action": "function render() { \n  this.require('editor').render();\n}",
      "useCoreAPI": false,
      "core": false
    },
    "a1286e1807c116ef": {
      "_id": "a1286e1807c116ef",
      "component": "Server",
      "state": "start",
      "action": "function start() { \n  var RuntimeChannel = null,\n    channel = null,\n    id = '',\n    system = '',\n    types = null,\n    title = '',\n    collection = '',\n    self = this,\n    designer = this.require('designer'),\n    result = {},\n    property = '',\n    propName = '',\n    editor = null;\n\n  this.require('storage').on('changed', function (obj) {\n    if (typeof obj['system-designer-message'] !== 'undefined') {\n      $db.RuntimeMessage.insert(obj['system-designer-message'].newValue);\n    }\n  }, true);\n\n  RuntimeChannel = this.require('RuntimeChannel');\n  channel = new RuntimeChannel({\n    '_id': 'channel'\n  });\n\n  channel.on('send', function (message) {\n    if (message.event.indexOf('$system') !== 0) {\n      var storage = this.require('storage'),\n        config = storage.get('system-designer-config'),\n        designer = this.require('designer'),\n        messages = [];\n\n      storage.set('system-designer-message', message);\n\n      if (designer.isCordova()) {\n        messages = designer.messages();\n        messages.push(message);\n        designer.messages(messages);\n      }\n\n      // message for server debug\n      if (typeof config.debugType !== 'undefined' && config.debugType === 'server' && config.urlServer) {\n        $.post(config.urlServer + ':8888/' + message.event, encodeURIComponent(JSON.stringify(message.data)));\n      }\n    }\n  });\n\n  id = decodeURIComponent(document.location.href.split('#')[1].split('?')[0]);\n  collection = document.location.href.split('#')[2].split('?')[0];\n  systemId = document.location.href.split('#')[3].split('?')[0];\n\n  system = this.require('storage').get(systemId);\n  component = system.components[collection][id];\n  model = designer.getGeneratedModel(collection);\n\n  function _init(props) {\n    var propName = '',\n      position = 0,\n      menuitem = null,\n      arrId = [];\n\n    if (Object.keys(props)) {\n      // add menuitems\n      for (propName in props) {\n        self.require('db').collections().HTML.insert({\n          \"_id\": \"menu-item-property-\" + propName + \".html\",\n          \"source\": '<a id=\"designer-menu-item-property-' + propName + '\" href=\"#' + propName + '\">' + propName + '</a>'\n        });\n        arrId = self.require('db').collections().MenuItem.insert({\n          \"name\": propName,\n          \"html\": \"menu-item-property-\" + propName + \".html\",\n          \"position\": position + 10,\n          \"type\": \"component\"\n        });\n        self.require('designer').menubar().items().push(self.require(arrId[0]));\n      }\n\n      // items\n      var toto = self.require('designer').menubar().items().sort(function (itemA, itemB) {\n        var compA = runtime.require(itemA),\n          compB = runtime.require(itemB);\n\n        if (compA.position() > compB.position()) {\n          return 1;\n        }\n        if (compA.position() < compB.position()) {\n          return -1;\n        }\n        return 0;\n      });\n      // render\n      self.require('designer').menubar().render();\n    }\n  }\n\n  designer.store().uuid(id);\n  designer.store().collection(collection);\n  designer.store().data(component);\n\n  for (property in component) {\n    if (model[property] && model[property].type) {\n      switch (true) {\n        case model[property].type === 'html':\n          result[property] = 'html';\n          break;\n        case model[property].type === 'javascript':\n          result[property] = 'javascript';\n          break;\n        case model[property].type === 'css':\n          result[property] = 'css';\n          break;\n        case model[property].type === 'json':\n          result[property] = 'json';\n          break;\n        case model[property].type === 'object':\n          result[property] = 'json';\n          break;\n        case model[property].type === 'text':\n          result[property] = 'text';\n          break;\n        //case Array.isArray(model[property].type):\n        //result[property] = 'array';\n        //break;\n        default:\n          // case of object / json type\n          types = system.types;\n          if (\n            types &&\n            typeof types[model[property].type] !== 'undefined' &&\n            (types[model[property].type].type === 'object' || types[model[property].type].type === 'json')\n          ) {\n            result[property] = 'json';\n          }\n          break;\n      }\n    }\n  }\n\n  designer.store().extra(result);\n  _init(result);\n\n  document.title = 'component ' + id + ' · system ' + system.name;\n\n  editor = this.require('editor');\n  if (Object.keys(result).length === 0) {\n    editor.setEditor('json', JSON.stringify(component, null, '\\t'), 2);\n  } else {\n    propName = Object.keys(result)[0];\n    if (result[propName] === 'json') {\n      editor.setEditor(result[propName], JSON.stringify(component[propName], null, '\\t'), 2);\n    } else {\n      editor.setEditor(result[propName], component[propName], 1, true);\n    }\n  }\n}",
      "useCoreAPI": true,
      "core": false
    },
    "m14b5d1ab351945d": {
      "_id": "m14b5d1ab351945d",
      "component": "Designer",
      "state": "init",
      "action": "function init(conf) { \n  var Store = null,\n    store = null,\n    MenuBar = null,\n    menubar = null,\n    ToolBar = null,\n    toolbar = null,\n    Workspace = null,\n    workspace = null,\n    Server = null,\n    server = null;\n\n  // type\n  this.type(window.location.href.split('.html')[0].split('/')[window.location.href.split('.html')[0].split('/').length - 1]);\n\n  // store\n  Store = this.require('Store');\n  store = new Store();\n\n  // menu\n  MenuBar = this.require('MenuBar');\n  menubar = new MenuBar({\n    designer: this\n  });\n  ToolBar = this.require('ToolBar');\n  toolbar = new ToolBar({\n    designer: this\n  });\n\n  // workspace\n  Workspace = this.require('Workspace');\n  workspace = new Workspace({\n    designer: this\n  });\n\n  // server\n  Server = this.require('Server');\n  server = new Server({\n    'designer': this\n  });\n\n  this.store(store);\n  this.menubar(menubar);\n  this.toolbar(toolbar);\n  this.workspace(workspace);\n  this.server(server);\n}",
      "useCoreAPI": false,
      "core": false
    },
    "b1c1bb1ef0416898": {
      "_id": "b1c1bb1ef0416898",
      "component": "Designer",
      "state": "render",
      "action": "function render() { \n  var systemId = '',\n    System = null,\n    system = null,\n    sys = null;\n\n  if (this.isCordova()) {\n    this.updateCordovaContext();\n  }\n\n  // set system\n  systemId = document.location.href.split('#')[3].split('?')[0];\n  system = this.require('storage').get(systemId);\n  System = this.require('System');\n  sys = new System(system);\n  this.system(sys);\n\n  this.toolbar().render();\n  this.workspace().render();\n  this.server().start();\n  this.updateRouter();\n\n  $(function () {\n    $('[data-toggle=\"tooltip\"]').tooltip({ 'container': 'body', delay: { \"show\": 1000, \"hide\": 100 } });\n  });\n}",
      "useCoreAPI": false,
      "core": false
    },
    "x1a97a11f711d02d": {
      "_id": "x1a97a11f711d02d",
      "component": "Designer",
      "state": "updateRouter",
      "action": "function updateRouter() { \n  var menubar = [],\n    i = 0,\n    length = 0,\n    id = '',\n    systemId = '',\n    href = '';\n\n  id = decodeURIComponent(document.location.href.split('#')[1]);\n  collection = document.location.href.split('#')[2];\n  systemId = document.location.href.split('#')[3].split('?')[0];\n\n  // update menubar\n  menubar = $('#designer-menubar-items > li > a');\n  length = menubar.length;\n  for (i = 0; i < length; i++) {\n    href = menubar[i].href;\n    context = href.split('#')[href.split('#').length - 1];\n    menubar[i].href = '#' + id + '#' + collection + '#' + systemId + '#' + context;\n  }\n}",
      "useCoreAPI": false,
      "core": false
    },
    "w1a0a410ed1179fa": {
      "_id": "w1a0a410ed1179fa",
      "component": "Designer",
      "state": "clear",
      "action": "function clear() { \n  this.refresh();\n}",
      "useCoreAPI": false,
      "core": false
    },
    "s1212d14ec616966": {
      "_id": "s1212d14ec616966",
      "component": "Designer",
      "state": "context",
      "action": "function context(value) { \n  this.workspace().clear();\n  this.workspace().refresh();\n}",
      "useCoreAPI": false,
      "core": false
    },
    "z1bac81ce5915b1d": {
      "_id": "z1bac81ce5915b1d",
      "component": "Designer",
      "state": "save",
      "action": "function save() { \n  var val = this.require('editor').getValue(),\n    designer = this.require('designer'),\n    message = this.require('message'),\n    store = designer.store().data(),\n    extra = designer.store().extra();\n\n  if (designer.context() === 'runtimeComponent') {\n    try {\n      store = JSON.parse(val);\n    } catch (e) {\n      message.danger('Can not save your component: your component has an invalid structure.');\n      return;\n    }\n\n    if (!store._id) {\n      message.danger('The property \\'_id\\' is missing.');\n      return;\n    }\n    if (store._id && store._id.indexOf(' ') !== -1) {\n      message.danger('Invalid \\'_id\\'. <br>Space is not authorized in the value of \\'_id\\'.');\n      return;\n    }\n  } else {\n    if (extra[designer.context()] === 'json') {\n      store[designer.context()] = JSON.parse(val);\n    } else {\n      store[designer.context()] = val;\n    }\n  }\n  designer.store().data(store);\n\n  // check if ID change\n  if (designer.store().uuid() !== designer.store().data()._id) {\n    this.require('channel').$editorDeleteComponent(designer.store().uuid(), designer.store().collection());\n    designer.store().uuid(designer.store().data()._id);\n\n    // update title\n    document.title = 'component ' + designer.store().uuid() + ' · ' + document.title.split('·')[1].trim();\n  }\n\n  this.require('channel').$editorUpdateComponent(designer.store().uuid(), designer.store().collection(), designer.store().data());\n  this.require('message').clean();\n  this.require('message').success('Component saved.');\n}",
      "useCoreAPI": false,
      "core": false
    },
    "n1e0b41437a1ee21": {
      "_id": "n1e0b41437a1ee21",
      "component": "x1f67a1a3311b2f4",
      "state": "start",
      "action": "function start() { \n  var Designer = null,\n    designer = null;\n\n  Designer = this.require('Designer');\n  designer = new Designer({\n    '_id': 'designer'\n  });\n  designer.render();\n}",
      "useCoreAPI": false,
      "core": false
    }
  },
  "types": {},
  "components": {},
  "_id": "x1f67a1a3311b2f4"
}